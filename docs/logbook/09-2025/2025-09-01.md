# Logbook
### Date: 1st September 2025
### Project: Fraud Detection System
### Issues Resolved: [SD-02](https://github.com/EsosaOrumwese/fraud-detection-system/issues/25) `in-progress`
### Reference commits: Check commits on this date (if any)


* 5:14am
  * spec(schema,s0): close critical issues C1–C7 for State-0
    - Summary of closures
      - C1 — Envelope semantics (draws vs counters; blocks meaning)
        - Schema: redefine `blocks` as the 128-bit PRNG counter delta and keep
          `draws` as the count of uniforms used (dec u128 string). Remove any
          implication that `blocks == draws`.
        - S0: invariants now explicitly state `blocks = after − before (u128)`
          and `draws` is checked by per-family budgets.
      - C2 — Event timestamp precision (`ts_utc`)
          - S0: unify examples and wording to **exactly six fractional digits**
            (microseconds) for RFC-3339 `ts_utc`. Failure records remain epoch-ns.
      - C3 — `draws` typing on the wire
          - S0: correct serialization note—counters and `blocks` are numbers;
            `draws` is a **decimal u128 string** per schema.
      - C4 — Invariants made explicit
          - S0: tighten normative bullets to separate counter equality check
            (`blocks`) from per-family budget (`draws`), with single-uniform,
            Box–Muller, and non-consuming examples.
      - C5 — Box–Muller envelope requirement
          - S0: normative MUST for `(blocks=1, draws="2")` and “no caching”.
      - C6 — Audit schema anchor & separation
          - S0: reference the correct anchor `schemas.layer1.yaml#/rng/core/rng_audit_log`
            and reiterate “audit is not an event” (no event envelope).
      - C7 — Trace totals semantics
          - Schema: clarify `rng_trace_log` description —
            `draws_total = Σ event draws (uniforms)` and
            `blocks_total = Σ event counter deltas (PRNG blocks)`; no equality implied.
    - Files changed
      - `schemas.layer1.yaml.txt`
        - Update #/$defs/rng_envelope: description for `draws` and `blocks`.
        - Update rng_trace_log.description: define totals semantics explicitly.
      - `state.1A.s0.expanded.txt`
        - §S0.3.1: enforce µs precision for `ts_utc`; fix examples.
        - Serialization note: `draws` is decimal string; counters/`blocks` are numbers.
        - Invariants: make counter delta vs draws budget explicit.
        - §S0.3.5 (Box–Muller): elevate envelope budget to MUST.
        - §S0.3.2/§S0.3.9: correct audit anchor and restate audit ≠ event.

