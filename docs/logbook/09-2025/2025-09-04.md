# Logbook
### Date: 4th September 2025
### Project: Fraud Detection System
### Issues Resolved: [SD-02](https://github.com/EsosaOrumwese/fraud-detection-system/issues/25) `in-progress`
### Reference commits: Check commits on this date (if any)


* 6:30am
    * state-0/L3: finalize read-only validator; fix glob & paths; align failure taxonomy; pin lineage inputs; freeze shim surface
      * WHY
        - Prevent implementer drift and contradictions in the State-0 validator (L3) by locking scope to read-only byte checks, aligning paths and taxonomy with L0/L1/L2 + the expanded spec, and removing any optional success writes that would invalidate the gate hash. :contentReference[oaicite:0]{index=0}
      * WHAT CHANGED (spec-true fixes)
        1) Read-only scope (no bundle mutations)
           - Removed all mentions and code paths that write `validator_passed.json` inside the fingerprint bundle.
           - Non-goals + DoD now state success is by process status (or external log), and L3 must never add or modify files in the bundle nor rewrite `_passed.flag`. :contentReference[oaicite:1]{index=1}
        2) RNG event absence check: correct path shape
           - V3 now globs under `logs/rng/events/*/seed=…/parameter_hash=…/run_id=…/part-*.jsonl`, i.e., family-aware, so the “no events in S0” assertion actually inspects the right directories. :contentReference[oaicite:2]{index=2}
        3) Failure record placement aligned with L0
           - Clarified DoD and routines: exactly one failure record lives under `{fingerprint, seed, run_id}` (directory path), with `{parameter_hash}` remaining in the JSON payload for lineage. :contentReference[oaicite:3]{index=3}
        4) Failure taxonomy: RNG audit mismatches → F4a
           - Key/counter/algorithm mismatches and any S0 event presence now map to **F4a** (RNG audit/envelope), not F3. DoD table reflects the mapping. :contentReference[oaicite:4]{index=4}
        5) Lineage inputs: pin git commit handling
           - V1 sources `git_commit_hex` from `manifest_fingerprint_resolved.json` and **decodes to raw 32 bytes** before recomputing the fingerprint (never hashes hex text). Inputs & Appendix reflect this; removed mention of a separate “raw 32-byte context file.” :contentReference[oaicite:5]{index=5}
        6) Host shim surface: exact, read-only, and used
           - Declared only the shims L3 actually calls (read-only): `read_json`, `read_bytes`, `list_files`, `glob`, `list_parameter_files` (+ optional `read_lines`, and `exists` where applicable). Tightened wording in DoD to match the list. :contentReference[oaicite:6]{index=6}
           - Kept Parquet/JSONL row iteration as a **local** adapter over `read_bytes`/`read_lines` (no new shims).
        7) Gate hash & atomic publish (verify-only)
           - V5 replays `_passed.flag` exactly (ASCII-sorted filenames; concat raw bytes of all files except `_passed.flag`; SHA-256), and checks the bundle file set against `MANIFEST.json`. L3 does not re-gate or mutate the bundle. :contentReference[oaicite:7]{index=7}
        8) Partition & schema authority checks
           - V4 verifies parameter-scoped datasets embed `parameter_hash` equal to the path key; schema refs must resolve to registered **JSON-Schema** anchors (no Avro in 1A), matching L0/L1/L2 policy. :contentReference[oaicite:8]{index=8}

* 6:31pm
  * Currently trying to move all the general functions/helpers/primitives defined in places apart from L0 to L0 and ensure reference is made to the doc instead. This is to avoid conflict of func definitions

