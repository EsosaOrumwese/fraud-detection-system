# Logbook
### Date: 2nd September 2025
### Project: Fraud Detection System
### Issues Resolved: [SD-02](https://github.com/EsosaOrumwese/fraud-detection-system/issues/25) `in-progress`
### Reference commits: Check commits on this date (if any)


* 1:50am
  * docs(1A/S0): finalize expanded State-0 — pin RNG envelope semantics, budgets, hashing, and consumer contract; align scoping; clean refs/typos
    * Summary
      - Bring the State-0 expanded spec to “green” by removing ambiguity, aligning section cross-refs, and tightening terminology without altering model behaviour or outputs.
      - Add explicit **wire vs math** note: envelope fields are serialized **lo,hi**; arithmetic composes **(hi,lo)**, and show the blocks invariant.
      - Clarify authorities: **counters** are the source of truth for `blocks` (mismatches ⇒ **F4c: rng_counter_mismatch**); `draws` checked against family budgets (violations ⇒ **F4d: rng_budget_violation**).
      - Ensure `draws` is documented as a **decimal string** (show examples `"0"`, `"1"`, `"2"`).
      - Make lane/counter consumption explicit:
        - `uniform1` fetches one Philox block, uses the **low lane**, advances the counter.
        - `normal` (Box–Muller, no cache) fetches one block, uses **both lanes**, advances the counter.
      - Poisson (inversion) budget: **exactly `K+1` uniforms** (incl. stopping draw).
      - Gamma (Case A) budget: clarify `B` counts **U-draw attempts with `v>0`**, including the accepted attempt.
      - Canonical merchant key: `merchant_u64 = LOW64(SHA256(LE64(merchant_id)))` (remove stray `)` and any implication of string formatting).
      - Restate **LOW64(digest32)** = **LE64 of bytes 24..31**; counters always split as **BE64** slices (digest[16:24], digest[24:32]). Add a short “Use of LOW64” reminder.
      - Correct S0.2.2 examples: remove randomness-bearing datasets (`country_set`, `ranking_residual_cache_1A`) from **parameter-scoped** list; note they partition by **seed** (and when applicable by **manifest_fingerprint**).
      - S0.10.1: “Consumers MUST join `country_set.rank` (**materialized in S6; authority rule recorded in S0.1**)”; keep inter-country order **out** of `outlet_catalogue`.
      - Move/anchor the **LRR tie-break** note next to the consumer join (residual desc, ISO asc; do **not** use Gumbel rank).
      - Add a normative bullet: decision-critical constants (e.g., `TAU`) **MUST** be binary64 **hex literals** (no recomputation like `2*pi`).
      - Make `payload.uniforms` explicitly **optional** for `gamma_component` and `dirichlet_gamma_vector`; when present, validators **MUST** check it equals `draws`.
      - Collapse mixed phrasing to a single pointer: on enumerated fatal errors, **abort per S0.9** (fix “S0.9.9” mis-cite).
      - Keep failure catalogue labels and mapping consistent with F4c/F4d split above.
        - Complete S0.10.7 bullets: `MANIFEST.json` matches byte-for-byte; **all other files** match byte-for-byte and `_passed.flag` hashes match.
* docs(spec/1A): freeze State-1 (hurdle) — deterministic/stochastic semantics, counter law scoping, registry-based gating, and trace finality; unify binary64 notation.
