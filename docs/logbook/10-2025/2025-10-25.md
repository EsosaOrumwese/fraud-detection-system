# Logbook
### Date: 25th October 2025
### Project: Fraud Detection System
### Reference commits: Check commits on this date (if any)

* 4:37am:
   - Reworked the hurdle-training helpers so the dispersion head now carries explicit merchant/channel/GDP metadata and enforces the corridor in training: packages/engine/src/engine/training/hurdle/design.py:21-133 gains the cached dispersion features, while packages/engine/src/engine/training/hurdle/fit.py:5-245 rebuilt the dispersion fit to (i) aggregate counts into MCC×channel×ln GDP bins, (ii) clip φ into [5e‑3, 5], and (iii) fall back deterministically if bins thin out.
   - Exported a fresh dispersion bundle under config/models/hurdle/exports/version=2025-10-24/20251024T234923Z/nb_dispersion_coefficients.yaml:1, leaving the sealed 2025‑10‑09 hurdle coefficients in place; the runbook now calls out both paths explicitly (docs/runbooks/segment1a_1b_execution.md:21-35).
   - Segment 1A smoke runs now execute through S2 without the earlier ERR_S2_NUMERIC_INVALID, but they fail the corridor validator: with the sealed hurdle coefficients plus the new dispersion file, the latest attempt produced parameter_hash=530943e1c3d6174db18c1b722c79866b9447787c3e4bef1247ccdfade28a9e7f, manifest_fingerprint=bb25220a187b89e000b87b9fe2ef135bf84f9870c1fe14f9a4475519d5afe374 and the validator reported rho_reject=0.2494, p99=3, cusum_max=10.72. (Using the freshly trained hurdle coefficients pushed rho even higher at 0.253.) So the numeric floor is fixed, but NB mean/dispersion still need tuning to bring rejections below the 6 % policy.