# 2026-02-20


## 2026-02-20 00:22:57 +00:00 - M10.B live check: WSP failure is endpoint wiring drift, not semantic closure
- Inspected WSP task ddb6e4beac7e41468ef35ae57ee40c7c logs in /fraud-platform/dev_min/demo/m10b_20260219T232752Z.
- Observed retries and exhaustion against localhost:8081 (IG_PUSH_RETRY_EXHAUSTED), with stale READY mismatch branch also present.
- Confirmed IG daemon posture: service healthy on port 8080, no service discovery / LB endpoint surfaced.
- Decision: fail closed; rerun SR then rerun WSP with explicit IG_INGEST_URL override to live IG private endpoint.
- Remediation in-flight: SR task 812ff943f3f747a287a254148947b8aa exited 1; next action is log extraction and targeted correction.

## 2026-02-20 01:07:24 +00:00 - M10.B blocker pivot: credentials fixed, client adapter still failing
- Confirmed sequence: endpoint drift -> auth mismatch -> 400 publish failures.
- Rotated Confluent runtime credentials via managed workflow dev-min-m2f-topic-readiness (run 22206773359), then validated metadata success with confluent-kafka (lkc-18rg03).
- Forced ECS daemon redeploy to reload SSM secrets.
- Persisting blocker: IG continues KafkaConnectionError: Unable to determine broker version on current kafka-python adapter path.
- Decision: patch src/fraud_detection/event_bus/kafka.py to confluent-kafka, rebuild/publish image, roll services, rerun M10.B lane.

## 2026-02-20 01:09:09 +00:00 - Implemented Kafka adapter migration to confluent-kafka
- Patched src/fraud_detection/event_bus/kafka.py from kafka-python to confluent-kafka while keeping adapter interfaces stable.
- Added confluent-kafka dependency in pyproject.toml.
- Syntax validation passed via python -m py_compile.
- Planned immediate follow-up: rebuild/publish image and redeploy runtime to consume the fix before rerunning M10.B lane.

## 2026-02-20 01:09:58 +00:00 - Kafka adapter smoke passed
- Ran module-level smoke using patched adapter + SSM runtime credentials.
- list_partitions('fp.bus.control.v1') returned [0].
- Proceeding to image rebuild + managed rollout so runtime uses patched code.

## 2026-02-20 09:56:00 +00:00 - Documentation visibility checkpoint
- USER reported insufficient visibility of in-flight documentation.
- Added explicit checkpoint in `platform.impl_actual.md` confirming live decision-trail coverage and next-step documentation discipline.
- Commitment for ongoing M10.B execution:
  - pre-action decision note in implementation map,
  - post-action outcome + blocker delta in this logbook,
  - fail-closed posture preserved until blocker-free semantic closure.

## 2026-02-20 10:11:00 +00:00 - M10.B blocker confirmed: missing confluent-kafka in runtime image
- Collected daemon health and CloudWatch evidence; several required services were crash-looping.
- Unified failure signature across IG/archive-writer/DF/AL/case-trigger/label-store:
  - `ModuleNotFoundError: No module named 'confluent_kafka'`.
- Root cause isolated to packaging drift:
  - Dockerfile curated dependency selector did not include `confluent-kafka` even though adapter code now imports it.
- Decision: patch Dockerfile selector, rebuild/publish immutable image, roll runtime, then continue M10.B execution.

## 2026-02-20 10:24:00 +00:00 - New image published and rollout posture pinned
- CI packaging run `22207368985` (workflow `dev-min-m1-packaging`) completed successfully from `migrate-dev`.
- New immutable digest resolved: `sha256:ac6e7c42f230f6354c74db7746e0d28d23e10f43e44a3788992aa6ceca3dcd46`.
- Before demo apply, pinned credential-safe posture:
  - source Confluent bootstrap/key/secret from current SSM at apply-time,
  - avoid remote-state credential regression,
  - keep run scope `platform_20260219T234150Z` and continue M10.B.

## 2026-02-20 10:52:00 +00:00 - M10.B blocker refined to IG health-probe compatibility drift
- Managed IG health probe snapshot captured to S3: `/evidence/dev_min/run_control/m10b_ig_health_probe.json`.
- Probe returned `state=RED`, `reasons=["BUS_UNHEALTHY"]`.
- Root cause: IG health logic still called kafka-python producer methods after event-bus migration to confluent-kafka, forcing false `BUS_UNHEALTHY` and fail-closed 400s on ingest.
- Decision: patch `src/fraud_detection/ingestion_gate/health.py`, rebuild image, redeploy, then rerun M10.B lane.

## 2026-02-20 00:56:00 +00:00 - Segment 3B P2 execution pivot from immutable roots
- Executed `P2.5/P2.6` seeded lanes for Segment `3B`.
- Initial rerun attempt on existing run `595a30d1278a4af39ea0fd1a78451571` failed with `E3B_S2_020_IMMUTABILITY_VIOLATION`.
- Decision:
  - stop reusing immutable roots,
  - stage fresh run-ids and execute `S0->S5` for each seed lane.
- First full-seed score artifact:
  - `runs/fix-data-engine/segment_3B/reports/segment3b_p2_summary_p2_candidate_full_20260220.json`
  - decision: `HOLD_P2_REOPEN` (only `V05/V06` failing).

## 2026-02-20 01:26:00 +00:00 - Segment 3B P2 settlement-coherence calibration applied
- Isolated failure family to settlement overlap (`3B-V05`, `3B-V06`) with all other hard gates already PASS.
- Patched `packages/engine/src/engine/layers/l1/seg_3B/s2_edge_catalogue/runner.py`:
  - added profile-specific settlement share floor/cap bounds,
  - added deterministic renormalization after settlement share enforcement.
- Ran witness recalibration (`42`, `101`) on fresh staged runs:
  - `42 -> fc455a28a3504168a763a081b9b5a744`
  - `101 -> d9eb3d579d6042429a9f8c8497e05657`
- Witness score artifact:
  - `runs/fix-data-engine/segment_3B/reports/segment3b_p2_summary_p2_candidate_witness_recal1_20260220.json`
  - decision: `UNLOCK_P3`.

## 2026-02-20 01:54:00 +00:00 - Segment 3B P2 fully closed (`UNLOCK_P3`)
- Ran shadow seeds on tuned candidate:
  - `7 -> fef22283640747a7ad7282b9f66efe04`
  - `202 -> 3af65609569c4e0680c6299aceacfc44`
- Full witness+shadow closure artifact:
  - `runs/fix-data-engine/segment_3B/reports/segment3b_p2_summary_p2_candidate_full_recal1_20260220.json`
  - decision: `UNLOCK_P3`.
- Closure posture:
  - `3B-V01..V07` PASS across all seeds,
  - guardrails (`3B-V11`, structural `S2..S5`) PASS,
  - stability rails PASS.

## 2026-02-20 01:58:00 +00:00 - Segment 3B P2 retention prune complete
- Pruned superseded run folders under `runs/fix-data-engine/segment_3B` after P2 closure.
- Removed:
  - `11ed2ae6204946c6a1501f7ba4b0e008`
  - `1e8bee3a287f486098f736530acfaa40`
  - `404cde870efa40c3afc442ffc7a4ea87`
  - `6e26ad1a0b2a45c7ac08997104ca2ffd`
- Retained final P2 authority keep-set:
  - `42 -> fc455a28a3504168a763a081b9b5a744`
  - `101 -> d9eb3d579d6042429a9f8c8497e05657`
  - `7 -> fef22283640747a7ad7282b9f66efe04`
  - `202 -> 3af65609569c4e0680c6299aceacfc44`

## 2026-02-20 02:05:04 +00:00 - M10.B continued: identified case-lane topic mismatch and patched canonical route
- Verified 20-event WSP stream exists (mitted=20) but semantic closure remained open because downstream case/label lane did not advance.
- Correlated evidence:
  - Confluent topics include p.bus.case.triggers.v1 (not p.bus.case.v1).
  - Runtime logs showed repeated UNKNOWN_PARTITION for p.bus.case.v1.
- Applied canonical-topic patches across infra + runtime/config surfaces to use p.bus.case.triggers.v1.
- Kept fail-closed posture: M10.B remains open pending rebuild/redeploy and rerun proof.
