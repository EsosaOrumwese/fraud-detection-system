# Logbook
### Date: 8th July 2025
### Project: Fraud Detection System
### Issues Resolved: [SD-01](https://github.com/EsosaOrumwese/fraud-detection-system/issues/24) `in-progress`
### Reference commits: Check commits on this date (if any)

* 6:09am
  * Began working on the tests for stage 2
  * Test added and passed successfully, on to the next stage.

* 6:45pm
  * Skipped stage 3 as there was no point adding that much complexity. At the moment, my `NumPy` implementation of `sample_entities` works just fine.
    * **Catalogs are built once** (v2) and injected into every worker via a picklable initializer.
    * **Chunk loop** now reuses those in-memory catalogs in both multi- and single-proc modes.
    * **Entity sampling** stays on the battle-tested NumPy path (since Polars 1.30.0 has no weighted-sampling API), which is just as fast for your small catalogs.

* 7:27pm
  * Begin working on stage 4
  
* 9:15pm
  * replace MCC-prefix hack with merchant_country→EUR/USD mapping 
  * normalize country codes to uppercase before lookup 
  * retain mcc_code as string and emit currency_code alongside it 
  * produce hyphenated UUIDv4 strings instead of raw hex 
  * reinforce label_fraud burst logic:
    • guard against all-zero merchant risk
    • preserve ±burst_window_s clustering per wave
    • fill per-wave shortfalls immediately, then final global fill

