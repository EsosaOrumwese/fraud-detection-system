# Logbook
### Date: 29th June 2025
### Project: Fraud Detection System
### Issues Resolved: [SD-01](https://github.com/EsosaOrumwese/fraud-detection-system/issues/24) `in-progress`
### Reference commits: Check commits on this date (if any)

* 12:31am
  * Added test suite for the temporal feature of the data generator.
    * `tests/unit/test_temporal.py`: Covers `sample_timestamps` in isolation
    * `tests/unit/test_core_temporal.py`: Validates that generate_dataframe correctly uses the timestamps
  * Random question: Why doesn't the progress bar in GE validate show well in the Docker logs or Airflow logs?
    * Instead, it prints it out stage by stage instead of showing one consistent bar that updates.
  * Tests added and now working fine.

* 9:40am
  * Began implementing changes to introduce correlated fraud events via per-merchant and per-card risk factors. These include:
    * Enhancements to `catalog.py` to emit `risk` (and, for cards, a persistent `pan_hash`). 
    * Updates to `core.py` so that it:
      * Generates entity catalogs 
      * Samples customer/merchant/card IDs 
      * Looks up each entity’s risk factor 
      * Computes `P(fraud) = global_rate × merchant_risk × card_risk`
    * Adjustments in `cli.py` to pass the `catalog` section of your config into `generate_dataframe`.

* 10:25pm
  * Implemented changes that involve
    * Merchants and cards each get a persistent risk score drawn from a Beta distribution.
    * Transactions now sample from your Zipf-distributed catalogs, ensuring realistic popularity skews. 
    * Fraud labels are correlated, since each transaction’s `P(fraud) = global rate × merchant risk × card risk`.
    * The CLI remains backward-compatible but now drives the new catalog-and-risk logic via your validated config.