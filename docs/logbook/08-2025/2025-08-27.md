# Logbook
### Date: 27th August 2025
### Project: Fraud Detection System
### Issues Resolved: [SD-02](https://github.com/EsosaOrumwese/fraud-detection-system/issues/25) `in-progress`
### Reference commits: Check commits on this date (if any)

* 3:06am
  * S1: align envelope budget with S0; finalize B11–B15
    - Restore S0-required envelope fields `blocks` (int) and `draws` (JSON base-10 uint128).
    - State and enforce equalities: `u128(after)-u128(before) == blocks == parse_u128(draws) == trace_draws == draws_expected`.
    - Keep single-budget primitive `d_m` for math; for hurdle, `blocks = d_m ∈ {0,1}`.
    - Validator V5 updated to check `delta==blocks` and reconcile envelope/trace.
    - Error payloads: rename `draws_observed` → `trace_draws`.
    - No change to downstream semantics; no optional stream_jump in normative text.

* 3:51am
  * S1: finalize C16–C19 — logistic math and numeric policy
    * C16 (codomain/emission): Keep logistic map sigma\:R->(0,1) in math; add Emission contract for binary64 two-branch evaluation with emitted pi in \[0,1]. Define deterministic := (pi == 0.0 || pi == 1.0) using exact binary64 comparison. When deterministic, emit u\:null; otherwise require 0\<u<1.
    * C17 (precision/serialization): Pin pi (and eta if present) to JSON numbers that round-trip to binary64 (shortest round-trippable decimal, <=17 significant digits; scientific notation allowed). Enforce 0.0 <= pi <= 1.0 and annotate the payload pi field accordingly.
    * C18 (no clipping in compute/emit): Explicitly forbid clamping or clipping of eta or pi during compute or emission; move any display-only clipping to a non-normative UI note (must not alter emitted values).
    * C19 (shape and encoders, self-contained): Add “Feature vector construction (logistic, normative)”: fixed order \[intercept] + onehot(MCC) + onehot(channel) + onehot(GDP\_bucket); channel labels/order \[CP, CNP]; GDP buckets/order \[1,2,3,4,5]; MCC column order equals the order of mcc: coefficients in hurdle\_coefficients.yaml. Enforce |x| = |beta| = 1 + C\_mcc + 2 + 5 and one-hot sum == 1. Update V4 to reference this subsection and re-assert bounds.

* 6:29am
  * Currently on issue set D out of A to M. Plan to finish all today
  * S1: finalize deterministic payload contract; de-dup pseudocode
    - S1.2: replace “u is absent/null” with authoritative “emit u:null” for deterministic rows.
    - S1.4 pseudocode: remove duplicate `deterministic = (draws == 0)` line; emit `deterministic` exactly once in payload dict.
    - Confirms single-source contract: u is required (number|null); null iff deterministic; stochastic emits 0<u<1.
