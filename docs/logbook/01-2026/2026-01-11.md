# Logbook
### Date: 11th January 2026
### Project: Fraud Detection System
### Reference commits: Check commits on this date (if any)

* 12:10am
   - Confirmed dev-mode contract source is docs/model_spec and committed to keep a switchable contract source for production.
   - Verified packages/engine is effectively empty and began bootstrapping the engine package from scratch.
   - Added core engine scaffolding (errors, logging, hashing, config, run-path resolution) to support run isolation and contract loading.
   - Added contract source + loader utilities for dictionary/registry/schema resolution.
   - Began Segment 1A S0 foundations: context structs, input resolution, hashing logic, RNG helpers, and S0 output writers.
   - Noted missing config file `config/layer1/1A/rng/run_seed.yaml` during S0 input checks (to be addressed in S0 implementation).

* 12:30am
   - Added contract-switching CLI/env support and implemented the first pass of Segment 1A S0 foundations (runner, path resolution, hashing, RNG anchor/audit/trace).
   - Created `config/layer1/1A/rng/run_seed.yaml` and wired seed loading with CLI override.
   - Implemented input resolution for S0 references, parameter file selection from registry templates, and manual schema checks for merchant_ids.
   - Added contract-derived output path resolution and run_id collision handling under runs/<run_id>.
   - Logged decisions in `segment_1A.impl_actual.md` per the implementation doctrine.
   - Chose manifest-fingerprint naming based on file basenames and documented the run-local staging limitation for S0.

* 12:40am
   - Added a JSON Schema adapter for schema-pack tables and wired S0 merchant_ids validation to use schemas.ingress.layer1.yaml.
   - Added Makefile targets `segment1a-s0` and `engine-s0` plus contract-switching args for the new CLI entrypoint.
   - Updated the Segment 1A implementation log with the new validation + Makefile decisions.
   - Started an S0 spec crosscheck, added an authority audit for non-JSON schema refs, and recorded remaining gaps for follow-up (run_id collision scope).

* 12:52am
   - Aligned S0 run_id collision checks with RNG log directories (audit/trace/anchor) while keeping a run-root guard.
   - Updated pre-run input resolution to skip run-local staging until run_id exists (external roots only).
   - Logged the S0 collision/staging decisions in the Segment 1A implementation map.

* 1:01am
   - Added a mandatory "Implementation map discipline" section to `AGENTS.md` to enforce detailed, append-only plans and logbook linking.

* 1:07am
   - Added a run-scoped file handler so S0 writes `runs/<run_id>/run_log_<run_id>.log` alongside STDOUT logging.
   - Fixed indentation in `schemas.layer1.yaml` to restore valid YAML parsing for 5B RNG event schemas.
   - Captured the run-log design decision in the Segment 1A implementation map.

* 1:12am
   - Fixed JSON Schema adapter to validate row objects (not arrays) for ingress tables, resolving S0 merchant_ids validation failure.
   - Logged the ingress validation change in the Segment 1A implementation map.

* 1:16am
   - Added a configurable runs root (ENGINE_RUNS_ROOT/--runs-root) so S0 run folders can be placed under Makefile RUN_ROOT.
   - Updated RunPaths and EngineConfig accordingly, and wired RUN_ROOT into SEG1A_S0 in the Makefile.
