# Logbook
### Date: 31st January 2026
### Project: Fraud Detection System
### Reference commits: Check commits on this date (if any)

* 04:05am
  - Fixed WSP MinIO stream reader: use `force_virtual_addressing=False` instead of unsupported `path_style_access` for PyArrow 19.

* 05:10am
  - WSP now normalizes ts_utc to RFC3339 micros with trailing Z to satisfy canonical envelope (fixes IG ENVELOPE_INVALID quarantines).

* 05:58am
  - Cleared Kinesis control/event bus streams, started IG service, and ran SR + WSP (max 200 events). WSP streamed 200 events successfully from MinIO stream view.

* 06:05am
  - IG service targets now export PLATFORM_RUN_ID so receipts/health/quarantine land under the active run root.
  - IG admission logs now include receipt_ref + eb_ref for EB diagnostics.

* 06:21am
  - Ran fresh parity flow (new platform run id), streamed 20 events, IG receipts written under run-scoped prefix, platform log includes eb_ref lines.

* 06:30am
  - Normalized S3 run prefix: platform artifacts now written under `s3://fraud-platform/<run_id>/...` using `PLATFORM_STORE_ROOT`.
  - Ran fresh 20‑event parity flow; receipts + EB refs confirm in platform log.

* 07:00am
  - Reset LocalStack Kinesis streams, created a fresh platform run id, restarted IG after run creation, then ran SR → WSP (20‑event cap).
  - Verified IG receipts under `platform_20260131T065731Z/ig/receipts/` and confirmed EB has records in `fp-traffic-bus`.

* 07:09am
  - Updated Oracle Store, WSP, IG, and EB impl_actual + build_plan docs to mark v0 green and describe the current v0 posture.
  - Marked the platform Control & Ingress phase as v0 green with explicit meaning.

* 08:19am
  - Added EB diagnostics logging: `platform.log` now shows EB publish lines and a run‑scoped `eb/eb.log` is emitted.

* 08:27am
  - Ran a fresh parity run to demonstrate EB visibility: reset streams, SR READY published, WSP streamed 20 events, platform.log shows `IG published to EB ...`, and `runs/fraud-platform/<run_id>/event_bus/event_bus.log` contains EB publish diagnostics.

* 08:33am
  - Switched component log filenames/dirs from abbreviations to full names (`scenario_runner`, `world_streamer_producer`, `ingestion_gate`, `event_bus`).

* 08:38am
  - Ran a fresh parity pass with 200 events under `platform_20260131T083459Z`; SR READY published, WSP streamed 200, IG receipts written, EB publish lines present in `event_bus/event_bus.log` and `platform.log`.

* 01:45pm
  - Logged plan to make SR always read Oracle Store (S3) and make evidence/gate verification S3‑aware (scenario_runner.impl_actual).

* 02:10pm
  - Implemented oracle‑first SR engine root (wiring overrides request) and S3‑aware evidence/gate verification; updated SR wiring + runbook and make defaults.
  - Tests: `\.venv\Scripts\python.exe -m pytest tests/services/scenario_runner/test_gate_verifier.py -q` (pass).

* 12:50pm
  - Ran SR with oracle‑first root (new equivalence key) and confirmed READY published for run_id=22ce97bb890adee54e73186bbe5d8769 under platform_20260131T124022Z.
  - Ran WSP ready consumer once with `WSP_READY_MAX_EVENTS=20`; streamed 20 events per READY message (four pending READYs in Kinesis), no errors.

* 01:20pm
  - Added v0 control & ingress narrative flow + canonical event-time semantics to platform.impl_actual (Phase 1–3 summary).

* 01:26pm
  - Added explicit WSP note in runbook: streaming is in canonical ts_utc order; speedup preserves ordering.

* 01:36pm
  - Added Phase 4 RTDL narrative story to platform build plan and platform impl_actual.

* 02:08pm
  - Expanded Phase 4 RTDL narrative in platform.build_plan + platform.impl_actual with detailed ordering/watermark/event-time semantics.

* 02:25pm
  - Locked Phase 4 RTDL stack in platform build plan + impl_actual (S3/Kinesis/Postgres; no MLflow/Airflow; parity‑first).

* 02:35pm
  - Added Phase‑4 sub‑phase progression (4.1–4.5) to platform build plan + impl_actual.

* 02:50pm
  - Expanded Phase 4.1 in platform build plan (A–G DoD checklists) and logged the confirmed RTDL contract decisions in platform.impl_actual.

* 03:35pm
  - Implemented Phase 4.1 contracts (RTDL schemas) and updated platform contracts index; logged decisions in platform.impl_actual.
