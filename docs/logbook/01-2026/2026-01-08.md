# Logbook
### Date: 8th January 2026
### Project: Fraud Detection System
### Reference commits: Check commits on this date (if any)

* 12:58am
   - Checked the local system time with `Get-Date` to anchor the 3A alignment edits.
   - Updated `docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml` to normalize the `outlet_catalogue` path/partitioning, add the optional `s4_legality_report` ingress reference, and register `rng_audit_log`, `rng_trace_log`, and `rng_event_zone_dirichlet` for S3 RNG evidence.
   - Expanded `docs/model_spec/data-engine/layer-1/specs/contracts/3A/artefact_registry_3A.yaml` with explicit cross-layer pointers (upstream bundles/flags, ingress/egress pins, optional diagnostics), plus 3A RNG core logs and event family entries, and aligned dependency references to manifest keys.
   - Added the `rng/events/zone_dirichlet` schema anchor to `docs/model_spec/data-engine/layer-1/specs/contracts/1A/schemas.layer1.yaml` to match the 3A S3 event family.
   - Removed `tz_index_manifest` references from `docs/model_spec/data-engine/layer-1/specs/state-flow/3A/state.3A.s0.expanded.md` so the S0 manifest only pins `tz_world` and `tz_timetable_cache`.
   - Validated YAML parsing for the updated 3A dictionary, 3A registry, and Layer-1 schema pack files.

* 1:28am
   - Checked the local system time with `Get-Date` to anchor review of the 3B alignment recommendations.
   - Reviewed `docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml` and `docs/model_spec/data-engine/layer-1/specs/contracts/3B/artefact_registry_3B.yaml` to compare dictionary vs registry coverage and identify drift (run reports, RNG logs/events, upstream inputs, and legacy non-contract entries).

* 2:00am
   - Checked the local system time with `Get-Date` to anchor the 3B contract alignment edits.
   - Added upstream cross-layer inputs and policy pointers to `docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml` (outlet catalogue, 2A time assets, 3A zone outputs, transaction schema merchant IDs, and routing policy inputs).
   - Added 3B RNG evidence entries (`rng_audit_log`, `rng_trace_log`, `rng_event_edge_tile_assign`, `rng_event_edge_jitter`) and aligned `cdn_weights_ext_yaml` licensing in the 3B dictionary.
   - Expanded `docs/model_spec/data-engine/layer-1/specs/contracts/3B/artefact_registry_3B.yaml` with explicit contract outputs, run reports, RNG logs/events, and upstream inputs; aligned `gamma_draw_log_3B`, `virtual_settlement_coords` versioning, and `virtual_routing_policy_3B` dependencies to dictionary IDs.
   - Validated YAML parsing for the updated 3B dictionary and registry files.

* 5:13am
   - Checked the local system time with `Get-Date` to timestamp the 3B registry-only scan.
   - Parsed `docs/model_spec/data-engine/layer-1/specs/contracts/3B/artefact_registry_3B.yaml` against `docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml` to enumerate registry-only entries for the non-contract cleanup discussion.

* 5:34am
   - Checked the local system time with `Get-Date` to timestamp the 3B non-contract cleanup.
   - Removed non-contract entries (code/tests/docs/schema assets/legacy helpers/manifests/logs/metrics/exceptions) from `docs/model_spec/data-engine/layer-1/specs/contracts/3B/artefact_registry_3B.yaml` per the clarified contract-vs-implementation boundary.
   - Verified the updated 3B registry YAML parses cleanly.

* 5:36am
   - Checked the local system time with `Get-Date` to timestamp the crosscheck refresh.
   - Updated the 3B section in `docs/tmp/artefact_registry_crosscheck.md` to reflect the aligned dictionary/registry state (run reports, RNG logs, upstream inputs, and cross-layer bundles).

* 6:20am
   - Checked the local system time with `Get-Date` before reviewing the updated 5A alignment notes.
   - Read the latest `scratch_files/scratch.md` entries covering the 5A contract alignment checklist and open decisions.

* 6:45am
   - Checked the local system time with `Get-Date` before applying the 5A contract alignment edits.
   - Expanded `docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml` with cross-layer reference_data pointers, new 5A policy/config artefacts, and the `validation_bundle_5A` directory entry.
   - Updated `docs/model_spec/data-engine/layer-2/specs/contracts/5A/artefact_registry_5A.yaml` with upstream pointer entries, new 5A policy/config artefacts, the validation bundle/index split, and 5A run-report artefacts.
   - Added schema anchors for the new 5A policies/configs in `docs/model_spec/data-engine/layer-2/specs/contracts/5A/schemas.5A.yaml`.
   - Normalized 5A state doc references to canonical IDs in `docs/model_spec/data-engine/layer-2/specs/state-flow/5A/state.5A.s0.expanded.md`, `docs/model_spec/data-engine/layer-2/specs/state-flow/5A/state.5A.s2.expanded.md`, and `docs/model_spec/data-engine/layer-2/specs/state-flow/5A/state.5A.s5.expanded.md`.
   - Validated YAML parsing for the updated 5A dictionary/registry/schema files and confirmed alias replacements.

* 6:47am
   - Checked the local system time with `Get-Date` before refreshing the 5A crosscheck notes.
   - Updated the 5A section in `docs/tmp/artefact_registry_crosscheck.md` to reflect the aligned registry/dictionary state, including upstream pointers and run reports.

* 5:04pm
   - Checked the local system time with `Get-Date` before reviewing the updated 5B alignment notes.
   - Read the latest `scratch_files/scratch.md` 5B checklist covering dictionary, registry, schema, and naming updates.

* 5:50pm
   - Checked the local system time with `Get-Date` to anchor the 5B contract alignment edits.
   - Expanded `docs/model_spec/data-engine/layer-2/specs/contracts/5B/artefact_registry_5B.yaml` with upstream cross-layer pointers, validation bundle directory entry, RNG logs/events, bundle layout policy, and the segment state run-report journal; aligned S0 dependencies and validation bundle dependencies to the new entries.
   - Added the `bundle_layout_policy_5B` schema anchor to `docs/model_spec/data-engine/layer-2/specs/contracts/5B/schemas.5B.yaml`.
   - Added 5B RNG event schema anchors (`arrival_lgcp_gaussian`, `arrival_time_jitter`, `arrival_site_pick`, `arrival_edge_pick`) to `docs/model_spec/data-engine/layer-1/specs/contracts/1A/schemas.layer1.yaml`.
   - Updated `docs/model_spec/data-engine/layer-2/specs/state-flow/5B/state.5B.s4.expanded.md` to reference the RNG event table IDs alongside their substream labels.
   - Refreshed the 5B section in `docs/tmp/artefact_registry_crosscheck.md` to reflect the new contract coverage.

* 6:16pm
   - Checked the local system time with `Get-Date` before reviewing the updated 6A alignment checklist.
   - Read `scratch_files/scratch.md` to capture the 6A contract alignment steps (dictionary/registry/schema/prose updates, plus the Layer-3 RNG gap note).

* 7:42pm
   - Checked the local system time with `Get-Date` before continuing the 6A/Layer-3 RNG alignment edits.
   - Replaced the non-ASCII union marker in `docs/model_spec/data-engine/layer-3/specs/contracts/dataset_dictionary.layer3.rng.yaml` and `docs/model_spec/data-engine/layer-3/specs/contracts/artefact_registry.layer3.rng.yaml` with ASCII wording.
   - Added optional 6A linkage/eligibility policy entries to `docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml`, `docs/model_spec/data-engine/layer-3/specs/contracts/6A/artefact_registry_6A.yaml`, and `docs/model_spec/data-engine/layer-3/specs/contracts/6A/schemas.6A.yaml`.
   - Added the `validation_bundle_6A` directory entry to `docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml`, and added `s5_validation_report_6A`, `s5_issue_table_6A`, and `validation_bundle_6A` (bundle vs index split) to `docs/model_spec/data-engine/layer-3/specs/contracts/6A/artefact_registry_6A.yaml`.
   - Added cross-layer pointer entries for upstream bundles/flags and upstream egress surfaces in `docs/model_spec/data-engine/layer-3/specs/contracts/6A/artefact_registry_6A.yaml`.
   - Updated `docs/model_spec/data-engine/layer-3/specs/state-flow/6A/state.6A.s0.expanded.md` and `docs/model_spec/data-engine/layer-3/specs/state-flow/6B/state.6B.s0.expanded.md` to require loading the Layer-3 RNG common pack; aligned 6A S1-S5 RNG family references to contract IDs in the state docs.
   - Refreshed the 6A and 6B sections in `docs/tmp/artefact_registry_crosscheck.md` to reflect the RNG pack coverage and resolved registry/dictionary gaps.

* 10:22pm
   - Checked the local system time with `Get-Date` before consolidating Layer-3 RNG definitions into the 6A/6B contract files.
   - Merged the Layer-3 RNG schema anchors into `docs/model_spec/data-engine/layer-3/specs/contracts/6A/schemas.layer3.yaml` and referenced them from the 6A and 6B dictionaries/registries.
   - Added Layer-3 RNG logs/events to `docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml`, `docs/model_spec/data-engine/layer-3/specs/contracts/6A/artefact_registry_6A.yaml`, `docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml`, and `docs/model_spec/data-engine/layer-3/specs/contracts/6B/artefact_registry_6B.yaml`.
   - Removed Layer-3 RNG pack references from the 6A/6B S0 state docs and corrected the 6A S1 RNG schema reference to `schemas.layer3.yaml`.
   - Deleted the standalone Layer-3 RNG pack files (`schemas.layer3.rng.yaml`, `dataset_dictionary.layer3.rng.yaml`, `artefact_registry.layer3.rng.yaml`) after merging their content into the segment packs.
   - Updated the 6B entry in `docs/tmp/artefact_registry_crosscheck.md` to reflect the in-pack RNG coverage.

* 10:44pm
   - Checked the local system time with `Get-Date` before applying the 6B contract alignment updates.
   - Populated `reference_data` in `docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml` with upstream bundles/flags, sealed-inputs, arrival events, and 6A entity/role surfaces, and added `validation_bundle_index_6B` alongside the bundle directory entry.
   - Expanded `docs/model_spec/data-engine/layer-3/specs/contracts/6B/artefact_registry_6B.yaml` with upstream cross-layer pointers, added the `validation_bundle_index_6B` entry, and aligned bundle/index dependencies for the HashGate flag.
   - Normalized the 6B S0 policy/config references in `docs/model_spec/data-engine/layer-3/specs/state-flow/6B/state.6B.s0.expanded.md` to the canonical contract IDs.
   - Updated the 6B section in `docs/tmp/artefact_registry_crosscheck.md` to reflect the new upstream pointer coverage and bundle index split.

* 11:06pm
   - Checked the local system time with `Get-Date` before pruning the crosscheck notes.
   - Removed closed-out mismatch sections from `docs/tmp/artefact_registry_crosscheck.md` so only active alias notes and open issues remain for the policy/schema audit.

* 11:14pm
   - Checked the local system time with `Get-Date` before reviewing Layer-1 1A data-intake authoring guides for policy/config schema needs.
   - Read the 1A policy/config/priors/hyperparams authoring guides to list which items already have schema anchors and which still need schema definitions for implementation.

* 11:26pm
   - Checked the local system time with `Get-Date` before adding 1A policy/config schema anchors and training schemas.
   - Extended `docs/model_spec/data-engine/layer-1/specs/contracts/1A/schemas.layer1.yaml` with schema anchors for 1A S3 policies, cross-border hyperparams, smoothing/alpha configs, residual quantisation, hurdle/dispersion bundles, and the license map, plus the S3 rule predicate DSL.
   - Added `docs/model_spec/data-engine/layer-1/specs/contracts/1A/schemas.training.layer1.yaml` from the 1A hurdle training appendix to formalize training priors and manifest shapes.

* 11:40pm
   - Checked the local system time with `Get-Date` before wiring 1A policy/config schema refs.
   - Merged the hurdle training priors/manifest schemas into `docs/model_spec/data-engine/layer-1/specs/contracts/1A/schemas.layer1.yaml` and removed the standalone `docs/model_spec/data-engine/layer-1/specs/contracts/1A/schemas.training.layer1.yaml`.
   - Added 1A policy/config inputs (S3 policies, cross-border hyperparams, smoothing/alpha configs, residual quantisation, hurdle coefficients, NB dispersion, license map) to `docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml` with schema refs.
   - Wired schema refs for those policy/config entries in `docs/model_spec/data-engine/layer-1/specs/contracts/1A/artefact_registry_1A.yaml`.
   - Updated `docs/model_spec/data-engine/layer-1/specs/data-intake/1A/hurdle_simulation.priors_authoring-guide.md` to point training schema references at `schemas.layer1.yaml`.

* 11:46pm
   - Checked the local system time with `Get-Date` before reverting the 1A dictionary scope.
   - Removed policy/config entries from `docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml` to keep datasets separate from the artefact registry.

* 11:49pm
   - Checked the local system time with `Get-Date` before recomputing the 1A dataset count.
   - Counted the `- id:` entries in `docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml` and confirmed `dataset_count` remains 49 (no change needed).
