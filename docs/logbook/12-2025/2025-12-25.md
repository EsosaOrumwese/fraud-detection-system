# Logbook
### Date: 25th December 2025
### Project: Fraud Detection System
### Reference commits: Check commits on this date (if any)

* 4:25am
   - Updated `docs/model_spec/data-engine/layer-1/specs/data-intake/1A/hurdle_simulation.priors_authoring-guide.md` to add the dispersion.mom knobs (epsilon/n_min/cell_weight_rule), pin additive mcc_offsets semantics, and require the mom block in the schema + example.
   - Updated `docs/model_spec/data-engine/layer-1/specs/data-intake/1A/nb_dispersion_coefficients_authoring-guide.md` to fix the phi>0 typo, bind MOM knobs + clamps to priors, pin grouping to (mcc, channel, gdp_bucket), and document deterministic pooling + weight-rule usage.

* 4:36am
   - Updated `docs/model_spec/data-engine/layer-1/specs/data-intake/1A/hurdle_coefficients_authoring-guide.md` to pin the mean-matrix training subset to `y_hurdle == 1` (multi-site only).
   - Updated `docs/model_spec/data-engine/layer-1/specs/data-intake/1A/nb_dispersion_coefficients_authoring-guide.md` to pin the training subset to `y_hurdle == 1` and bind MOM knobs/clamps to explicit priors paths (decision-free).

* 5:05am
   - Tightened acquisition guides to remove remaining decision points: WDI GDP archive selection + fail-closed coverage, deterministic Jenks tie-break and `transaction_schema_merchant_ids` coverage check, pinned NoData handling for population raster, and updated world_countries licensing note.
   - Pinned MCC canonical scope and routing: ISO-only scope, strict enforcement against `transaction_schema_merchant_ids`, Citi PDF fallback, and clarified cross-check routes + naming.
   - Made `transaction_schema_merchant_ids` MCC/country missing handling decision-free (drop merchants on invalid/missing values).

* 5:12am
   - Added Route B bootstrap-config authority to `docs/model_spec/data-engine/layer-1/specs/data-intake/1A/transaction_schema_merchant_ids_acquisition-guide.md`, including binding config path, fail-closed rule, deterministic authoring steps, and provenance capture of config bytes/version.

* 5:50am
   - Added `config/ingress/transaction_schema_merchant_ids.bootstrap.yaml` and registered it in `docs/model_spec/data-engine/layer-1/specs/contracts/1A/artefact_registry_1A.yaml` (including dependency wiring for `transaction_schema_merchant_ids`).
   - Added schema anchor `schemas.layer1.yaml#/policy/transaction_schema_merchant_ids_bootstrap_policy` and updated S0 manifest-fingerprint inputs to include dependency closure (S0.2.3).

* 6:26am
   - Hardened S0.2.3 manifest-fingerprint inputs to require dependency-closure with explicit missing-dependency abort (`E_ARTIFACT_DEP_MISSING(name)`), and clarified the bootstrap-policy example as a declared dependency requirement.

* 9:29am
   - Standardized NB count target naming: `y_nb` is now the explicit count target in both hurdle and dispersion authoring guides, with a binding `nb_mean.parquet` requirement for `y_nb` (int64) used by mean/dispersion fitting.

* 10:01am
   - Aligned 1B licensing metadata for `world_countries` to Public Domain in `docs/model_spec/data-engine/layer-1/specs/contracts/1B/artefact_registry_1B.yaml` and `docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml`.

* 10:03am
   - Filled 1B contract gaps: added `jitter_policy` and `validation_passed_flag_1B` to the artefact registry, corrected validation bundle schema to `schemas.1B.yaml#/validation/validation_bundle_1B`, and aligned 1A `_passed.flag` schema + dictionary entry for 1B gating.

* 10:21am
   - Aligned 1B validation bundle schema to the 1A index shape in `docs/model_spec/data-engine/layer-1/specs/contracts/1B/schemas.1B.yaml` and updated the S9 `index.json` example to match the 1A-compatible index schema.

* 11:03am
   - Marked `tz_world_2025a`, `s3_candidate_set`, and `jitter_policy` as RESERVED/not-consumed by 1B v1 in the dictionary, clarified `jitter_policy` schema description, and removed tz_world_2025a from S0’s “required reference” error list.

* 11:12am
   - Applied Option A cleanup: removed `jitter_policy` from the 1B artefact registry and dataset dictionary, and collapsed the 1B policy schema section to empty (`policy: {}`) to reflect uniform-lane v1.

* 11:17am
   - Updated `docs/model_spec/data-engine/layer-1/specs/state-flow/1B/state.1B.s6.expanded.md` to clarify v1 uniform lane does not consume jitter policy inputs, adjust registry/doc note wording, and add the sigma=0.0 non-authoritative note in the RNG event example.

* 11:20am
   - Restored the `jitter_policy` schema block in `docs/model_spec/data-engine/layer-1/specs/contracts/1B/schemas.1B.yaml` with the reserved-v1 description per the Option A diff.

* 1:59pm
   - Reintroduced `jitter_policy` in the 1B artefact registry and dataset dictionary as RESERVED/VNext (not consumed by v1), updated tz_world role text, and aligned schema wording for the jitter policy.

* 4:03pm
   - Hardened 1A authoring guides: pinned dirichlet alpha lineage to “opened file” rule, made residual quantisation tiebreak keys binding, and set license_map to hard-fail if missing/invalid.
   - Registered `validation_policy.yaml` in `docs/model_spec/data-engine/layer-1/specs/contracts/1A/artefact_registry_1A.yaml` and added its schema anchor to `docs/model_spec/data-engine/layer-1/specs/contracts/1A/schemas.layer1.yaml`.

* 4:50pm
   - Added `validation_bundle_1B` and `validation_passed_flag_1B` to `docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml` so 2A.S0 dictionary-resolved inputs match the contract gate.

* 6:43pm
   - Updated 2A guides: pinned tz_nudge longitude wrap math, added hard-fail rule for MCC-scope tz_overrides without sealed MCC mapping, and corrected tzdb_release download URLs.
   - Aligned tzdb_release licensing to Public Domain in `docs/model_spec/data-engine/layer-1/specs/contracts/2A/artefact_registry_2A.yaml` and `docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml`.

* 10:46pm
   - Updated `docs/model_spec/data-engine/layer-1/specs/contracts/2B/artefact_registry_2B.yaml` to add `site_timezones` and `virtual_edge_policy_v1` to S0 sealed inputs, mark site_timezones required, and make `s7_audit_report` depend only on `s1_site_weights` with optional logs treated as evidence.
   - Updated `docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml` to mark `site_timezones` required for v1 tz-grouping/day-effects and annotate `tz_timetable_cache` as an optional cache.

* 11:20pm
   - Updated `docs/model_spec/data-engine/layer-1/specs/state-flow/2B/state.2B.s0.expanded.md` to seal `virtual_edge_policy_v1`, require `site_timezones` as a v1 pin, treat `tz_timetable_cache` as optional cache only, and align validators/anchors/run-report fields to the new required vs optional split.
