# Logbook
### Date: 27th July 2025
### Project: Fraud Detection System
### Issues Resolved: [SD-02](https://github.com/EsosaOrumwese/fraud-detection-system/issues/25) `in-progress`
### Reference commits: Check commits on this date (if any)

* 12:11am
  - Remove standalone `nb_mean_coefficients.yaml` references from `parameter_spec_1A.txt`
  - Extend `config/hurdle_coefficients.yaml` description to include both β (hurdle) and α (NB-mean) links
  - Update `ComputeNBParameters` `interface_contract_spec_1A.txt` to indicate `parsed_hurdle_coefficients` holds both coefficient sets
  - Amend `governing_artefacts_1A.txt`:
    • Note that `hurdle_coefficients.yaml` now contains NB-mean coefficients
    • Rename `stationarity_diagnostics.parquet` to `artefacts/diagnostics/hurdle_stationarity_tests_2024Q4.parquet`
  - Update `version_matrix_1A.toml.txt` to reflect the new path and version_tag for `hurdle_stationarity_tests`

* 1:03am
  * Align 1B specs with narrative: enrich site catalogue schema, propagate IDs/digests, and enforce jitter-off default
    - `interface_contract_spec_1B.txt`:
      - Propagate `merchant_id`, `site_id`, and `spatial_manifest_digest` through `AssignTimeZone` and `ComputeFootTraffic` stages
      - Expand `WriteSiteParquet` output schema to include `latitude`, `longitude`, `prior_tag`, `prior_weight_raw`, `prior_weight_norm`, `artefact_digest`, `spatial_manifest_digest`, `log_footfall_preclip`, `footfall_preclip`, `footfall_clipped`, `tzid`, `pixel_index`, `feature_index`, `d_haversine_km`, `d_road_km`
    - `parameter_spec_1B.txt`:
      - Ensure `jitter_enabled` has `default_value: false` and document that any override requires a semantic-version bump
    
* 1:33am
  * 2A spec alignment: correct TZ-path names, enrich audit schema, add site-catalogue writer
    * BuildSTRTreeIndex
      - Path pattern for `tz_index_digest` updated to `artefacts/priors/tz_world/2025a/tz_index_digest.txt`
    * DeriveTimeZone
      - `tz_assignment_audit` schema extended with `nudge_lat`, `nudge_lon`, `override_scope`, `error_type`
    * ApplyTimeZoneOverrides
      - Output renamed to `ci_override_validation.log`
      - Added `diff_count` field to schema
    * ExtractZoneTimeline
      - Cache-size record path changed to `output/tz_cache_bytes.txt`
      - Stored as `int` (byte count) not binary blob
    * Added new stage WriteUpdatedSiteCatalogue
      - Combines `site_coordinates` + audit logs
      - Writes final site catalogue with TZID, nudge coords, dst_adjusted, fold, spatial_manifest_digest
