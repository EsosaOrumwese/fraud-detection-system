# Logbook
### Date: 12th July 2025
### Project: Fraud Detection System
### Issues Resolved: [SD-02](https://github.com/EsosaOrumwese/fraud-detection-system/issues/25) `in-progress`
### Reference commits: Check commits on this date (if any)

* 12:08am
  * Start fixing my data generator's bad rating
  * Implemented Checklist #1: Signature Consistency, applied against your Stage 5 code. It:
    * Add `timezone: str = "UTC"` to your `TemporalConfig` in `config.py`.
    * Update the signature of `sample_timestamps` in `temporal.py` to include the new timezone parameter as keyword-only. 
    * Propagates that timezone through the call site in `core.py` where you invoke `sample_timestamps`.
  * Failed `tests\unit\test_temporal_distribution.py`, `tests\unit\test_temporal_time_chunked_sampling.py` and `tests\unit\test_temporal_weekday_chunk_sampling.py`
  * Implemented Checklist #2: Master‐RNG → Sub‐seeds Implementation.  It replaces the `base_seed + i` logic with a master‐RNG → sub‐seeds approach and adds the required debug log
    * All uses of seed + chunk_index are removed. 
    * A single master_rng = default_rng(cfg.seed) produces deterministic sub‐seeds. 
    * A DEBUG log confirms exactly which sub‐seeds were generated.
    ```text
    # Old way (fragile):
    seeds = [cfg.seed + i for i in range(num_chunks)]
    
    # New way (robust):
    master_rng = default_rng(cfg.seed)
    seeds = master_rng.integers(0, 2**63, size=num_chunks).tolist()
    ```
  
* 1:06am
  * Implement Checklist #4: Time-Zone Awareness (DST-Safe)
    1. **Config schema**: You now have a `timezone: str` field in `TemporalConfig` with default `"UTC"` .
    2. **CLI override**: `cli.py` accepts `--timezone` and merges it into `cfg.temporal.timezone`, and the final log line shows `timezone=%s` alongside the other settings .
    3. **No pandas boxing per chunk**: Instead of round-tripping each chunk through Pandas, the timezone conversion happens only **once** after concatenating all chunks, using Polars’ vectorized `dt.replace_time_zone(…)` and `dt.convert_time_zone(…)` .
    4. **DST-safe semantics**: You convert from the user-specified zone into UTC in one shot, ensuring that, for example, an event sampled in `"Europe/London"` properly shifts by +1 hour during British Summer Time.
    5. **Observability**: A DEBUG log at the top of `sample_timestamps` records `seed, timezone, total_rows` exactly once per chunk-batch invocation .
