# Phase 4.6 Validation Matrix (Run/Operate + Obs/Gov)
_As of 2026-02-08_

## Scope
This matrix satisfies the written quality-gate requirement in `platform.build_plan.md` section `4.6.K` by providing explicit PASS/FAIL criteria and current status for `4.6.A..4.6.J`.

Validation baseline for orchestrated parity evidence:
- `platform_run_id`: `platform_20260208T193407Z`
- `scenario_run_id`: `24827c0356195144a6d9a847c3563347`
- Obs/Gov closure evidence run:
  - `platform_run_id`: `platform_20260208T201742Z`
  - `scenario_run_id`: `5f10ddc9775b9f95076771be4b0d979d`

## Status Summary
- PASS: `4.6.A`, `4.6.B`, `4.6.D`, `4.6.F`, `4.6.J`
- FAIL: `4.6.C`, `4.6.E`, `4.6.G`, `4.6.H`, `4.6.I`
- Phase 5 unblock: **NO** (mandatory 4.6 gates are not all PASS)

## Matrix
| Gate | PASS Criteria (DoD Extract) | Current Status | Evidence | Gap to Close |
| --- | --- | --- | --- | --- |
| `4.6.A` Governance lifecycle fact stream | Required governance families are emitted and queryable (`RUN_READY_SEEN`, `RUN_STARTED`, `RUN_ENDED`, `RUN_CANCELLED`, `POLICY_REV_CHANGED`, corridor anomalies, `EVIDENCE_REF_RESOLVED`) with idempotent append-only writer posture | PASS | Implementation: `src/fraud_detection/platform_governance/writer.py`, `src/fraud_detection/world_streamer_producer/ready_consumer.py`, `src/fraud_detection/ingestion_gate/governance.py`, `src/fraud_detection/ingestion_gate/admission.py`. Validation: `python -m pytest tests/services/platform_governance/test_writer.py -q` (`3 passed`), `python -m pytest tests/services/world_streamer_producer/test_ready_consumer.py -q` (`4 passed`), `python -m pytest tests/services/ingestion_gate/test_admission.py -q` (`7 passed`). Live query: `make platform-governance-query PLATFORM_RUN_ID=platform_20260208T201742Z GOVERNANCE_QUERY_LIMIT=500` shows `RUN_READY_SEEN`, `RUN_STARTED`, `RUN_ENDED`, `EVIDENCE_REF_RESOLVED`, `RUN_REPORT_GENERATED`; negative-path tests assert `RUN_CANCELLED`, `POLICY_REV_CHANGED`, and `CORRIDOR_ANOMALY` emission paths. | Keep expanding non-local env coverage and auth-derived actor enforcement under `4.6.C`/`4.6.H`. |
| `4.6.B` Evidence-ref resolution corridor + access audit | Ref resolution is gated and every resolution attempt emits minimal access audit record; denied/invalid refs emit structured anomalies | PASS | Implementation: `src/fraud_detection/platform_governance/evidence_corridor.py` (allowlist gate + run-scope checks + allow/deny governance emission), `src/fraud_detection/platform_governance/cli.py` (`resolve-ref`), `src/fraud_detection/platform_reporter/run_reporter.py` (corridor-integrated reporter evidence resolution), `makefile` target `platform-evidence-ref-resolve`. Validation: `python -m pytest tests/services/platform_governance/test_evidence_corridor.py -q` (`3 passed`), `python -m pytest tests/services/platform_reporter/test_run_reporter.py -q` (`1 passed`). Live evidence on `platform_20260208T201742Z`: allow probe resolved (`resolution_status=RESOLVED`), deny probe emitted `REF_ACCESS_DENIED` with `CORRIDOR_ANOMALY` and `EVIDENCE_REF_RESOLVED` audit records via `make platform-evidence-ref-resolve` and `make platform-governance-query`. | Extend actor-identity derivation to non-local auth context under `4.6.C` and conformance checks under `4.6.H`. |
| `4.6.C` Service identity + auth posture by env | Local parity writer auth pinned/tested; dev/prod writer identity mechanism enforced uniformly; actor attribution from auth context | FAIL | Local producer allowlist posture exists in component policies; no complete dev/prod uniform auth mechanism surfaced in platform-wide runtime implementation | Add env-ladder identity contract and enforce at writer corridors with actor/source derivation |
| `4.6.D` Platform run reporter | A platform-level run-scoped reconciliation artifact exists with cross-plane counters + evidence refs | PASS | Implementation: `src/fraud_detection/platform_reporter/run_reporter.py`, `src/fraud_detection/platform_reporter/cli.py`, `makefile` target `platform-run-report`. Validation: `python -m pytest tests/services/platform_reporter/test_run_reporter.py -q` (`1 passed`). Live evidence: `make platform-run-report PLATFORM_PROFILE=config/platform/profiles/local_parity.yaml PLATFORM_RUN_ID=platform_20260208T201742Z` produced `runs/fraud-platform/platform_20260208T201742Z/obs/platform_run_report.json` with ingress counters (`sent=80`, `received=80`, `admit=80`) and RTDL basis/counters + evidence refs. | Residual quality gap: CSFB metrics query format warning remains a basis-note issue, not a closure blocker for `4.6.D`. |
| `4.6.E` Deployment provenance stamp uniformity | Required runtime/governance records carry `service_release_id` + environment/config revision context | FAIL | No code-level `service_release_id` propagation discovered in runtime surfaces | Add release stamp plumbing and assert in validation checks |
| `4.6.F` Run/operate durability for downstream services | Always-on operation targets exist; restart/replay-safe supervision pinned; matrix-vs-daemon boundaries explicit | PASS | Orchestrator module and packs: `src/fraud_detection/run_operate/orchestrator.py`, `config/platform/run_operate/packs/local_parity_control_ingress.v0.yaml`, `config/platform/run_operate/packs/local_parity_rtdl_core.v0.yaml`; lifecycle targets in `makefile`; runbook section `3.1` in `docs/runbooks/platform_parity_walkthrough_v0.md`; clean run restart/status evidence recorded in `docs/model_spec/platform/implementation_maps/platform.impl_actual.md` | Maintain as baseline and extend onboarding packs for future planes |
| `4.6.G` Corridor checks + anomaly policy closure | Corridor checks pinned for IG/DLA/AL/evidence-ref/registry boundaries; anomaly taxonomy minimum set wired and verified | FAIL | IG and evidence-ref corridor anomaly behavior are now wired/verified; DLA/AL/registry promotion boundary anomaly closure remains incomplete in current v0 platform implementation | Complete remaining corridor boundaries and run negative-path verification matrix |
| `4.6.H` Environment parity conformance gate | Same semantics validated across local_parity/dev/prod for envelope, governance schema, policy revision stamp, corridor behavior | FAIL | Local parity evidence exists; no explicit conformance checklist artifact covering dev/prod with same semantics | Create and execute environment conformance checklist with evidence bundle |
| `4.6.I` Closure evidence + handoff gate | Monitored parity run demonstrates governance lifecycle emission, evidence-ref audit, and platform run reporter; handoff note marks Phase 5 unblock | FAIL | Monitored parity evidence now covers governance lifecycle/query + platform run reporter generation + evidence-ref allow/deny corridor audit (`platform_20260208T201742Z`) and run/operate durability (`platform_20260208T193407Z`), but environment-level conformance/identity/provenance gates remain open | Close `4.6.C`, `4.6.E`, `4.6.G`, `4.6.H`, then publish handoff/unblock note |
| `4.6.J` Platform orchestration contract | One plane-agnostic orchestration contract for lifecycle/readiness/run-scope/restart-safe behavior; packs onboarded declaratively; no RTDL hardcoding | PASS | Contract implementation and tests: `src/fraud_detection/run_operate/orchestrator.py`, `tests/services/run_operate/test_orchestrator.py` (`4 passed`); pack onboarding and make targets in `makefile`; clean run evidence in `docs/model_spec/platform/implementation_maps/platform.impl_actual.md` | Keep orchestrator business-agnostic and onboard new planes through pack-only additions |

## 4.6.K Rollup Check
- Written matrix exists: PASS (this file).
- Monitored orchestrated parity evidence exists: PASS for run/operate and stream/restart proof.
- Overall `4.6` mandatory-gate posture: FAIL (because `4.6.C/E/G/H/I` are not PASS).
