$schema: https://json-schema.org/draft/2020-12/schema
$id: eb_offset_basis.schema.yaml
title: EB Offset Basis
type: object
additionalProperties: false
required:
  - stream
  - offset_kind
  - offsets
properties:
  stream:
    type: string
    minLength: 1
    maxLength: 256
  basis_digest:
    $ref: "#/$defs/hex64"
  offset_kind:
    type: string
    enum: [kinesis_sequence, kafka_offset, file_line]
  offsets:
    type: array
    minItems: 1
    items:
      type: object
      additionalProperties: false
      required: [partition, offset]
      properties:
        partition:
          type: integer
          minimum: 0
        offset:
          type: string
          minLength: 1
          maxLength: 128
  window_start_utc:
    $ref: "#/$defs/rfc3339_micros"
  window_end_utc:
    $ref: "#/$defs/rfc3339_micros"
  notes:
    type: string
    maxLength: 1024
$defs:
  hex64:
    type: string
    pattern: "^[0-9a-f]{64}$"
  rfc3339_micros:
    type: string
    minLength: 1
