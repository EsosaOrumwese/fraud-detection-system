# artefact_registry_5A.yaml — Layer-2 Segment 5A catalogue
subsegments:
  - id: 5A
    name: Layer-2 Arrival Surfaces
    artifacts:
      # S0 — control plane
      - manifest_key: mlr.5A.validation.s0_gate_receipt
        name: s0_gate_receipt_5A
        type: dataset
        category: control
        path: data/layer2/5A/s0_gate_receipt/manifest_fingerprint={manifest_fingerprint}/s0_gate_receipt_5A.json
        schema: schemas.5A.yaml#/validation/s0_gate_receipt_5A
        semver: '1.0.0'
        version: '{manifest_fingerprint}'
        digest:
        dependencies:
          - sealed_inputs_5A
          - mlr.1A.validation.bundle
          - mlr.1A.validation.passed
          - mlr.1B.validation.bundle
          - mlr.1B.validation.passed
          - mlr.2A.validation.bundle
          - mlr.2A.validation.passed
          - mlr.2B.validation.bundle
          - mlr.2B.validation.passed
          - mlr.3A.validation.bundle
          - mlr.3A.validation.passed
          - mlr.3B.validation.bundle
          - mlr.3B.validation.passed
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: true
        notes:

      - manifest_key: mlr.5A.validation.sealed_inputs
        name: sealed_inputs_5A
        type: dataset
        category: control
        path: data/layer2/5A/sealed_inputs/manifest_fingerprint={manifest_fingerprint}/sealed_inputs_5A.json
        schema: schemas.5A.yaml#/validation/sealed_inputs_5A
        semver: '1.0.0'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: true
        notes:

      - manifest_key: mlr.5A.validation.scenario_manifest
        name: scenario_manifest_5A
        type: dataset
        category: control
        path: data/layer2/5A/scenario_manifest/manifest_fingerprint={manifest_fingerprint}/scenario_manifest_5A.parquet
        schema: schemas.5A.yaml#/validation/scenario_manifest_5A
        semver: '1.0.0'
        version: '{manifest_fingerprint}'
        digest:
        dependencies:
          - sealed_inputs_5A
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: true
        notes: optional

      # Upstream cross-layer inputs sealed by 5A.S0
      - manifest_key: mlr.1A.validation.bundle
        name: validation_bundle_1A
        type: dataset
        category: validation
        path: data/layer1/1A/validation/manifest_fingerprint={manifest_fingerprint}/
        schema: schemas.layer1.yaml#/validation/passed_flag
        semver: '{semver}'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { qa_team: null }
        last_updated:
        environment: [ci, runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.1A.validation.passed
        name: validation_passed_flag_1A
        type: manifest
        category: validation
        path: data/layer1/1A/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
        schema:
        semver: '{semver}'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: [validation_bundle_1A]
        source: internal
        owner: { qa_team: null }
        last_updated:
        environment: [ci, runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.1B.validation.bundle
        name: validation_bundle_1B
        type: bundle
        category: validation
        path: data/layer1/1B/validation/manifest_fingerprint={manifest_fingerprint}/
        schema: schemas.1B.yaml#/validation/validation_bundle_1B
        semver: '{semver}'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { owner_team: mlr-1b-core }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.1B.validation.passed
        name: validation_passed_flag_1B
        type: manifest
        category: validation
        path: data/layer1/1B/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
        schema: schemas.1B.yaml#/validation/passed_flag
        semver: '{semver}'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: [validation_bundle_1B]
        source: internal
        owner: { owner_team: mlr-1b-core }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.2A.validation.bundle
        name: validation_bundle_2A
        type: bundle
        category: validation
        path: data/layer1/2A/validation/manifest_fingerprint={manifest_fingerprint}/
        schema:
          index_schema_ref: schemas.2A.yaml#/validation/bundle_index_v1
        semver: '{semver}'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { owner_team: mlr-2a-validation }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.2A.validation.passed
        name: validation_passed_flag_2A
        type: manifest
        category: validation
        path: data/layer1/2A/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
        schema: schemas.2A.yaml#/validation/passed_flag
        semver: '{semver}'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: [validation_bundle_2A]
        source: internal
        owner: { owner_team: mlr-2a-validation }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.2B.validation.bundle
        name: validation_bundle_2B
        type: dataset
        category: validation
        path: data/layer1/2B/validation/manifest_fingerprint={manifest_fingerprint}/index.json
        schema: schemas.layer1.yaml#/validation/validation_bundle/index_schema
        semver: '{semver}'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { owner_team: l1-2b-governance }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.2B.validation.passed
        name: validation_passed_flag_2B
        type: file
        category: validation
        path: data/layer1/2B/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
        schema: schemas.1B.yaml#/validation/passed_flag
        semver: '{semver}'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: [validation_bundle_2B]
        source: internal
        owner: { owner_team: l1-2b-governance }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.3A.validation.bundle
        name: validation_bundle_3A
        type: dataset
        category: validation
        path: data/layer1/3A/validation/manifest_fingerprint={manifest_fingerprint}/
        schema: schemas.layer1.yaml#/validation/validation_bundle_index_3A
        semver: 1.0.0
        version: '{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { owner_team: mlr-3a-core }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.3A.validation.passed
        name: validation_passed_flag_3A
        type: dataset
        category: validation
        path: data/layer1/3A/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
        schema: schemas.layer1.yaml#/validation/passed_flag_3A
        semver: 1.0.0
        version: '{manifest_fingerprint}'
        digest:
        dependencies: [validation_bundle_3A]
        source: internal
        owner: { owner_team: mlr-3a-core }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.3B.validation.bundle
        name: validation_bundle_3B
        type: bundle
        category: validation
        path: data/layer1/3B/validation/manifest_fingerprint={manifest_fingerprint}/
        schema: schemas.layer1.yaml#/validation/validation_bundle_index_3B
        semver: '{semver}'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { qa_team: null }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.3B.validation.passed
        name: validation_passed_flag_3B
        type: file
        category: validation
        path: data/layer1/3B/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
        schema: schemas.layer1.yaml#/validation/passed_flag_3B
        semver: '{semver}'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: [validation_bundle_3B]
        source: internal
        owner: { qa_team: null }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.input.transaction_schema.merchant_ids
        name: transaction_schema_merchant_ids
        type: dataset
        category: input
        path: reference/layer1/transaction_schema_merchant_ids/{version}/
        schema: schemas.ingress.layer1.yaml#/merchant_ids
        semver: '{semver}'
        version: '{version}'
        digest:
        dependencies: []
        source: external
        owner: { owner_team: null }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.1A.output.outlet_catalogue
        name: outlet_catalogue
        type: dataset
        category: output
        path: data/layer1/1A/outlet_catalogue/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
        schema: schemas.1A.yaml#/egress/outlet_catalogue
        semver: '{semver}'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { owner_team: null }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.1B.egress.site_locations
        name: site_locations
        type: dataset
        category: output
        path: data/layer1/1B/site_locations/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
        schema: schemas.1B.yaml#/egress/site_locations
        semver: '{semver}'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { owner_team: mlr-1b-core }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.2A.egress.site_timezones
        name: site_timezones
        type: dataset
        category: output
        path: data/layer1/2A/site_timezones/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
        schema: schemas.2A.yaml#/egress/site_timezones
        semver: '{semver}'
        version: '{seed}.{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { owner_team: mlr-2a-core }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.2A.cache.tz_timetable
        name: tz_timetable_cache
        type: dataset
        category: cache
        path: data/layer1/2A/tz_timetable_cache/manifest_fingerprint={manifest_fingerprint}/
        schema: schemas.2A.yaml#/cache/tz_timetable_cache
        semver: '{semver}'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { owner_team: mlr-2a-core }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.2B.s1.site_weights
        name: s1_site_weights
        type: dataset
        category: plan
        path: data/layer1/2B/s1_site_weights/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
        schema: schemas.2B.yaml#/plan/s1_site_weights
        semver: '{semver}'
        version: '{seed}.{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { owner_team: l1-2b-core }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.2B.s2.alias_index
        name: s2_alias_index
        type: dataset
        category: plan
        path: data/layer1/2B/s2_alias_index/seed={seed}/manifest_fingerprint={manifest_fingerprint}/index.json
        schema: schemas.2B.yaml#/plan/s2_alias_index
        semver: '{semver}'
        version: '{seed}.{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { owner_team: l1-2b-core }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.2B.s2.alias_blob
        name: s2_alias_blob
        type: dataset
        category: plan
        path: data/layer1/2B/s2_alias_blob/seed={seed}/manifest_fingerprint={manifest_fingerprint}/alias.bin
        schema: schemas.2B.yaml#/binary/s2_alias_blob
        semver: '{semver}'
        version: '{seed}.{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { owner_team: l1-2b-core }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.2B.s3.day_effects
        name: s3_day_effects
        type: dataset
        category: plan
        path: data/layer1/2B/s3_day_effects/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
        schema: schemas.2B.yaml#/plan/s3_day_effects
        semver: '{semver}'
        version: '{seed}.{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { owner_team: l1-2b-core }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.2B.s4.group_weights
        name: s4_group_weights
        type: dataset
        category: plan
        path: data/layer1/2B/s4_group_weights/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
        schema: schemas.2B.yaml#/plan/s4_group_weights
        semver: '{semver}'
        version: '{seed}.{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { owner_team: l1-2b-core }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.3A.zone_alloc
        name: zone_alloc
        type: dataset
        category: egress
        path: data/layer1/3A/zone_alloc/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
        schema: schemas.3A.yaml#/egress/zone_alloc
        semver: 1.0.0
        version: '{seed}.{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { owner_team: mlr-3a-core }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.3A.zone_alloc_universe_hash
        name: zone_alloc_universe_hash
        type: dataset
        category: validation
        path: data/layer1/3A/zone_universe/manifest_fingerprint={manifest_fingerprint}/zone_alloc_universe_hash.json
        schema: schemas.3A.yaml#/validation/zone_alloc_universe_hash
        semver: 1.0.0
        version: '{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { owner_team: mlr-3a-core }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.3B.s1.virtual_classification
        name: virtual_classification_3B
        type: dataset
        category: plan
        path: data/layer1/3B/virtual_classification/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
        schema: schemas.3B.yaml#/plan/virtual_classification_3B
        semver: '{semver}'
        version: '{seed}.{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { platform_team: null }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.3B.s1.virtual_settlement
        name: virtual_settlement_3B
        type: dataset
        category: plan
        path: data/layer1/3B/virtual_settlement/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
        schema: schemas.3B.yaml#/plan/virtual_settlement_3B
        semver: '{semver}'
        version: '{seed}.{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { platform_team: null }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.3B.virtual.routing_policy
        name: virtual_routing_policy_3B
        type: dataset
        category: virtual_routing
        path: data/layer1/3B/virtual_routing_policy/manifest_fingerprint={manifest_fingerprint}/virtual_routing_policy_3B.json
        schema: schemas.3B.yaml#/egress/virtual_routing_policy_3B
        semver: '{semver}'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { platform_team: null }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.3B.virtual.validation_contract
        name: virtual_validation_contract_3B
        type: dataset
        category: validation
        path: data/layer1/3B/virtual_validation_contract/manifest_fingerprint={manifest_fingerprint}/virtual_validation_contract_3B.parquet
        schema: schemas.3B.yaml#/egress/virtual_validation_contract_3B
        semver: '{semver}'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { qa_team: null }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.3B.s2.edge_catalogue
        name: edge_catalogue_3B
        type: dataset
        category: plan
        path: data/layer1/3B/edge_catalogue/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
        schema: schemas.3B.yaml#/plan/edge_catalogue_3B
        semver: '{semver}'
        version: '{seed}.{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { platform_team: null }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.3B.s3.edge_alias_index
        name: edge_alias_index_3B
        type: dataset
        category: plan
        path: data/layer1/3B/edge_alias_index/seed={seed}/manifest_fingerprint={manifest_fingerprint}/edge_alias_index_3B.parquet
        schema: schemas.3B.yaml#/plan/edge_alias_index_3B
        semver: '{semver}'
        version: '{seed}.{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { platform_team: null }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.3B.s3.edge_alias_blob
        name: edge_alias_blob_3B
        type: dataset
        category: plan
        path: data/layer1/3B/edge_alias_blob/seed={seed}/manifest_fingerprint={manifest_fingerprint}/edge_alias_blob_3B.bin
        schema: schemas.3B.yaml#/binary/edge_alias_blob_3B
        semver: '{semver}'
        version: '{seed}.{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { platform_team: null }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      - manifest_key: mlr.3B.validation.edge_universe_hash
        name: edge_universe_hash_3B
        type: dataset
        category: validation
        path: data/layer1/3B/edge_universe_hash/manifest_fingerprint={manifest_fingerprint}/edge_universe_hash_3B.json
        schema: schemas.3B.yaml#/validation/edge_universe_hash_3B
        semver: '{semver}'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: []
        source: internal
        owner: { platform_team: null }
        last_updated:
        environment: [runtime]
        cross_layer: true
        notes:

      # 5A - policy & scenario configs (inputs, sealed by S0)
      - manifest_key: mlr.5A.policy.merchant_class
        name: merchant_class_policy_5A
        type: dataset
        category: policy
        path: config/layer2/5A/policy/merchant_class_policy_5A.v1.yaml
        schema: schemas.5A.yaml#/policy/merchant_class_policy_5A
        semver: '1.0.0'
        version: 'v1'
        digest:
        dependencies: []
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: false
        notes:

      - manifest_key: mlr.5A.policy.demand_scale
        name: demand_scale_policy_5A
        type: dataset
        category: policy
        path: config/layer2/5A/policy/demand_scale_policy_5A.v1.yaml
        schema: schemas.5A.yaml#/policy/demand_scale_policy_5A
        semver: '1.0.0'
        version: 'v1'
        digest:
        dependencies: []
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: false
        notes:

      - manifest_key: mlr.5A.policy.baseline_intensity
        name: baseline_intensity_policy_5A
        type: dataset
        category: policy
        path: config/layer2/5A/policy/baseline_intensity_policy_5A.v1.yaml
        schema: schemas.5A.yaml#/policy/baseline_intensity_policy_5A
        semver: '1.0.0'
        version: 'v1'
        digest:
        dependencies: []
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: false
        notes:

      - manifest_key: mlr.5A.policy.shape_library
        name: shape_library_5A
        type: dataset
        category: policy
        path: config/layer2/5A/policy/shape_library_5A.v1.yaml
        schema: schemas.5A.yaml#/policy/shape_library_5A
        semver: '1.0.0'
        version: 'v1'
        digest:
        dependencies: []
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: false
        notes:

      - manifest_key: mlr.5A.policy.shape_time_grid
        name: shape_time_grid_policy_5A
        type: dataset
        category: policy
        path: config/layer2/5A/policy/shape_time_grid_policy_5A.v1.yaml
        schema: schemas.5A.yaml#/policy/shape_time_grid_policy_5A
        semver: '1.0.0'
        version: 'v1'
        digest:
        dependencies: []
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: false
        notes:

      - manifest_key: mlr.5A.policy.zone_shape_modifiers
        name: zone_shape_modifiers_5A
        type: dataset
        category: policy
        path: config/layer2/5A/policy/zone_shape_modifiers_5A.v1.yaml
        schema: schemas.5A.yaml#/policy/zone_shape_modifiers_5A
        semver: '1.0.0'
        version: 'v1'
        digest:
        dependencies: []
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: false
        notes: optional

      - manifest_key: mlr.5A.scenario.horizon_config
        name: scenario_horizon_config_5A
        type: dataset
        category: config
        path: config/layer2/5A/scenario/scenario_horizon_config_5A.v1.yaml
        schema: schemas.5A.yaml#/scenario/scenario_horizon_config_5A
        semver: '1.0.0'
        version: 'v1'
        digest:
        dependencies: []
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: false
        notes:

      - manifest_key: mlr.5A.scenario.metadata
        name: scenario_metadata
        type: dataset
        category: config
        path: config/layer2/5A/scenario/scenario_metadata.v1.yaml
        schema: schemas.5A.yaml#/scenario/scenario_metadata
        semver: '1.0.0'
        version: 'v1'
        digest:
        dependencies: []
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: false
        notes:

      - manifest_key: mlr.5A.scenario.calendar
        name: scenario_calendar_5A
        type: dataset
        category: config
        path: data/layer2/5A/scenario_calendar/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/scenario_calendar_5A.parquet
        schema: schemas.5A.yaml#/scenario/scenario_calendar_5A
        semver: '1.0.0'
        version: '{manifest_fingerprint}.{scenario_id}'
        digest:
        dependencies: []
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: false
        notes:

      - manifest_key: mlr.5A.scenario.overlay_ordering_policy
        name: overlay_ordering_policy_5A
        type: dataset
        category: policy
        path: config/layer2/5A/scenario/overlay_ordering_policy_5A.v1.yaml
        schema: schemas.5A.yaml#/policy/overlay_ordering_policy_5A
        semver: '1.0.0'
        version: 'v1'
        digest:
        dependencies: []
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: false
        notes: optional

      - manifest_key: mlr.5A.scenario.overlay_policy
        name: scenario_overlay_policy_5A
        type: dataset
        category: policy
        path: config/layer2/5A/scenario/scenario_overlay_policy_5A.v1.yaml
        schema: schemas.5A.yaml#/scenario/scenario_overlay_policy_5A
        semver: '1.0.0'
        version: 'v1'
        digest:
        dependencies: []
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: false
        notes:

      - manifest_key: mlr.5A.scenario.overlay_validation_policy
        name: scenario_overlay_validation_policy_5A
        type: dataset
        category: policy
        path: config/layer2/5A/scenario/scenario_overlay_validation_policy_5A.v1.yaml
        schema: schemas.5A.yaml#/scenario/scenario_overlay_validation_policy_5A
        semver: '1.0.0'
        version: 'v1'
        digest:
        dependencies: []
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: false
        notes: optional

      - manifest_key: mlr.5A.validation.validation_policy
        name: validation_policy_5A
        type: dataset
        category: policy
        path: config/layer2/5A/validation/validation_policy_5A.v1.yaml
        schema: schemas.5A.yaml#/validation/validation_policy_5A
        semver: '1.0.0'
        version: 'v1'
        digest:
        dependencies: []
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: false
        notes: optional

      - manifest_key: mlr.5A.validation.spec_compatibility
        name: spec_compatibility_config_5A
        type: dataset
        category: config
        path: config/layer2/5A/validation/spec_compatibility_config_5A.v1.yaml
        schema: schemas.5A.yaml#/validation/spec_compatibility_config_5A
        semver: '1.0.0'
        version: 'v1'
        digest:
        dependencies: []
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: false
        notes: optional

      # S1 - classification
      - manifest_key: mlr.5A.model.merchant_zone_profile
        name: merchant_zone_profile_5A
        type: dataset
        category: model
        path: data/layer2/5A/merchant_zone_profile/manifest_fingerprint={manifest_fingerprint}/merchant_zone_profile_5A.parquet
        schema: schemas.5A.yaml#/model/merchant_zone_profile_5A
        semver: '1.0.0'
        version: '{manifest_fingerprint}'
        digest:
        dependencies:
          - sealed_inputs_5A
          - s0_gate_receipt_5A
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: true
        notes:

      - manifest_key: mlr.5A.model.merchant_class_profile
        name: merchant_class_profile_5A
        type: dataset
        category: model
        path: data/layer2/5A/merchant_class_profile/manifest_fingerprint={manifest_fingerprint}/merchant_class_profile_5A.parquet
        schema: schemas.5A.yaml#/model/merchant_class_profile_5A
        semver: '1.0.0'
        version: '{manifest_fingerprint}'
        digest:
        dependencies:
          - merchant_zone_profile_5A
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: true
        notes: optional

      # S2 — weekly shape library
      - manifest_key: mlr.5A.model.shape_grid_definition
        name: shape_grid_definition_5A
        type: dataset
        category: model_config
        path: data/layer2/5A/shape_grid_definition/parameter_hash={parameter_hash}/scenario_id={scenario_id}/shape_grid_definition_5A.parquet
        schema: schemas.5A.yaml#/model/shape_grid_definition_5A
        semver: '1.0.0'
        version: '{parameter_hash}.{scenario_id}'
        digest:
        dependencies: []
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: false
        notes:

      - manifest_key: mlr.5A.model.class_zone_shape
        name: class_zone_shape_5A
        type: dataset
        category: model
        path: data/layer2/5A/class_zone_shape/parameter_hash={parameter_hash}/scenario_id={scenario_id}/class_zone_shape_5A.parquet
        schema: schemas.5A.yaml#/model/class_zone_shape_5A
        semver: '1.0.0'
        version: '{parameter_hash}.{scenario_id}'
        digest:
        dependencies:
          - merchant_zone_profile_5A
          - shape_grid_definition_5A
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: true
        notes:

      - manifest_key: mlr.5A.model.class_shape_catalogue
        name: class_shape_catalogue_5A
        type: dataset
        category: model
        path: data/layer2/5A/class_shape_catalogue/parameter_hash={parameter_hash}/scenario_id={scenario_id}/class_shape_catalogue_5A.parquet
        schema: schemas.5A.yaml#/model/class_shape_catalogue_5A
        semver: '1.0.0'
        version: '{parameter_hash}.{scenario_id}'
        digest:
        dependencies:
          - shape_grid_definition_5A
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: false
        notes: optional

      # S3 — baselines
      - manifest_key: mlr.5A.model.merchant_zone_baseline_local
        name: merchant_zone_baseline_local_5A
        type: dataset
        category: model
        path: data/layer2/5A/merchant_zone_baseline_local/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/merchant_zone_baseline_local_5A.parquet
        schema: schemas.5A.yaml#/model/merchant_zone_baseline_local_5A
        semver: '1.0.0'
        version: '{manifest_fingerprint}.{scenario_id}'
        digest:
        dependencies:
          - merchant_zone_profile_5A
          - class_zone_shape_5A
          - shape_grid_definition_5A
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: true
        notes:

      - manifest_key: mlr.5A.model.class_zone_baseline_local
        name: class_zone_baseline_local_5A
        type: dataset
        category: model
        path: data/layer2/5A/class_zone_baseline_local/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/class_zone_baseline_local_5A.parquet
        schema: schemas.5A.yaml#/model/class_zone_baseline_local_5A
        semver: '1.0.0'
        version: '{manifest_fingerprint}.{scenario_id}'
        digest:
        dependencies:
          - merchant_zone_baseline_local_5A
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: true
        notes: optional

      - manifest_key: mlr.5A.model.merchant_zone_baseline_utc
        name: merchant_zone_baseline_utc_5A
        type: dataset
        category: model
        path: data/layer2/5A/merchant_zone_baseline_utc/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/merchant_zone_baseline_utc_5A.parquet
        schema: schemas.5A.yaml#/model/merchant_zone_baseline_utc_5A
        semver: '1.0.0'
        version: '{manifest_fingerprint}.{scenario_id}'
        digest:
        dependencies:
          - merchant_zone_baseline_local_5A
          - mlr.2A.egress.site_timezones
          - mlr.2A.egress.tz_timetable_cache
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: true
        notes: optional

      # S4 — scenario overlays
      - manifest_key: mlr.5A.model.merchant_zone_scenario_local
        name: merchant_zone_scenario_local_5A
        type: dataset
        category: model
        path: data/layer2/5A/merchant_zone_scenario_local/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/merchant_zone_scenario_local_5A.parquet
        schema: schemas.5A.yaml#/model/merchant_zone_scenario_local_5A
        semver: '1.0.0'
        version: '{manifest_fingerprint}.{scenario_id}'
        digest:
        dependencies:
          - merchant_zone_baseline_local_5A
          - scenario_manifest_5A
          - scenario_calendar_5A
          - scenario_overlay_policy_5A
          - scenario_horizon_config_5A
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: true
        notes:

      - manifest_key: mlr.5A.model.merchant_zone_overlay_factors
        name: merchant_zone_overlay_factors_5A
        type: dataset
        category: model
        path: data/layer2/5A/merchant_zone_overlay_factors/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/merchant_zone_overlay_factors_5A.parquet
        schema: schemas.5A.yaml#/model/merchant_zone_overlay_factors_5A
        semver: '1.0.0'
        version: '{manifest_fingerprint}.{scenario_id}'
        digest:
        dependencies:
          - merchant_zone_baseline_local_5A
          - scenario_calendar_5A
          - scenario_overlay_policy_5A
          - scenario_horizon_config_5A
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: true
        notes: optional

      - manifest_key: mlr.5A.model.merchant_zone_scenario_utc
        name: merchant_zone_scenario_utc_5A
        type: dataset
        category: model
        path: data/layer2/5A/merchant_zone_scenario_utc/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/merchant_zone_scenario_utc_5A.parquet
        schema: schemas.5A.yaml#/model/merchant_zone_scenario_utc_5A
        semver: '1.0.0'
        version: '{manifest_fingerprint}.{scenario_id}'
        digest:
        dependencies:
          - merchant_zone_scenario_local_5A
          - mlr.2A.egress.site_timezones
          - mlr.2A.egress.tz_timetable_cache
          - scenario_horizon_config_5A
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: true
        notes: optional

      # S5 - validation bundle & flag
      - manifest_key: mlr.5A.validation.bundle
        name: validation_bundle_5A
        type: dataset
        category: validation
        path: data/layer2/5A/validation/manifest_fingerprint={manifest_fingerprint}/
        schema: schemas.layer2.yaml#/validation/validation_bundle_index_5A
        semver: '1.0.0'
        version: '{manifest_fingerprint}'
        digest:
        dependencies:
          - s0_gate_receipt_5A
          - sealed_inputs_5A
          - merchant_zone_profile_5A
          - shape_grid_definition_5A
          - class_zone_shape_5A
          - merchant_zone_baseline_local_5A
          - merchant_zone_scenario_local_5A
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: true
        notes:

      - manifest_key: mlr.5A.validation.bundle_index
        name: validation_bundle_index_5A
        type: dataset
        category: validation
        path: data/layer2/5A/validation/manifest_fingerprint={manifest_fingerprint}/validation_bundle_index_5A.json
        schema: schemas.layer2.yaml#/validation/validation_bundle_index_5A
        semver: '1.0.0'
        version: '{manifest_fingerprint}'
        digest:
        dependencies:
          - mlr.5A.validation.bundle
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: true
        notes:

      - manifest_key: mlr.5A.validation.passed
        name: validation_passed_flag_5A
        type: dataset
        category: validation
        path: data/layer2/5A/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
        schema: schemas.layer2.yaml#/validation/passed_flag_5A
        semver: '1.0.0'
        version: '{manifest_fingerprint}'
        digest:
        dependencies:
          - mlr.5A.validation.bundle
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: true
        notes:

      - manifest_key: mlr.5A.validation.report
        name: validation_report_5A
        type: dataset
        category: validation
        path: data/layer2/5A/validation/manifest_fingerprint={manifest_fingerprint}/reports/validation_report_5A.json
        schema: schemas.layer2.yaml#/validation/validation_report_5A
        semver: '1.0.0'
        version: '{manifest_fingerprint}'
        digest:
        dependencies:
          - mlr.5A.validation.bundle
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: true
        notes:

      - manifest_key: mlr.5A.validation.issues
        name: validation_issue_table_5A
        type: dataset
        category: validation
        path: data/layer2/5A/validation/manifest_fingerprint={manifest_fingerprint}/issues/validation_issue_table_5A.parquet
        schema: schemas.layer2.yaml#/validation/validation_issue_table_5A
        semver: '1.0.0'
        version: '{manifest_fingerprint}'
        digest:
        dependencies:
          - mlr.5A.validation.bundle
        source: internal
        owner: { team: data-engineering }
        last_updated:
        environment: [ci, dev, staging, prod]
        cross_layer: true
        notes: optional

      # Run reports
      - manifest_key: mlr.5A.run_report.segment_state_runs
        name: segment_state_runs
        type: dataset
        category: report
        path: reports/layer2/segment_state_runs/segment=5A/utc_day={utc_day}/segment_state_runs.jsonl
        schema: schemas.layer2.yaml#/run_report/segment_state_run
        semver: '1.0.0'
        version: latest
        digest:
        dependencies: []
        source: internal
        owner: { ops_team }
        last_updated:
        environment: [runtime]
        cross_layer: false
        notes:

      - manifest_key: mlr.5A.run_report.s1
        name: s1_run_report_5A
        type: dataset
        category: report
        path: reports/layer2/5A/state=S1/manifest_fingerprint={manifest_fingerprint}/run_report.json
        schema: schemas.layer2.yaml#/run_report/segment_state_run
        semver: '1.0.0'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: [merchant_zone_profile_5A]
        source: internal
        owner: { ops_team }
        last_updated:
        environment: [runtime]
        cross_layer: false
        notes:

      - manifest_key: mlr.5A.run_report.s2
        name: s2_run_report_5A
        type: dataset
        category: report
        path: reports/layer2/5A/state=S2/manifest_fingerprint={manifest_fingerprint}/run_report.json
        schema: schemas.layer2.yaml#/run_report/segment_state_run
        semver: '1.0.0'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: [class_zone_shape_5A]
        source: internal
        owner: { ops_team }
        last_updated:
        environment: [runtime]
        cross_layer: false
        notes:

      - manifest_key: mlr.5A.run_report.s3
        name: s3_run_report_5A
        type: dataset
        category: report
        path: reports/layer2/5A/state=S3/manifest_fingerprint={manifest_fingerprint}/run_report.json
        schema: schemas.layer2.yaml#/run_report/segment_state_run
        semver: '1.0.0'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: [merchant_zone_baseline_local_5A]
        source: internal
        owner: { ops_team }
        last_updated:
        environment: [runtime]
        cross_layer: false
        notes:

      - manifest_key: mlr.5A.run_report.s4
        name: s4_run_report_5A
        type: dataset
        category: report
        path: reports/layer2/5A/state=S4/manifest_fingerprint={manifest_fingerprint}/run_report.json
        schema: schemas.layer2.yaml#/run_report/segment_state_run
        semver: '1.0.0'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: [merchant_zone_scenario_local_5A]
        source: internal
        owner: { ops_team }
        last_updated:
        environment: [runtime]
        cross_layer: false
        notes:

      - manifest_key: mlr.5A.run_report.s5
        name: s5_run_report_5A
        type: dataset
        category: report
        path: reports/layer2/5A/state=S5/manifest_fingerprint={manifest_fingerprint}/run_report.json
        schema: schemas.layer2.yaml#/run_report/segment_state_run
        semver: '1.0.0'
        version: '{manifest_fingerprint}'
        digest:
        dependencies: [validation_bundle_5A]
        source: internal
        owner: { ops_team }
        last_updated:
        environment: [runtime]
        cross_layer: false
        notes:
