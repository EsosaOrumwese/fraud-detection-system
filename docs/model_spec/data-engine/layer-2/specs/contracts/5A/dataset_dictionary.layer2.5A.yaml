# dataset_dictionary.layer2.5A.yaml — layer-2 Segment 5A contracts
version: '1.0.0'

lifecycle:
  phase: planning
  last_reviewed:
  approver:

ci_policy:
  allow_placeholders: false
  placeholder_markers: [TBD]
  block_on_phase: [beta, stable]

layer:
  id: layer2
  name: Layer-2 (Segment 5A)

reference_data:
  # Cross-layer inputs sealed by 5A.S0
  - id: validation_bundle_1A
    status: approved
    owner_subsegment: 1A
    description: Validator outputs for 1A (metrics, plots, diffs).
    version: '{manifest_fingerprint}'
    format: folder
    path: data/layer1/1A/validation/manifest_fingerprint={manifest_fingerprint}/
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.1A.yaml#/validation/validation_bundle
    lineage:
      produced_by: 1A.validation
      consumed_by: [release, 5A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: validation_passed_flag_1A
    status: approved
    owner_subsegment: 1A
    description: HashGate PASS flag for the 1A validation bundle.
    version: '{manifest_fingerprint}'
    format: text
    path: data/layer1/1A/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.layer1.yaml#/validation/passed_flag
    lineage:
      produced_by: 1A.validation
      consumed_by: [release, 5A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: validation_bundle_1B
    status: approved
    owner_subsegment: 1B
    description: Validation bundle for a 1B publish (one per manifest_fingerprint).
    version: '{manifest_fingerprint}'
    format: files
    path: data/layer1/1B/validation/manifest_fingerprint={manifest_fingerprint}/
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.1B.yaml#/validation/validation_bundle_1B
    lineage:
      produced_by: 1B.S9
      consumed_by: [1B, 5A]
      final_in_layer: false
    retention_days: 1095
    pii: false
    licence: Proprietary-Internal

  - id: validation_passed_flag_1B
    status: approved
    owner_subsegment: 1B
    description: PASS gate flag; equals SHA-256 of the bundle per S9 hashing rule.
    version: '{manifest_fingerprint}'
    format: text
    path: data/layer1/1B/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.1B.yaml#/validation/passed_flag
    lineage:
      produced_by: 1B.S9
      consumed_by: [1B, 5A]
      final_in_layer: false
    retention_days: 1095
    pii: false
    licence: Proprietary-Internal

  - id: validation_bundle_2A
    status: approved
    owner_subsegment: 2A
    description: Validation bundle for 2A publish (one per manifest_fingerprint).
    version: '{manifest_fingerprint}'
    format: files
    path: data/layer1/2A/validation/manifest_fingerprint={manifest_fingerprint}/
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.2A.yaml#/validation/validation_bundle_2A
    lineage:
      produced_by: 2A.S5
      consumed_by: [2B, 3A, 3B, 5A]
      final_in_layer: false
    retention_days: 1095
    pii: false
    licence: Proprietary-Internal

  - id: validation_passed_flag_2A
    status: approved
    owner_subsegment: 2A
    description: PASS flag; equals SHA-256 of bundle per index+ASCII-lex law.
    version: '{manifest_fingerprint}'
    format: text
    path: data/layer1/2A/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.2A.yaml#/validation/passed_flag
    lineage:
      produced_by: 2A.S5
      consumed_by: [2B, 3A, 3B, 5A]
      final_in_layer: false
    retention_days: 1095
    pii: false
    licence: Proprietary-Internal

  - id: validation_bundle_2B
    status: approved
    owner_subsegment: 2B
    description: Fingerprint-scoped PASS bundle index for Segment 2B.
    version: '{manifest_fingerprint}'
    format: json
    path: data/layer1/2B/validation/manifest_fingerprint={manifest_fingerprint}/index.json
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.layer1.yaml#/validation/validation_bundle/index_schema
    lineage:
      produced_by: 2B.S8
      consumed_by: [5A]
      final_in_layer: true
    retention_days: 1095
    pii: false
    licence: Proprietary-Internal

  - id: validation_passed_flag_2B
    status: approved
    owner_subsegment: 2B
    description: Companion flag containing the SHA-256 digest of the 2B validation bundle.
    version: '{manifest_fingerprint}'
    format: text
    path: data/layer1/2B/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.1B.yaml#/validation/passed_flag
    lineage:
      produced_by: 2B.S8
      consumed_by: [5A]
      final_in_layer: true
    retention_days: 1095
    pii: false
    licence: Proprietary-Internal

  - id: validation_bundle_3A
    status: draft
    owner_subsegment: 3A
    description: Fingerprint-scoped validation bundle for Segment 3A.
    version: '{manifest_fingerprint}'
    format: dir
    path: data/layer1/3A/validation/manifest_fingerprint={manifest_fingerprint}/
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.layer1.yaml#/validation/validation_bundle_index_3A
    lineage:
      produced_by: 3A.S7
      consumed_by: [orchestrator, cross_segment_validation, 5A]
      final_in_layer: true
    retention_days: 1095
    pii: false
    licence: Proprietary-Internal

  - id: validation_passed_flag_3A
    status: draft
    owner_subsegment: 3A
    description: HashGate PASS flag accompanying the 3A validation bundle.
    version: '{manifest_fingerprint}'
    format: text
    path: data/layer1/3A/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.layer1.yaml#/validation/passed_flag_3A
    lineage:
      produced_by: 3A.S7
      consumed_by: [orchestrator, segment_readers, 5A]
      final_in_layer: true
    retention_days: 1095
    pii: false
    licence: Proprietary-Internal

  - id: validation_bundle_3B
    status: draft
    owner_subsegment: 3B
    description: Directory artefact containing manifest, digests and structural or RNG evidence.
    version: '{manifest_fingerprint}'
    format: folder
    path: data/layer1/3B/validation/manifest_fingerprint={manifest_fingerprint}/
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.layer1.yaml#/validation/validation_bundle_index_3B
    lineage:
      produced_by: 3B.S5
      consumed_by: [HashGate, downstream segments, 5A]
      final_in_layer: false
    retention_days: 1095
    pii: false
    licence: Proprietary-Internal

  - id: validation_passed_flag_3B
    status: draft
    owner_subsegment: 3B
    description: ASCII _passed.flag storing the hash of the validation bundle.
    version: '{manifest_fingerprint}'
    format: text
    path: data/layer1/3B/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.layer1.yaml#/validation/passed_flag_3B
    lineage:
      produced_by: 3B.S5
      consumed_by: [HashGate, downstream segments, 5A]
      final_in_layer: false
    retention_days: 1095
    pii: false
    licence: Proprietary-Internal

  - id: outlet_catalogue
    status: approved
    owner_subsegment: 1A
    description: "Immutable outlet stubs per merchant x legal_country. Does NOT encode cross-country order; consumers MUST join `s3_candidate_set.candidate_rank` for that. Consumers MUST only read after verifying `_passed.flag` matches SHA256(`validation_bundle_1A`) for the same manifest_fingerprint (see S9.9)."
    version: '{manifest_fingerprint}'
    format: parquet
    path: data/layer1/1A/outlet_catalogue/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
    partitioning: [seed, manifest_fingerprint]
    ordering: [merchant_id, legal_country_iso, site_order]
    schema_ref: schemas.1A.yaml#/egress/outlet_catalogue
    lineage:
      produced_by: 1A
      consumed_by: [1B, 5A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: site_locations
    status: approved
    owner_subsegment: 1B
    description: Site locations with absolute lat/lon (post jitter + geometry stitch); partitioned by seed/manifest_fingerprint.
    version: '{seed}.{manifest_fingerprint}'
    format: parquet
    path: data/layer1/1B/site_locations/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
    partitioning: [seed, manifest_fingerprint]
    ordering: [merchant_id, legal_country_iso, site_order]
    schema_ref: schemas.1B.yaml#/egress/site_locations
    lineage:
      produced_by: 1B.S8
      consumed_by: [1B, 1A, 5A]
      final_in_layer: true
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: site_timezones
    status: approved
    owner_subsegment: 2A
    description: Final per-site IANA tzid with provenance; order-free egress.
    version: '{seed}.{manifest_fingerprint}'
    format: parquet
    path: data/layer1/2A/site_timezones/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
    partitioning: [seed, manifest_fingerprint]
    ordering: [merchant_id, legal_country_iso, site_order]
    schema_ref: schemas.2A.yaml#/egress/site_timezones
    lineage:
      produced_by: 2A.S2
      consumed_by: [2A, 2B, 5A]
      final_in_layer: true
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: tz_timetable_cache
    status: approved
    owner_subsegment: 2A
    description: Fingerprint-scoped cache manifest for tz transitions.
    version: '{manifest_fingerprint}'
    format: files
    path: data/layer1/2A/tz_timetable_cache/manifest_fingerprint={manifest_fingerprint}/
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.2A.yaml#/cache/tz_timetable_cache
    lineage:
      produced_by: 2A.S3
      consumed_by: [2A, 5A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: s1_site_weights
    status: approved
    owner_subsegment: 2B
    description: Frozen per-site probability law emitted by S1 for alias construction.
    version: '{seed}.{manifest_fingerprint}'
    format: parquet
    path: data/layer1/2B/s1_site_weights/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
    partitioning: [seed, manifest_fingerprint]
    ordering: [merchant_id, legal_country_iso, site_order]
    schema_ref: schemas.2B.yaml#/plan/s1_site_weights
    lineage:
      produced_by: 2B.S1
      consumed_by: [2B, 5A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: s2_alias_index
    status: approved
    owner_subsegment: 2B
    description: JSON index describing alias blob slices, offsets, and digests.
    version: '{seed}.{manifest_fingerprint}'
    format: json
    path: data/layer1/2B/s2_alias_index/seed={seed}/manifest_fingerprint={manifest_fingerprint}/index.json
    partitioning: [seed, manifest_fingerprint]
    ordering: [merchant_id]
    schema_ref: schemas.2B.yaml#/plan/s2_alias_index
    lineage:
      produced_by: 2B.S2
      consumed_by: [2B, 5A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: s2_alias_blob
    status: approved
    owner_subsegment: 2B
    description: Contiguous binary blob containing per-merchant alias tables.
    version: '{seed}.{manifest_fingerprint}'
    format: binary
    path: data/layer1/2B/s2_alias_blob/seed={seed}/manifest_fingerprint={manifest_fingerprint}/alias.bin
    partitioning: [seed, manifest_fingerprint]
    ordering: []
    schema_ref: schemas.2B.yaml#/binary/s2_alias_blob
    lineage:
      produced_by: 2B.S2
      consumed_by: [2B, 5A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: s3_day_effects
    status: approved
    owner_subsegment: 2B
    description: Per-merchant x UTC-day x tz-group gamma multipliers for day-scale co-movement.
    version: '{seed}.{manifest_fingerprint}'
    format: parquet
    path: data/layer1/2B/s3_day_effects/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
    partitioning: [seed, manifest_fingerprint]
    ordering: [merchant_id, utc_day, tz_group_id]
    schema_ref: schemas.2B.yaml#/plan/s3_day_effects
    lineage:
      produced_by: 2B.S3
      consumed_by: [2B, 5A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: s4_group_weights
    status: approved
    owner_subsegment: 2B
    description: Per-merchant x UTC-day x tz-group mix used to pick tz-group prior to static alias.
    version: '{seed}.{manifest_fingerprint}'
    format: parquet
    path: data/layer1/2B/s4_group_weights/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
    partitioning: [seed, manifest_fingerprint]
    ordering: [merchant_id, utc_day, tz_group_id]
    schema_ref: schemas.2B.yaml#/plan/s4_group_weights
    lineage:
      produced_by: 2B.S4
      consumed_by: [2B, 5A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: zone_alloc
    status: draft
    owner_subsegment: 3A
    description: Cross-layer zone allocation egress for routing segment.
    version: '{seed}.{manifest_fingerprint}'
    format: parquet
    path: data/layer1/3A/zone_alloc/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
    partitioning: [seed, manifest_fingerprint]
    ordering: [merchant_id, legal_country_iso, tzid]
    schema_ref: schemas.3A.yaml#/egress/zone_alloc
    lineage:
      produced_by: 3A.S5
      consumed_by: [2B, validation, cross_segment_validation, 5A]
      final_in_layer: true
    retention_days: 1095
    pii: false
    licence: Proprietary-Internal

  - id: zone_alloc_universe_hash
    status: draft
    owner_subsegment: 3A
    description: Digest summary tying priors/policies to the published zone allocation.
    version: '{manifest_fingerprint}'
    format: json
    path: data/layer1/3A/zone_universe/manifest_fingerprint={manifest_fingerprint}/zone_alloc_universe_hash.json
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.3A.yaml#/validation/zone_alloc_universe_hash
    lineage:
      produced_by: 3A.S5
      consumed_by: [2B, validation, 5A]
      final_in_layer: false
    retention_days: 1095
    pii: false
    licence: Proprietary-Internal

  - id: virtual_classification_3B
    status: draft
    owner_subsegment: 3B
    description: Merchant-level classification surface with closed vocabulary reason codes.
    version: '{seed}.{manifest_fingerprint}'
    format: parquet
    path: data/layer1/3B/virtual_classification/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
    partitioning: [seed, manifest_fingerprint]
    ordering: [merchant_id]
    schema_ref: schemas.3B.yaml#/plan/virtual_classification_3B
    lineage:
      produced_by: 3B.S1
      consumed_by: [3B.S2, 3B.S3, 3B.S4, 3B.S5, routing_virtual, 5A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: virtual_settlement_3B
    status: draft
    owner_subsegment: 3B
    description: One settlement node per virtual merchant with tzid semantics and evidence URLs.
    version: '{seed}.{manifest_fingerprint}'
    format: parquet
    path: data/layer1/3B/virtual_settlement/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
    partitioning: [seed, manifest_fingerprint]
    ordering: [merchant_id]
    schema_ref: schemas.3B.yaml#/plan/virtual_settlement_3B
    lineage:
      produced_by: 3B.S1
      consumed_by: [3B.S2, 3B.S4, routing_virtual, 5A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: virtual_routing_policy_3B
    status: draft
    owner_subsegment: 3B
    description: Dual-TZ routing contract that tells 2B how to consume the virtual artefacts.
    version: '{manifest_fingerprint}'
    format: json
    path: data/layer1/3B/virtual_routing_policy/manifest_fingerprint={manifest_fingerprint}/virtual_routing_policy_3B.json
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.3B.yaml#/egress/virtual_routing_policy_3B
    lineage:
      produced_by: 3B.S4
      consumed_by: [2B.routing, 3B.validation, 5A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: virtual_validation_contract_3B
    status: draft
    owner_subsegment: 3B
    description: Declarative suite of validation tests (IP mix, cut-offs, alias health) scoped to the manifest.
    version: '{manifest_fingerprint}'
    format: parquet
    path: data/layer1/3B/virtual_validation_contract/manifest_fingerprint={manifest_fingerprint}/virtual_validation_contract_3B.parquet
    partitioning: [manifest_fingerprint]
    ordering: [test_id]
    schema_ref: schemas.3B.yaml#/egress/virtual_validation_contract_3B
    lineage:
      produced_by: 3B.S4
      consumed_by: [3B.S5, 4A, 5A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: edge_catalogue_3B
    status: draft
    owner_subsegment: 3B
    description: Per-edge geometry, tz semantics and weights for all virtual merchants.
    version: '{seed}.{manifest_fingerprint}'
    format: parquet
    path: data/layer1/3B/edge_catalogue/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
    partitioning: [seed, manifest_fingerprint]
    ordering: [merchant_id, edge_id]
    schema_ref: schemas.3B.yaml#/plan/edge_catalogue_3B
    lineage:
      produced_by: 3B.S2
      consumed_by: [3B.S3, validation, 5A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: edge_alias_index_3B
    status: draft
    owner_subsegment: 3B
    description: Index and checksum metadata for locating merchant alias segments inside the blob.
    version: '{seed}.{manifest_fingerprint}'
    format: parquet
    path: data/layer1/3B/edge_alias_index/seed={seed}/manifest_fingerprint={manifest_fingerprint}/edge_alias_index_3B.parquet
    partitioning: [seed, manifest_fingerprint]
    ordering: [scope, merchant_id]
    schema_ref: schemas.3B.yaml#/plan/edge_alias_index_3B
    lineage:
      produced_by: 3B.S3
      consumed_by: [3B.S4, 2B.routing, validation, 5A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: edge_alias_blob_3B
    status: draft
    owner_subsegment: 3B
    description: Contiguous alias blob covering every virtual merchant edge distribution.
    version: '{seed}.{manifest_fingerprint}'
    format: bin
    path: data/layer1/3B/edge_alias_blob/seed={seed}/manifest_fingerprint={manifest_fingerprint}/edge_alias_blob_3B.bin
    partitioning: [seed, manifest_fingerprint]
    ordering: []
    schema_ref: schemas.3B.yaml#/binary/edge_alias_blob_header_3B
    lineage:
      produced_by: 3B.S3
      consumed_by: [3B.S4, 2B.routing, validation, 5A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: edge_universe_hash_3B
    status: draft
    owner_subsegment: 3B
    description: Fingerprint-scoped hash tying cdn weights, edge catalogue/index and alias outputs.
    version: '{manifest_fingerprint}'
    format: json
    path: data/layer1/3B/edge_universe_hash/manifest_fingerprint={manifest_fingerprint}/edge_universe_hash_3B.json
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.3B.yaml#/validation/edge_universe_hash_3B
    lineage:
      produced_by: 3B.S3
      consumed_by: [3B.S4, 3B.S5, 2B.routing, 5A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

# Internally generated datasets
datasets:
  # 5A - Layer-2 policy & scenario config artefacts (inputs, sealed by S0)
  - id: merchant_class_policy_5A
    status: required
    owner_subsegment: 5A
    description: >
      Classing policy for 5A.S1. Maps merchantxzone features to demand_class and optional demand_subclass/profile IDs.
    version: 'v1'
    format: yaml
    path: config/layer2/5A/policy/merchant_class_policy_5A.v1.yaml
    partitioning: []
    primary_key: []
    ordering: []
    schema_ref: schemas.5A.yaml#/policy/merchant_class_policy_5A
    lineage:
      produced_by: []
      consumed_by: [5A.S0, 5A.S1, 5A.S5]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: demand_scale_policy_5A
    status: required
    owner_subsegment: 5A
    description: >
      Demand scale policy for 5A.S1/S3. Maps demand_class and merchant features to baseline weekly volume / scale_factor.
    version: 'v1'
    format: yaml
    path: config/layer2/5A/policy/demand_scale_policy_5A.v1.yaml
    partitioning: []
    primary_key: []
    ordering: []
    schema_ref: schemas.5A.yaml#/policy/demand_scale_policy_5A
    lineage:
      produced_by: []
      consumed_by: [5A.S0, 5A.S1, 5A.S3, 5A.S5]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: baseline_intensity_policy_5A
    status: required
    owner_subsegment: 5A
    description: >
      Baseline intensity semantics policy for 5A.S3. Defines how S1 scale fields are interpreted (units/constraints) and any clipping/zero-handling rules.
    version: 'v1'
    format: yaml
    path: config/layer2/5A/policy/baseline_intensity_policy_5A.v1.yaml
    partitioning: []
    primary_key: []
    ordering: []
    schema_ref: schemas.5A.yaml#/policy/baseline_intensity_policy_5A
    lineage:
      produced_by: []
      consumed_by: [5A.S0, 5A.S3, 5A.S5]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: shape_library_5A
    status: required
    owner_subsegment: 5A
    description: >
      Shape library for 5A.S2. Defines unit-mass shape templates per demand_classxzonexchannel_group (grid lives in shape_time_grid_policy_5A).
    version: 'v1'
    format: yaml
    path: config/layer2/5A/policy/shape_library_5A.v1.yaml
    partitioning: []
    primary_key: []
    ordering: []
    schema_ref: schemas.5A.yaml#/policy/shape_library_5A
    lineage:
      produced_by: []
      consumed_by: [5A.S0, 5A.S2, 5A.S5]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: shape_time_grid_policy_5A
    status: required
    owner_subsegment: 5A
    description: >
      Local-week time grid policy for 5A.S2 (bucket size, buckets per week, and bucket_index mapping).
    version: 'v1'
    format: yaml
    path: config/layer2/5A/policy/shape_time_grid_policy_5A.v1.yaml
    partitioning: []
    primary_key: []
    ordering: []
    schema_ref: schemas.5A.yaml#/policy/shape_time_grid_policy_5A
    lineage:
      produced_by: []
      consumed_by: [5A.S0, 5A.S2, 5A.S5]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: zone_shape_modifiers_5A
    status: optional
    owner_subsegment: 5A
    description: >
      Optional deterministic zone-level modifiers applied after base templates and before normalization in 5A.S2.
    version: 'v1'
    format: yaml
    path: config/layer2/5A/policy/zone_shape_modifiers_5A.v1.yaml
    partitioning: []
    primary_key: []
    ordering: []
    schema_ref: schemas.5A.yaml#/policy/zone_shape_modifiers_5A
    lineage:
      produced_by: []
      consumed_by: [5A.S0, 5A.S2, 5A.S5]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: scenario_horizon_config_5A
    status: required
    owner_subsegment: 5A
    description: >
      Horizon and grid configuration for 5A.S4 scenario overlays (local and UTC).
    version: 'v1'
    format: yaml
    path: config/layer2/5A/scenario/scenario_horizon_config_5A.v1.yaml
    partitioning: []
    primary_key: []
    ordering: []
    schema_ref: schemas.5A.yaml#/scenario/scenario_horizon_config_5A
    lineage:
      produced_by: []
      consumed_by: [5A.S0, 5A.S4, 5A.S5]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: scenario_metadata
    status: required
    owner_subsegment: 5A
    description: >
      Scenario metadata pack (scenario IDs, labels, types, and horizon range) sealed by S0.
    version: 'v1'
    format: yaml
    path: config/layer2/5A/scenario/scenario_metadata.v1.yaml
    partitioning: []
    primary_key: []
    ordering: []
    schema_ref: schemas.5A.yaml#/scenario/scenario_metadata
    lineage:
      produced_by: []
      consumed_by: [5A.S0, 5A.S2, 5A.S4, 5A.S5]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: scenario_calendar_5A
    status: required
    owner_subsegment: 5A
    description: >
      Scenario calendar for 5A.S4. Defines dated events (holidays, campaigns, outages, stress scenarios) and their scope.
    version: '{manifest_fingerprint}.{scenario_id}'
    format: parquet
    path: data/layer2/5A/scenario_calendar/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/scenario_calendar_5A.parquet
    partitioning: [manifest_fingerprint, scenario_id]
    primary_key: [manifest_fingerprint, scenario_id, event_id]
    ordering: []
    schema_ref: schemas.5A.yaml#/scenario/scenario_calendar_5A
    lineage:
      produced_by: []
      consumed_by: [5A.S0, 5A.S4, 5A.S5]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: overlay_ordering_policy_5A
    status: optional
    owner_subsegment: 5A
    description: >
      Optional overlay ordering policy for 5A.S4 to define precedence between overlapping scenario events.
    version: 'v1'
    format: yaml
    path: config/layer2/5A/scenario/overlay_ordering_policy_5A.v1.yaml
    partitioning: []
    primary_key: []
    ordering: []
    schema_ref: schemas.5A.yaml#/policy/overlay_ordering_policy_5A
    lineage:
      produced_by: []
      consumed_by: [5A.S0, 5A.S4, 5A.S5]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: scenario_overlay_policy_5A
    status: required
    owner_subsegment: 5A
    description: >
      Overlay policy for 5A.S4. Maps scenario events to multiplicative factors and defines precedence/combination rules.
    version: 'v1'
    format: yaml
    path: config/layer2/5A/scenario/scenario_overlay_policy_5A.v1.yaml
    partitioning: []
    primary_key: []
    ordering: []
    schema_ref: schemas.5A.yaml#/scenario/scenario_overlay_policy_5A
    lineage:
      produced_by: []
      consumed_by: [5A.S0, 5A.S4, 5A.S5]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: scenario_overlay_validation_policy_5A
    status: optional
    owner_subsegment: 5A
    description: >
      Optional overlay validation policy for 5A.S4 to define bounds or warnings for overlay factors.
    version: 'v1'
    format: yaml
    path: config/layer2/5A/scenario/scenario_overlay_validation_policy_5A.v1.yaml
    partitioning: []
    primary_key: []
    ordering: []
    schema_ref: schemas.5A.yaml#/scenario/scenario_overlay_validation_policy_5A
    lineage:
      produced_by: []
      consumed_by: [5A.S0, 5A.S4, 5A.S5]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: validation_policy_5A
    status: optional
    owner_subsegment: 5A
    description: >
      Optional S5 validation strictness config (tolerances, warn corridors, blocking rules).
    version: 'v1'
    format: yaml
    path: config/layer2/5A/validation/validation_policy_5A.v1.yaml
    partitioning: []
    primary_key: []
    ordering: []
    schema_ref: schemas.5A.yaml#/validation/validation_policy_5A
    lineage:
      produced_by: []
      consumed_by: [5A.S0, 5A.S5]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: spec_compatibility_config_5A
    status: optional
    owner_subsegment: 5A
    description: >
      Optional S5 config declaring compatible S1-S4 spec-version combinations.
    version: 'v1'
    format: yaml
    path: config/layer2/5A/validation/spec_compatibility_config_5A.v1.yaml
    partitioning: []
    primary_key: []
    ordering: []
    schema_ref: schemas.5A.yaml#/validation/spec_compatibility_config_5A
    lineage:
      produced_by: []
      consumed_by: [5A.S0, 5A.S5]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  # S0 - gate + inputs
  - id: s0_gate_receipt_5A
    status: required
    owner_subsegment: 5A
    description: Fingerprint-scoped S0 receipt confirming upstream gates and sealed inputs.
    version: '{manifest_fingerprint}'
    format: json
    path: data/layer2/5A/s0_gate_receipt/manifest_fingerprint={manifest_fingerprint}/s0_gate_receipt_5A.json
    partitioning: [manifest_fingerprint]
    primary_key: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.5A.yaml#/validation/s0_gate_receipt_5A
    lineage:
      produced_by: [5A.S0]
      consumed_by: [5A.S1, 5A.S2, 5A.S3, 5A.S4, 5A.S5]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: sealed_inputs_5A
    status: required
    owner_subsegment: 5A
    description: Inventory of sealed artefacts 5A is allowed to read for a manifest_fingerprint.
    version: '{manifest_fingerprint}'
    format: json
    path: data/layer2/5A/sealed_inputs/manifest_fingerprint={manifest_fingerprint}/sealed_inputs_5A.json
    partitioning: [manifest_fingerprint]
    primary_key: [manifest_fingerprint, owner_segment, artifact_id]
    ordering: []
    schema_ref: schemas.5A.yaml#/validation/sealed_inputs_5A
    lineage:
      produced_by: [5A.S0]
      consumed_by: [5A.S1, 5A.S2, 5A.S3, 5A.S4, 5A.S5]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: scenario_manifest_5A
    status: optional
    owner_subsegment: 5A
    description: Scenario-level manifest projection derived from sealed inputs.
    version: '{manifest_fingerprint}'
    format: parquet
    path: data/layer2/5A/scenario_manifest/manifest_fingerprint={manifest_fingerprint}/scenario_manifest_5A.parquet
    partitioning: [manifest_fingerprint]
    primary_key: [manifest_fingerprint, scenario_id]
    ordering: []
    schema_ref: schemas.5A.yaml#/validation/scenario_manifest_5A
    lineage:
      produced_by: [5A.S0]
      consumed_by: [5A.S1, 5A.S2, 5A.S3, 5A.S4, 5A.S5]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  # S1 — demand profiles
  - id: merchant_zone_profile_5A
    status: required
    owner_subsegment: 5A
    description: Merchant×zone demand profile including class and scale for the local week.
    version: '{manifest_fingerprint}'
    format: parquet
    path: data/layer2/5A/merchant_zone_profile/manifest_fingerprint={manifest_fingerprint}/merchant_zone_profile_5A.parquet
    partitioning: [manifest_fingerprint]
    primary_key: [merchant_id, legal_country_iso, tzid]
    ordering: [merchant_id, legal_country_iso, tzid]
    schema_ref: schemas.5A.yaml#/model/merchant_zone_profile_5A
    lineage:
      produced_by: [5A.S1]
      consumed_by: [5A.S2, 5A.S3, 5A.S4, 5A.S5, 5B, 6A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: merchant_class_profile_5A
    status: optional
    owner_subsegment: 5A
    description: Merchant-level aggregate class profile derived deterministically from zone profiles.
    version: '{manifest_fingerprint}'
    format: parquet
    path: data/layer2/5A/merchant_class_profile/manifest_fingerprint={manifest_fingerprint}/merchant_class_profile_5A.parquet
    partitioning: [manifest_fingerprint]
    primary_key: [merchant_id]
    ordering: [merchant_id]
    schema_ref: schemas.5A.yaml#/model/merchant_class_profile_5A
    lineage:
      produced_by: [5A.S1]
      consumed_by: [5A.S2, 5A.S3, 5A.S4, 5A.S5, 5B, 6A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  # S2 — weekly shape library
  - id: shape_grid_definition_5A
    status: required
    owner_subsegment: 5A
    description: Local-week time grid definition for shapes under a parameter pack and scenario.
    version: '{parameter_hash}.{scenario_id}'
    format: parquet
    path: |
      data/layer2/5A/shape_grid_definition/parameter_hash={parameter_hash}/scenario_id={scenario_id}/shape_grid_definition_5A.parquet
    partitioning: [parameter_hash, scenario_id]
    primary_key: [parameter_hash, scenario_id, bucket_index]
    ordering: [bucket_index]
    schema_ref: schemas.5A.yaml#/model/shape_grid_definition_5A
    lineage:
      produced_by: [5A.S2]
      consumed_by: [5A.S3, 5A.S4, 5A.S5, 5B, 6A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: class_zone_shape_5A
    status: required
    owner_subsegment: 5A
    description: Normalised weekly shape vectors per class×zone (and optional channel) for each scenario.
    version: '{parameter_hash}.{scenario_id}'
    format: parquet
    path: |
      data/layer2/5A/class_zone_shape/parameter_hash={parameter_hash}/scenario_id={scenario_id}/class_zone_shape_5A.parquet
    partitioning: [parameter_hash, scenario_id]
    primary_key:
      - parameter_hash
      - scenario_id
      - demand_class
      - legal_country_iso
      - tzid
      - bucket_index
    ordering:
      - demand_class
      - legal_country_iso
      - tzid
      - bucket_index
    schema_ref: schemas.5A.yaml#/model/class_zone_shape_5A
    lineage:
      produced_by: [5A.S2]
      consumed_by: [5A.S3, 5A.S4, 5A.S5, 5B, 6A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: class_shape_catalogue_5A
    status: optional
    owner_subsegment: 5A
    description: Optional base shape catalogue per class (and optional channel) for each scenario.
    version: '{parameter_hash}.{scenario_id}'
    format: parquet
    path: |
      data/layer2/5A/class_shape_catalogue/parameter_hash={parameter_hash}/scenario_id={scenario_id}/class_shape_catalogue_5A.parquet
    partitioning: [parameter_hash, scenario_id]
    primary_key: [parameter_hash, scenario_id, demand_class]
    ordering:
      - demand_class
    schema_ref: schemas.5A.yaml#/model/class_shape_catalogue_5A
    lineage:
      produced_by: [5A.S2]
      consumed_by: [5A.S3, 5A.S4, 5A.S5, 5B, 6A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  # S3 — baselines
  - id: merchant_zone_baseline_local_5A
    status: required
    owner_subsegment: 5A
    description: Merchant×zone baseline local-week intensities per scenario.
    version: '{manifest_fingerprint}.{scenario_id}'
    format: parquet
    path: |
      data/layer2/5A/merchant_zone_baseline_local/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/merchant_zone_baseline_local_5A.parquet
    partitioning: [manifest_fingerprint, scenario_id]
    primary_key:
      - manifest_fingerprint
      - scenario_id
      - merchant_id
      - legal_country_iso
      - tzid
      - bucket_index
    ordering:
      - merchant_id
      - legal_country_iso
      - tzid
      - bucket_index
    schema_ref: schemas.5A.yaml#/model/merchant_zone_baseline_local_5A
    lineage:
      produced_by: [5A.S3]
      consumed_by: [5A.S4, 5A.S5, 5B, 6A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: class_zone_baseline_local_5A
    status: optional
    owner_subsegment: 5A
    description: Optional class×zone baseline local-week intensities per scenario.
    version: '{manifest_fingerprint}.{scenario_id}'
    format: parquet
    path: |
      data/layer2/5A/class_zone_baseline_local/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/class_zone_baseline_local_5A.parquet
    partitioning: [manifest_fingerprint, scenario_id]
    primary_key:
      - manifest_fingerprint
      - scenario_id
      - demand_class
      - legal_country_iso
      - tzid
      - bucket_index
    ordering:
      - demand_class
      - legal_country_iso
      - tzid
      - bucket_index
    schema_ref: schemas.5A.yaml#/model/class_zone_baseline_local_5A
    lineage:
      produced_by: [5A.S3]
      consumed_by: [5A.S4, 5A.S5, 5B, 6A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: merchant_zone_baseline_utc_5A
    status: optional
    owner_subsegment: 5A
    description: Optional merchant×zone baseline intensities expressed on a UTC grid.
    version: '{manifest_fingerprint}.{scenario_id}'
    format: parquet
    path: |
      data/layer2/5A/merchant_zone_baseline_utc/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/merchant_zone_baseline_utc_5A.parquet
    partitioning: [manifest_fingerprint, scenario_id]
    primary_key:
      - manifest_fingerprint
      - scenario_id
      - merchant_id
      - legal_country_iso
      - tzid
      - utc_bucket_index
    ordering:
      - merchant_id
      - legal_country_iso
      - tzid
      - utc_bucket_index
    schema_ref: schemas.5A.yaml#/model/merchant_zone_baseline_utc_5A
    lineage:
      produced_by: [5A.S3]
      consumed_by: [5A.S4, 5A.S5, 5B, 6A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  # S4 — scenario overlays
  - id: merchant_zone_scenario_local_5A
    status: required
    owner_subsegment: 5A
    description: Scenario-adjusted local-week intensities per merchant×zone×horizon bucket.
    version: '{manifest_fingerprint}.{scenario_id}'
    format: parquet
    path: |
      data/layer2/5A/merchant_zone_scenario_local/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/merchant_zone_scenario_local_5A.parquet
    partitioning: [manifest_fingerprint, scenario_id]
    primary_key:
      - manifest_fingerprint
      - scenario_id
      - merchant_id
      - legal_country_iso
      - tzid
      - local_horizon_bucket_index
    ordering:
      - merchant_id
      - legal_country_iso
      - tzid
      - local_horizon_bucket_index
    schema_ref: schemas.5A.yaml#/model/merchant_zone_scenario_local_5A
    lineage:
      produced_by: [5A.S4]
      consumed_by: [5A.S5, 5B, 6A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: merchant_zone_overlay_factors_5A
    status: optional
    owner_subsegment: 5A
    description: Optional multiplicative overlay factors per merchant×zone×horizon bucket.
    version: '{manifest_fingerprint}.{scenario_id}'
    format: parquet
    path: |
      data/layer2/5A/merchant_zone_overlay_factors/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/merchant_zone_overlay_factors_5A.parquet
    partitioning: [manifest_fingerprint, scenario_id]
    primary_key:
      - manifest_fingerprint
      - scenario_id
      - merchant_id
      - legal_country_iso
      - tzid
      - local_horizon_bucket_index
    ordering:
      - merchant_id
      - legal_country_iso
      - tzid
      - local_horizon_bucket_index
    schema_ref: schemas.5A.yaml#/model/merchant_zone_overlay_factors_5A
    lineage:
      produced_by: [5A.S4]
      consumed_by: [5A.S5, 5B, 6A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: merchant_zone_scenario_utc_5A
    status: optional
    owner_subsegment: 5A
    description: Scenario-adjusted UTC intensities per merchant×zone×UTC horizon bucket.
    version: '{manifest_fingerprint}.{scenario_id}'
    format: parquet
    path: |
      data/layer2/5A/merchant_zone_scenario_utc/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/merchant_zone_scenario_utc_5A.parquet
    partitioning: [manifest_fingerprint, scenario_id]
    primary_key:
      - manifest_fingerprint
      - scenario_id
      - merchant_id
      - legal_country_iso
      - tzid
      - utc_horizon_bucket_index
    ordering:
      - merchant_id
      - legal_country_iso
      - tzid
      - utc_horizon_bucket_index
    schema_ref: schemas.5A.yaml#/model/merchant_zone_scenario_utc_5A
    lineage:
      produced_by: [5A.S4]
      consumed_by: [5A.S5, 5B, 6A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  # S5 - validation bundle
  - id: validation_bundle_5A
    status: required
    owner_subsegment: 5A
    description: Directory artefact containing the 5A validation bundle and evidence outputs.
    version: '{manifest_fingerprint}'
    format: folder
    path: data/layer2/5A/validation/manifest_fingerprint={manifest_fingerprint}/
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.layer2.yaml#/validation/validation_bundle_index_5A
    lineage:
      produced_by: [5A.S5]
      consumed_by: [5A.S5, 5B, 6A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: validation_bundle_index_5A
    status: required
    owner_subsegment: 5A
    description: Index and manifest for the 5A validation bundle.
    version: '{manifest_fingerprint}'
    format: json
    path: data/layer2/5A/validation/manifest_fingerprint={manifest_fingerprint}/validation_bundle_index_5A.json
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.layer2.yaml#/validation/validation_bundle_index_5A
    lineage:
      produced_by: [5A.S5]
      consumed_by: [5A.S5, 5B, 6A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: validation_report_5A
    status: required
    owner_subsegment: 5A
    description: Human/machine readable validation report for 5A.
    version: '{manifest_fingerprint}'
    format: json
    path: data/layer2/5A/validation/manifest_fingerprint={manifest_fingerprint}/reports/validation_report_5A.json
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.layer2.yaml#/validation/validation_report_5A
    lineage:
      produced_by: [5A.S5]
      consumed_by: [5A.validation_tools, 5B, 6A]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: validation_issue_table_5A
    status: optional
    owner_subsegment: 5A
    description: Optional structured list of validation issues for 5A.
    version: '{manifest_fingerprint}'
    format: parquet
    path: data/layer2/5A/validation/manifest_fingerprint={manifest_fingerprint}/issues/validation_issue_table_5A.parquet
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.layer2.yaml#/validation/validation_issue_table_5A
    lineage:
      produced_by: [5A.S5]
      consumed_by: [5A.validation_tools]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: validation_passed_flag_5A
    status: required
    owner_subsegment: 5A
    description: Pass/fail flag for the 5A validation bundle.
    version: '{manifest_fingerprint}'
    format: flag
    path: data/layer2/5A/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.layer2.yaml#/validation/passed_flag_5A
    lineage:
      produced_by: [5A.S5]
      consumed_by: [5B, 6A, 5A.validation_tools]
      final_in_layer: true
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  # Run reports
  - id: segment_state_runs
    status: draft
    owner_subsegment: 5A
    description: Layer-2 segment-state run-report (JSONL), one row per state invocation.
    version: latest
    format: jsonl
    path: reports/layer2/segment_state_runs/segment=5A/utc_day={utc_day}/segment_state_runs.jsonl
    partitioning: [utc_day]
    ordering: []
    schema_ref: schemas.layer2.yaml#/run_report/segment_state_run
    lineage:
      produced_by: [5A.S0, 5A.S1, 5A.S2, 5A.S3, 5A.S4, 5A.S5]
      consumed_by: [orchestrator, ops]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: s1_run_report_5A
    status: draft
    owner_subsegment: 5A
    description: Run report for 5A.S1 demand profiles.
    version: '{manifest_fingerprint}'
    format: json
    path: reports/layer2/5A/state=S1/manifest_fingerprint={manifest_fingerprint}/run_report.json
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.layer2.yaml#/run_report/segment_state_run
    lineage:
      produced_by: [5A.S1]
      consumed_by: [ops]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: s2_run_report_5A
    status: draft
    owner_subsegment: 5A
    description: Run report for 5A.S2 shape synthesis.
    version: '{manifest_fingerprint}'
    format: json
    path: reports/layer2/5A/state=S2/manifest_fingerprint={manifest_fingerprint}/run_report.json
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.layer2.yaml#/run_report/segment_state_run
    lineage:
      produced_by: [5A.S2]
      consumed_by: [ops]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: s3_run_report_5A
    status: draft
    owner_subsegment: 5A
    description: Run report for 5A.S3 baseline intensity synthesis.
    version: '{manifest_fingerprint}'
    format: json
    path: reports/layer2/5A/state=S3/manifest_fingerprint={manifest_fingerprint}/run_report.json
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.layer2.yaml#/run_report/segment_state_run
    lineage:
      produced_by: [5A.S3]
      consumed_by: [ops]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: s4_run_report_5A
    status: draft
    owner_subsegment: 5A
    description: Run report for 5A.S4 scenario overlays.
    version: '{manifest_fingerprint}'
    format: json
    path: reports/layer2/5A/state=S4/manifest_fingerprint={manifest_fingerprint}/run_report.json
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.layer2.yaml#/run_report/segment_state_run
    lineage:
      produced_by: [5A.S4]
      consumed_by: [ops]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

  - id: s5_run_report_5A
    status: draft
    owner_subsegment: 5A
    description: Run report for 5A.S5 validation bundle.
    version: '{manifest_fingerprint}'
    format: json
    path: reports/layer2/5A/state=S5/manifest_fingerprint={manifest_fingerprint}/run_report.json
    partitioning: [manifest_fingerprint]
    ordering: []
    schema_ref: schemas.layer2.yaml#/run_report/segment_state_run
    lineage:
      produced_by: [5A.S5]
      consumed_by: [ops]
      final_in_layer: false
    retention_days: 365
    pii: false
    licence: Proprietary-Internal

notes:
  - "Derived from docs/model_spec/data-engine/layer-2/specs/state-flow/5A/s#.expanded.md section 5."
