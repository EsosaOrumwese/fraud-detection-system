# Artefact registry for Layer-3 / Segment 6A

# --- S0 ---

- manifest_key: mlr.6A.validation.s0_gate_receipt
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s0_gate_receipt_6A
  semver: 1.0.0
  path_template: data/layer3/6A/gate_receipt/fingerprint={manifest_fingerprint}/s0_gate_receipt_6A.json
  partition_keys: [fingerprint]
  schema_ref: schemas.layer3.yaml#/gate/6A/s0_gate_receipt_6A
  produced_by: 6A.S0
  dependencies:
    - mlr.1A.validation.bundle
    - mlr.1A.validation.passed
    - mlr.1B.validation.bundle
    - mlr.1B.validation.passed
    - mlr.2A.validation.bundle
    - mlr.2A.validation.passed
    - mlr.2B.validation.bundle
    - mlr.2B.validation.passed
    - mlr.3A.validation.bundle
    - mlr.3A.validation.passed
    - mlr.3B.validation.bundle
    - mlr.3B.validation.passed
    - mlr.5A.validation.bundle
    - mlr.5A.validation.passed
    - mlr.5B.validation.bundle
    - mlr.5B.validation.passed
  retention_class: engine_control_plane
  pii_class: none

- manifest_key: mlr.6A.validation.sealed_inputs
  owner_layer: 3
  owner_segment: 6A
  dataset_id: sealed_inputs_6A
  semver: 1.0.0
  path_template: data/layer3/6A/sealed_inputs/fingerprint={manifest_fingerprint}/sealed_inputs_6A.parquet
  partition_keys: [fingerprint]
  schema_ref: schemas.layer3.yaml#/gate/6A/sealed_inputs_6A
  produced_by: 6A.S0
  dependencies:
    - mlr.6A.validation.s0_gate_receipt
  retention_class: engine_control_plane
  pii_class: none

# --- S0 sealed inputs (priors & taxonomies) ---

- manifest_key: mlr.6A.prior.population
  owner_layer: 3
  owner_segment: 6A
  dataset_id: prior_population_6A
  semver: 1.0.0
  path_template: config/layer3/6A/priors/population_priors_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/prior/population_priors_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

- manifest_key: mlr.6A.prior.segmentation
  owner_layer: 3
  owner_segment: 6A
  dataset_id: prior_segmentation_6A
  semver: 1.0.0
  path_template: config/layer3/6A/priors/segmentation_priors_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/prior/segmentation_priors_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

- manifest_key: mlr.6A.taxonomy.party
  owner_layer: 3
  owner_segment: 6A
  dataset_id: taxonomy_party_6A
  semver: 1.0.0
  path_template: config/layer3/6A/taxonomy/party_taxonomy_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/taxonomy/party_taxonomy_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

- manifest_key: mlr.6A.prior.account_per_party
  owner_layer: 3
  owner_segment: 6A
  dataset_id: prior_account_per_party_6A
  semver: 1.0.0
  path_template: config/layer3/6A/priors/account_per_party_priors_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/prior/account_per_party_priors_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

- manifest_key: mlr.6A.prior.product_mix
  owner_layer: 3
  owner_segment: 6A
  dataset_id: prior_product_mix_6A
  semver: 1.0.0
  path_template: config/layer3/6A/priors/product_mix_priors_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/prior/product_mix_priors_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

- manifest_key: mlr.6A.taxonomy.account_types
  owner_layer: 3
  owner_segment: 6A
  dataset_id: taxonomy_account_types_6A
  semver: 1.0.0
  path_template: config/layer3/6A/taxonomy/account_taxonomy_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/taxonomy/account_taxonomy_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

- manifest_key: mlr.6A.prior.instrument_per_account
  owner_layer: 3
  owner_segment: 6A
  dataset_id: prior_instrument_per_account_6A
  semver: 1.0.0
  path_template: config/layer3/6A/priors/instrument_per_account_priors_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/prior/instrument_per_account_priors_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

- manifest_key: mlr.6A.prior.instrument_mix
  owner_layer: 3
  owner_segment: 6A
  dataset_id: prior_instrument_mix_6A
  semver: 1.0.0
  path_template: config/layer3/6A/priors/instrument_mix_priors_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/prior/instrument_mix_priors_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

- manifest_key: mlr.6A.taxonomy.instrument_types
  owner_layer: 3
  owner_segment: 6A
  dataset_id: taxonomy_instrument_types_6A
  semver: 1.0.0
  path_template: config/layer3/6A/taxonomy/instrument_taxonomy_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/taxonomy/instrument_taxonomy_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

- manifest_key: mlr.6A.prior.device_counts
  owner_layer: 3
  owner_segment: 6A
  dataset_id: prior_device_counts_6A
  semver: 1.0.0
  path_template: config/layer3/6A/priors/device_count_priors_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/prior/device_count_priors_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

- manifest_key: mlr.6A.taxonomy.devices
  owner_layer: 3
  owner_segment: 6A
  dataset_id: taxonomy_devices_6A
  semver: 1.0.0
  path_template: config/layer3/6A/taxonomy/device_taxonomy_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/taxonomy/device_taxonomy_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

- manifest_key: mlr.6A.prior.ip_counts
  owner_layer: 3
  owner_segment: 6A
  dataset_id: prior_ip_counts_6A
  semver: 1.0.0
  path_template: config/layer3/6A/priors/ip_count_priors_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/prior/ip_count_priors_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

- manifest_key: mlr.6A.taxonomy.ips
  owner_layer: 3
  owner_segment: 6A
  dataset_id: taxonomy_ips_6A
  semver: 1.0.0
  path_template: config/layer3/6A/taxonomy/ip_taxonomy_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/taxonomy/ip_taxonomy_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

- manifest_key: mlr.6A.taxonomy.fraud_roles
  owner_layer: 3
  owner_segment: 6A
  dataset_id: taxonomy_fraud_roles_6A
  semver: 1.0.0
  path_template: config/layer3/6A/taxonomy/fraud_role_taxonomy_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/taxonomy/fraud_role_taxonomy_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

- manifest_key: mlr.6A.s5.prior.party_roles
  owner_layer: 3
  owner_segment: 6A
  dataset_id: prior_party_roles_6A
  semver: 1.0.0
  path_template: config/layer3/6A/priors/party_role_priors_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/prior/party_role_priors_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

- manifest_key: mlr.6A.s5.prior.account_roles
  owner_layer: 3
  owner_segment: 6A
  dataset_id: prior_account_roles_6A
  semver: 1.0.0
  path_template: config/layer3/6A/priors/account_role_priors_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/prior/account_role_priors_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

- manifest_key: mlr.6A.s5.prior.merchant_roles
  owner_layer: 3
  owner_segment: 6A
  dataset_id: prior_merchant_roles_6A
  semver: 1.0.0
  path_template: config/layer3/6A/priors/merchant_role_priors_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/prior/merchant_role_priors_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

- manifest_key: mlr.6A.s5.prior.device_roles
  owner_layer: 3
  owner_segment: 6A
  dataset_id: prior_device_roles_6A
  semver: 1.0.0
  path_template: config/layer3/6A/priors/device_role_priors_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/prior/device_role_priors_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

- manifest_key: mlr.6A.s5.prior.ip_roles
  owner_layer: 3
  owner_segment: 6A
  dataset_id: prior_ip_roles_6A
  semver: 1.0.0
  path_template: config/layer3/6A/priors/ip_role_priors_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/prior/ip_role_priors_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

- manifest_key: mlr.6A.policy.validation_policy
  owner_layer: 3
  owner_segment: 6A
  dataset_id: validation_policy_6A
  semver: 1.0.0
  path_template: config/layer3/6A/policy/validation_policy_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/policy/validation_policy_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

- manifest_key: mlr.6A.policy.graph_linkage_rules
  owner_layer: 3
  owner_segment: 6A
  dataset_id: graph_linkage_rules_6A
  semver: 1.0.0
  path_template: config/layer3/6A/policy/graph_linkage_rules_6A.v1.yaml
  partition_keys: []
  schema_ref: schemas.6A.yaml#/policy/graph_linkage_rules_6A
  produced_by: external
  dependencies: []
  retention_class: engine_control_plane
  pii_class: none
  license: Proprietary-Internal
  owner: { owner_team: "data-governance" }
  environment: [runtime]
  digest:

# --- S1 ---

- manifest_key: mlr.6A.s1.party_base
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s1_party_base_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s1_party_base_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s1_party_base_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s1/party_base
  produced_by: 6A.S1
  dependencies:
    - mlr.6A.validation.s0_gate_receipt
    - mlr.6A.validation.sealed_inputs
    - mlr.6A.prior.population
    - mlr.6A.prior.segmentation
    - mlr.6A.taxonomy.party
  retention_class: core_entity
  pii_class: synthetic_customer

- manifest_key: mlr.6A.s1.party_summary
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s1_party_summary_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s1_party_summary_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s1_party_summary_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s1/party_summary
  produced_by: 6A.S1
  dependencies:
    - mlr.6A.s1.party_base
  retention_class: diagnostics
  pii_class: synthetic_customer

# --- S2 ---

- manifest_key: mlr.6A.s2.account_base
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s2_account_base_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s2_account_base_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s2_account_base_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s2/account_base
  produced_by: 6A.S2
  dependencies:
    - mlr.6A.validation.s0_gate_receipt
    - mlr.6A.validation.sealed_inputs
    - mlr.6A.s1.party_base
    - mlr.6A.prior.product_mix
    - mlr.6A.prior.account_per_party
    - mlr.6A.taxonomy.account_types
  retention_class: core_entity
  pii_class: synthetic_customer

- manifest_key: mlr.6A.s2.party_product_holdings
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s2_party_product_holdings_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s2_party_product_holdings_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s2_party_product_holdings_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s2/party_product_holdings
  produced_by: 6A.S2
  dependencies:
    - mlr.6A.s1.party_base
    - mlr.6A.s2.account_base
  retention_class: core_entity
  pii_class: synthetic_customer

- manifest_key: mlr.6A.s2.merchant_account_base
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s2_merchant_account_base_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s2_merchant_account_base_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s2_merchant_account_base_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s2/merchant_account_base
  produced_by: 6A.S2
  dependencies:
    - mlr.6A.s2.account_base
  retention_class: diagnostics
  pii_class: synthetic_customer

- manifest_key: mlr.6A.s2.account_summary
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s2_account_summary_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s2_account_summary_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s2_account_summary_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s2/account_summary
  produced_by: 6A.S2
  dependencies:
    - mlr.6A.s2.account_base
  retention_class: diagnostics
  pii_class: synthetic_customer

# --- S3 ---

- manifest_key: mlr.6A.s3.instrument_base
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s3_instrument_base_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s3_instrument_base_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s3_instrument_base_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s3/instrument_base
  produced_by: 6A.S3
  dependencies:
    - mlr.6A.validation.s0_gate_receipt
    - mlr.6A.validation.sealed_inputs
    - mlr.6A.s1.party_base
    - mlr.6A.s2.account_base
    - mlr.6A.prior.instrument_mix
    - mlr.6A.prior.instrument_per_account
    - mlr.6A.taxonomy.instrument_types
  retention_class: core_entity
  pii_class: synthetic_customer

- manifest_key: mlr.6A.s3.account_instrument_links
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s3_account_instrument_links_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s3_account_instrument_links_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s3_account_instrument_links_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s3/account_instrument_links
  produced_by: 6A.S3
  dependencies:
    - mlr.6A.s2.account_base
    - mlr.6A.s3.instrument_base
  retention_class: core_entity
  pii_class: synthetic_customer

- manifest_key: mlr.6A.s3.party_instrument_holdings
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s3_party_instrument_holdings_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s3_party_instrument_holdings_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s3_party_instrument_holdings_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s3/party_instrument_holdings
  produced_by: 6A.S3
  dependencies:
    - mlr.6A.s1.party_base
    - mlr.6A.s2.account_base
    - mlr.6A.s3.instrument_base
  retention_class: core_entity
  pii_class: synthetic_customer

- manifest_key: mlr.6A.s3.instrument_summary
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s3_instrument_summary_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s3_instrument_summary_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s3_instrument_summary_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s3/instrument_summary
  produced_by: 6A.S3
  dependencies:
    - mlr.6A.s3.instrument_base
  retention_class: diagnostics
  pii_class: synthetic_customer

# --- S4 ---

- manifest_key: mlr.6A.s4.device_base
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s4_device_base_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s4_device_base_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s4_device_base_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s4/device_base
  produced_by: 6A.S4
  dependencies:
    - mlr.6A.validation.s0_gate_receipt
    - mlr.6A.validation.sealed_inputs
    - mlr.6A.s1.party_base
    - mlr.6A.prior.device_counts
    - mlr.6A.taxonomy.devices
  retention_class: core_entity
  pii_class: synthetic_customer

- manifest_key: mlr.6A.s4.ip_base
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s4_ip_base_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s4_ip_base_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s4_ip_base_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s4/ip_base
  produced_by: 6A.S4
  dependencies:
    - mlr.6A.validation.s0_gate_receipt
    - mlr.6A.validation.sealed_inputs
    - mlr.6A.prior.ip_counts
    - mlr.6A.taxonomy.ips
  retention_class: core_entity
  pii_class: synthetic_customer

- manifest_key: mlr.6A.s4.device_links
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s4_device_links_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s4_device_links_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s4_device_links_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s4/device_links
  produced_by: 6A.S4
  dependencies:
    - mlr.6A.s4.device_base
    - mlr.6A.s1.party_base
    - mlr.6A.s2.account_base
    - mlr.6A.s3.instrument_base
    - mlr.6A.policy.graph_linkage_rules
  retention_class: core_entity
  pii_class: synthetic_customer

- manifest_key: mlr.6A.s4.ip_links
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s4_ip_links_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s4_ip_links_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s4_ip_links_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s4/ip_links
  produced_by: 6A.S4
  dependencies:
    - mlr.6A.s4.ip_base
    - mlr.6A.s4.device_base
    - mlr.6A.s1.party_base
    - mlr.6A.policy.graph_linkage_rules
  retention_class: core_entity
  pii_class: synthetic_customer

- manifest_key: mlr.6A.s4.entity_neighbourhoods
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s4_entity_neighbourhoods_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s4_entity_neighbourhoods_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s4_entity_neighbourhoods_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s4/entity_neighbourhoods
  produced_by: 6A.S4
  dependencies:
    - mlr.6A.s4.device_base
    - mlr.6A.s4.ip_base
    - mlr.6A.s4.device_links
    - mlr.6A.s4.ip_links
  retention_class: diagnostics
  pii_class: synthetic_customer

- manifest_key: mlr.6A.s4.network_summary
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s4_network_summary_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s4_network_summary_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s4_network_summary_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s4/network_summary
  produced_by: 6A.S4
  dependencies:
    - mlr.6A.s4.device_base
    - mlr.6A.s4.ip_base
    - mlr.6A.s4.device_links
    - mlr.6A.s4.ip_links
  retention_class: diagnostics
  pii_class: none

# --- S5 fraud roles ---

- manifest_key: mlr.6A.s5.party_fraud_roles
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s5_party_fraud_roles_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s5_party_fraud_roles_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s5_party_fraud_roles_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s5/party_fraud_roles
  produced_by: 6A.S5
  dependencies:
    - mlr.6A.validation.s0_gate_receipt
    - mlr.6A.validation.sealed_inputs
    - mlr.6A.s1.party_base
    - mlr.6A.s5.prior.party_roles
    - mlr.6A.taxonomy.fraud_roles
    - mlr.6A.policy.validation_policy
  retention_class: core_entity
  pii_class: synthetic_customer

- manifest_key: mlr.6A.s5.account_fraud_roles
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s5_account_fraud_roles_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s5_account_fraud_roles_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s5_account_fraud_roles_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s5/account_fraud_roles
  produced_by: 6A.S5
  dependencies:
    - mlr.6A.validation.s0_gate_receipt
    - mlr.6A.validation.sealed_inputs
    - mlr.6A.s2.account_base
    - mlr.6A.s1.party_base
    - mlr.6A.s5.prior.account_roles
    - mlr.6A.taxonomy.fraud_roles
    - mlr.6A.policy.validation_policy
  retention_class: core_entity
  pii_class: synthetic_customer

- manifest_key: mlr.6A.s5.merchant_fraud_roles
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s5_merchant_fraud_roles_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s5_merchant_fraud_roles_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s5_merchant_fraud_roles_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s5/merchant_fraud_roles
  produced_by: 6A.S5
  dependencies:
    - mlr.6A.validation.s0_gate_receipt
    - mlr.6A.validation.sealed_inputs
    - mlr.1A.output.outlet_catalogue
    - mlr.6A.s5.prior.merchant_roles
    - mlr.6A.taxonomy.fraud_roles
    - mlr.6A.policy.validation_policy
  retention_class: core_entity
  pii_class: synthetic_customer

- manifest_key: mlr.6A.s5.device_fraud_roles
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s5_device_fraud_roles_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s5_device_fraud_roles_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s5_device_fraud_roles_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s5/device_fraud_roles
  produced_by: 6A.S5
  dependencies:
    - mlr.6A.validation.s0_gate_receipt
    - mlr.6A.validation.sealed_inputs
    - mlr.6A.s4.device_base
    - mlr.6A.s5.prior.device_roles
    - mlr.6A.taxonomy.fraud_roles
    - mlr.6A.policy.validation_policy
  retention_class: core_entity
  pii_class: synthetic_customer

- manifest_key: mlr.6A.s5.ip_fraud_roles
  owner_layer: 3
  owner_segment: 6A
  dataset_id: s5_ip_fraud_roles_6A
  semver: 1.0.0
  path_template: data/layer3/6A/s5_ip_fraud_roles_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s5_ip_fraud_roles_6A.parquet
  partition_keys: [seed, fingerprint, parameter_hash]
  schema_ref: schemas.6A.yaml#/s5/ip_fraud_roles
  produced_by: 6A.S5
  dependencies:
    - mlr.6A.validation.s0_gate_receipt
    - mlr.6A.validation.sealed_inputs
    - mlr.6A.s4.ip_base
    - mlr.6A.s5.prior.ip_roles
    - mlr.6A.taxonomy.fraud_roles
    - mlr.6A.policy.validation_policy
  retention_class: core_entity
  pii_class: synthetic_customer

# --- S5 validation & HashGate ---

- manifest_key: mlr.6A.validation.bundle
  owner_layer: 3
  owner_segment: 6A
  dataset_id: validation_bundle_index_6A
  semver: 1.0.0
  path_template: data/layer3/6A/validation/fingerprint={manifest_fingerprint}/validation_bundle_index_6A.json
  partition_keys: [fingerprint]
  schema_ref: schemas.layer3.yaml#/validation/6A/validation_bundle_index_6A
  produced_by: 6A.S5
  dependencies:
    - mlr.6A.validation.s0_gate_receipt
    - mlr.6A.taxonomy.fraud_roles
    - mlr.6A.policy.validation_policy
    - mlr.6A.s1.party_base
    - mlr.6A.s2.account_base
    - mlr.6A.s3.instrument_base
    - mlr.6A.s4.device_base
    - mlr.6A.s4.ip_base
    - mlr.6A.s5.party_fraud_roles
    - mlr.6A.s5.account_fraud_roles
    - mlr.6A.s5.merchant_fraud_roles
    - mlr.6A.s5.device_fraud_roles
    - mlr.6A.s5.ip_fraud_roles
  retention_class: engine_control_plane
  pii_class: none

- manifest_key: mlr.6A.validation.passed
  owner_layer: 3
  owner_segment: 6A
  dataset_id: validation_passed_flag_6A
  semver: 1.0.0
  path_template: data/layer3/6A/validation/fingerprint={manifest_fingerprint}/_passed.flag
  partition_keys: [fingerprint]
  schema_ref: schemas.layer3.yaml#/validation/6A/passed_flag_6A
  produced_by: 6A.S5
  dependencies:
    - mlr.6A.validation.bundle
  retention_class: engine_control_plane
  pii_class: none
