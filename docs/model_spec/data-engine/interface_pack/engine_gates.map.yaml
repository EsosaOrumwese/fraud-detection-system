version: "1.0"
gates:
  - gate_id: gate.layer1.1A.validation
    segment: 1A
    scope: fingerprint
    passed_flag_path_template: data/layer1/1A/validation/fingerprint={manifest_fingerprint}/_passed.flag
    bundle_root_template: data/layer1/1A/validation/fingerprint={manifest_fingerprint}/
    receipt_schema_ref: schemas.layer1.yaml#/validation/passed_flag
    verification_method:
      kind: sha256_bundle_digest
      digest_field: sha256_hex
      ordering: ascii_lex
      exclude_filenames: [_passed.flag]
    authorizes_outputs: ['ccy_country_weights_cache', 'country_set', 'crossborder_eligibility_flags', 'crossborder_features', 'hurdle_design_matrix', 'hurdle_pi_probs', 'hurdle_stationarity_tests_2024Q4', 'merchant_currency', 'outlet_catalogue', 'ranking_residual_cache_1A', 'rng_audit_log_1A', 'rng_event_dirichlet_gamma_vector', 'rng_event_gamma_component', 'rng_event_gumbel_key', 'rng_event_hurdle_bernoulli', 'rng_event_nb_final', 'rng_event_normal_box_muller', 'rng_event_poisson_component', 'rng_event_residual_rank', 'rng_event_sequence_finalize', 'rng_event_site_sequence_overflow', 'rng_event_stream_jump', 'rng_event_ztp_final', 'rng_event_ztp_rejection', 'rng_event_ztp_retry_exhausted', 'rng_trace_log_1A', 's3_base_weight_priors', 's3_candidate_set', 's3_integerised_counts', 's3_site_sequence', 's6_membership', 'sparse_flag']
    required_by_components: []
  - gate_id: gate.layer1.1B.validation
    segment: 1B
    scope: fingerprint
    passed_flag_path_template: data/layer1/1B/validation/fingerprint={manifest_fingerprint}/_passed.flag
    bundle_root_template: data/layer1/1B/validation/fingerprint={manifest_fingerprint}/
    receipt_schema_ref: schemas.1B.yaml#/validation/passed_flag
    verification_method:
      kind: sha256_bundle_digest
      digest_field: sha256_hex
      ordering: ascii_lex
      exclude_filenames: [_passed.flag]
    authorizes_outputs: ['rng_audit_log_1B', 'rng_event_in_cell_jitter', 'rng_event_site_tile_assign', 'rng_trace_log_1B', 's3_requirements', 's4_alloc_plan', 's5_site_tile_assignment', 's6_site_jitter', 's7_run_summary', 's7_site_synthesis', 's8_run_summary', 'site_locations', 'tile_bounds', 'tile_index', 'tile_weights']
    required_by_components: []
  - gate_id: gate.layer1.2A.validation
    segment: 2A
    scope: fingerprint
    passed_flag_path_template: data/layer1/2A/validation/fingerprint={manifest_fingerprint}/_passed.flag
    bundle_root_template: data/layer1/2A/validation/fingerprint={manifest_fingerprint}/
    receipt_schema_ref: schemas.2A.yaml#/validation/passed_flag
    verification_method:
      kind: sha256_bundle_digest
      digest_field: sha256_hex
      ordering: ascii_lex
      exclude_filenames: [_passed.flag]
    authorizes_outputs: ['s1_tz_lookup', 's4_legality_report', 'site_timezones', 'tz_timetable_cache']
    required_by_components: []
  - gate_id: gate.layer1.2B.validation
    segment: 2B
    scope: fingerprint
    passed_flag_path_template: data/layer1/2B/validation/fingerprint={manifest_fingerprint}/_passed.flag
    bundle_root_template: data/layer1/2B/validation/fingerprint={manifest_fingerprint}/
    receipt_schema_ref: schemas.1B.yaml#/validation/passed_flag
    verification_method:
      kind: sha256_bundle_digest
      digest_field: sha256_hex
      ordering: ascii_lex
      exclude_filenames: [_passed.flag]
    authorizes_outputs: ['s1_site_weights', 's2_alias_blob', 's2_alias_index', 's3_day_effects', 's4_group_weights', 's5_selection_log', 's6_edge_log', 's7_audit_report']
    required_by_components: []
  - gate_id: gate.layer1.3A.validation
    segment: 3A
    scope: fingerprint
    passed_flag_path_template: data/layer1/3A/validation/fingerprint={manifest_fingerprint}/_passed.flag
    bundle_root_template: data/layer1/3A/validation/fingerprint={manifest_fingerprint}/
    receipt_schema_ref: schemas.layer1.yaml#/validation/passed_flag_3A
    verification_method:
      kind: sha256_bundle_digest
      digest_field: sha256_hex
      ordering: ascii_lex
      exclude_filenames: [_passed.flag]
    authorizes_outputs: ['s1_escalation_queue', 's2_country_zone_priors', 's3_zone_shares', 's4_zone_counts', 's6_issue_table_3A', 's6_receipt_3A', 'zone_alloc', 'zone_alloc_universe_hash']
    required_by_components: []
  - gate_id: gate.layer1.3B.validation
    segment: 3B
    scope: fingerprint
    passed_flag_path_template: data/layer1/3B/validation/fingerprint={manifest_fingerprint}/_passed.flag
    bundle_root_template: data/layer1/3B/validation/fingerprint={manifest_fingerprint}/
    receipt_schema_ref: schemas.layer1.yaml#/validation/passed_flag_3B
    verification_method:
      kind: sha256_bundle_digest
      digest_field: sha256_hex
      ordering: ascii_lex
      exclude_filenames: [_passed.flag]
    authorizes_outputs: ['edge_alias_blob_3B', 'edge_alias_index_3B', 'edge_catalogue_3B', 'edge_catalogue_index_3B', 'edge_universe_hash_3B', 'gamma_draw_log_3B', 's4_run_summary_3B', 's5_manifest_3B', 'virtual_classification_3B', 'virtual_routing_policy_3B', 'virtual_settlement_3B']
    required_by_components: []
  - gate_id: gate.layer2.5A.validation
    segment: 5A
    scope: fingerprint
    passed_flag_path_template: data/layer2/5A/validation/fingerprint={manifest_fingerprint}/_passed.flag
    bundle_root_template: data/layer2/5A/validation/fingerprint={manifest_fingerprint}/
    receipt_schema_ref: schemas.layer2.yaml#/validation/passed_flag_5A
    verification_method:
      kind: sha256_bundle_digest
      digest_field: sha256_hex
      ordering: ascii_lex
      exclude_filenames: [_passed.flag]
    authorizes_outputs: ['class_shape_catalogue_5A', 'class_zone_baseline_local_5A', 'class_zone_shape_5A', 'merchant_class_profile_5A', 'merchant_zone_baseline_local_5A', 'merchant_zone_baseline_utc_5A', 'merchant_zone_overlay_factors_5A', 'merchant_zone_profile_5A', 'merchant_zone_scenario_local_5A', 'merchant_zone_scenario_utc_5A', 'scenario_manifest_5A', 'shape_grid_definition_5A']
    required_by_components: []
  - gate_id: gate.layer2.5B.validation
    segment: 5B
    scope: fingerprint
    passed_flag_path_template: data/layer2/5B/validation/fingerprint={manifest_fingerprint}/_passed.flag
    bundle_root_template: data/layer2/5B/validation/fingerprint={manifest_fingerprint}/
    receipt_schema_ref: schemas.layer2.yaml#/validation/passed_flag_5B
    verification_method:
      kind: sha256_bundle_digest
      digest_field: sha256_hex
      ordering: ascii_lex
      exclude_filenames: [_passed.flag]
    authorizes_outputs: ['arrival_events_5B', 's1_grouping_5B', 's1_time_grid_5B', 's2_latent_field_5B', 's2_realised_intensity_5B', 's3_bucket_counts_5B', 's4_arrival_anomalies_5B', 's4_arrival_summary_5B']
    required_by_components: []
