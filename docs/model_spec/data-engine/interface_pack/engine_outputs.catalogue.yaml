version: '1.0'
outputs:
- output_id: ccy_country_weights_cache
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/ccy_country_weights_cache/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/prep/ccy_country_weights_cache
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#ccy_country_weights_cache
  primary_key:
  - currency
  - country_iso
  join_keys:
  - currency
  - country_iso
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Deterministic cache of expanded currencycountry weights.'
- output_id: merchant_currency
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/merchant_currency/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/prep/merchant_currency
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#merchant_currency
  primary_key:
  - merchant_id
  join_keys:
  - merchant_id
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Per-merchant settlement currency with provenance.'
- output_id: hurdle_design_matrix
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/hurdle_design_matrix/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/model/hurdle_design_matrix
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#hurdle_design_matrix
  primary_key:
  - merchant_id
  join_keys:
  - merchant_id
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Predictor matrix for hurdle (single vs multi-site) decision.'
- output_id: hurdle_pi_probs
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/hurdle_pi_probs/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/model/hurdle_pi_probs
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#hurdle_pi_probs
  primary_key:
  - merchant_id
  join_keys:
  - merchant_id
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Per-merchant hurdle probabilities () after logistic model.'
- output_id: sparse_flag
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/sparse_flag/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/prep/sparse_flag
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#sparse_flag
  primary_key:
  - currency
  join_keys:
  - currency
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Per-currency sparsity flags emitted by currencycountry expansion.'
- output_id: crossborder_eligibility_flags
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/crossborder_eligibility_flags/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/prep/crossborder_eligibility_flags
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#crossborder_eligibility_flags
  primary_key:
  - merchant_id
  join_keys:
  - merchant_id
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Flags enforcing cross-border eligibility rules prior to ZTP.'
- output_id: country_set
  class: surface
  exposure: internal
  scope: scope_parameter_hash_seed
  owner_segment: 1A
  path_template: data/layer1/1A/country_set/seed={seed}/parameter_hash={parameter_hash}/
  partitions:
  - seed
  - parameter_hash
  schema_ref: schemas.1A.yaml#/alloc/country_set
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#country_set
  primary_key:
  - merchant_id
  - country_iso
  join_keys:
  - merchant_id
  - country_iso
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Legacy RNG-dependent allocation set; superseded by S3 ordered candidate set. Not authoritative for inter-country order.'
- output_id: s6_membership
  class: surface
  exposure: internal
  scope: scope_parameter_hash_seed
  owner_segment: 1A
  path_template: data/layer1/1A/s6/membership/seed={seed}/parameter_hash={parameter_hash}/
  partitions:
  - seed
  - parameter_hash
  schema_ref: schemas.1A.yaml#/alloc/membership
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#s6_membership
  primary_key:
  - merchant_id
  - country_iso
  join_keys:
  - merchant_id
  - country_iso
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Optional convenience surface of selected foreign ISO2s per merchant; authority remains S6 RNG events; no inter-country order encoded.'
- output_id: s6_validation_receipt
  class: surface
  exposure: internal
  scope: scope_parameter_hash_seed
  owner_segment: 1A
  path_template: data/layer1/1A/s6/seed={seed}/parameter_hash={parameter_hash}/
  partitions:
  - seed
  - parameter_hash
  schema_ref: schemas.layer1.yaml#/validation/s6_receipt
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#s6_validation_receipt
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'PASS receipt for S6; gate for S7/S8 reads.'
- output_id: ranking_residual_cache_1A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_seed
  owner_segment: 1A
  path_template: data/layer1/1A/ranking_residual_cache_1A/seed={seed}/parameter_hash={parameter_hash}/
  partitions:
  - seed
  - parameter_hash
  schema_ref: schemas.1A.yaml#/alloc/ranking_residual_cache
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#ranking_residual_cache_1A
  primary_key:
  - merchant_id
  - country_iso
  join_keys:
  - merchant_id
  - country_iso
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Legacy residual cache for RNG integerisation; superseded by S3 deterministic integerised counts (parameter-scoped).'
- output_id: outlet_catalogue
  class: surface
  exposure: external
  scope: scope_manifest_fingerprint_seed
  owner_segment: 1A
  path_template: data/layer1/1A/outlet_catalogue/seed={seed}/fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.1A.yaml#/egress/outlet_catalogue
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#outlet_catalogue
  primary_key:
  - merchant_id
  - legal_country_iso
  - site_order
  join_keys:
  - merchant_id
  - legal_country_iso
  - site_order
  read_requires_gates:
  - gate.layer1.1A.validation
  immutability:
    immutable_once_written: true
  description: 'Immutable outlet stubs per merchant legal_country. Does NOT encode cross-country order; consumers MUST join `s3_candidate_set.candidate_rank` for that. Consumers MUST only read after verifying `_passed.flag` matches SHA256(`validation_bundle_1A`) for the same fingerprint (see S9.9).'
- output_id: s3_candidate_set
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/s3_candidate_set/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/s3/candidate_set
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#s3_candidate_set
  primary_key:
  - merchant_id
  - country_iso
  join_keys:
  - merchant_id
  - country_iso
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Deterministic ordered candidate set per merchant; single authority for inter-country order (`candidate_rank`).'
- output_id: s3_base_weight_priors
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/s3_base_weight_priors/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/s3/base_weight_priors
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#s3_base_weight_priors
  primary_key:
  - merchant_id
  - country_iso
  join_keys:
  - merchant_id
  - country_iso
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Deterministic base-weight priors (fixed-dp strings) per candidate; not probabilities.'
- output_id: s3_integerised_counts
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/s3_integerised_counts/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/s3/integerised_counts
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#s3_integerised_counts
  primary_key:
  - merchant_id
  - country_iso
  join_keys:
  - merchant_id
  - country_iso
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Deterministic per-country integer counts summing to N; includes residual_rank.'
- output_id: s3_site_sequence
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/s3_site_sequence/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/s3/site_sequence
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#s3_site_sequence
  primary_key:
  - merchant_id
  - country_iso
  - site_order
  join_keys:
  - merchant_id
  - country_iso
  - site_order
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Deterministic within-country site sequence (and optional 6-digit site_id).'
- output_id: hurdle_stationarity_tests_2024Q4
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/hurdle_stationarity_tests/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/validation/hurdle_stationarity_tests
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#hurdle_stationarity_tests_2024Q4
  primary_key:
  - test_id
  join_keys:
  - test_id
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Diagnostics for hurdle model stability across vintages.'
- output_id: crossborder_features
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/crossborder_features/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/model/crossborder_features
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#crossborder_features
  primary_key:
  - merchant_id
  join_keys:
  - merchant_id
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Per-merchant deterministic features used by cross-border K (currently: openness scalar X_m in [0,1]).'
- output_id: validation_bundle_1A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 1A
  path_template: data/layer1/1A/validation/fingerprint={manifest_fingerprint}/
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.1A.yaml#/validation/validation_bundle
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#validation_bundle_1A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Validator outputs for 1A (metrics, plots, diffs).'
- output_id: validation_passed_flag_1A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 1A
  path_template: data/layer1/1A/validation/fingerprint={manifest_fingerprint}/_passed.flag
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/validation/passed_flag
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#validation_passed_flag_1A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'HashGate PASS flag for the 1A validation bundle.'
- output_id: rng_audit_log_1A
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id
  owner_segment: 1A
  path_template: logs/rng/audit/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/rng_audit_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/core/rng_audit_log
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_audit_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Run-scoped RNG audit log (master seed, counters, substream jumps).'
  notes: 'Dictionary id rng_audit_log; namespaced here to enforce unique output_id.'
- output_id: rng_trace_log_1A
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id
  owner_segment: 1A
  path_template: logs/rng/trace/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/rng_trace_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/core/rng_trace_log
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_trace_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Structured per-(module,substream_label) RNG trace (saturating totals for draws/blocks/events; `draws_total` equals the sum of event-level draws; `blocks_total` reconciled via counters). Emit exactly one cumulative row after each RNG event append (per S4 2A).'
  notes: 'Dictionary id rng_trace_log; namespaced here to enforce unique output_id.'
- output_id: rng_event_hurdle_bernoulli
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id
  owner_segment: 1A
  path_template: logs/rng/events/hurdle_bernoulli/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/hurdle_bernoulli
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_hurdle_bernoulli
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: hurdle Bernoulli draws per merchant ().'
- output_id: rng_event_gamma_component
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id
  owner_segment: 1A
  path_template: logs/rng/events/gamma_component/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/gamma_component
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_gamma_component
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: gamma draws for NB/Dirichlet components.'
- output_id: rng_event_poisson_component
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id
  owner_segment: 1A
  path_template: logs/rng/events/poisson_component/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/poisson_component
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_poisson_component
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: Poisson draws used in NB composition / ZTP.'
- output_id: rng_event_nb_final
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id
  owner_segment: 1A
  path_template: logs/rng/events/nb_final/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/nb_final
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_nb_final
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: final Negative Binomial draws for outlet counts.'
- output_id: rng_event_ztp_rejection
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id
  owner_segment: 1A
  path_template: logs/rng/events/ztp_rejection/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/ztp_rejection
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_ztp_rejection
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: ZTP rejection samples and acceptance traces.'
- output_id: rng_event_ztp_retry_exhausted
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id
  owner_segment: 1A
  path_template: logs/rng/events/ztp_retry_exhausted/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/ztp_retry_exhausted
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_ztp_retry_exhausted
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: ZTP retry exhaustion (diagnostic hard events).'
- output_id: rng_event_ztp_final
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id
  owner_segment: 1A
  path_template: logs/rng/events/ztp_final/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/ztp_final
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_ztp_final
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: S4 single acceptance record per resolved merchant (fixes K_target and run facts).'
- output_id: rng_event_gumbel_key
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id
  owner_segment: 1A
  path_template: logs/rng/events/gumbel_key/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/gumbel_key
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_gumbel_key
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: Gumbel-top-k keys for foreign-country selection.'
- output_id: rng_event_dirichlet_gamma_vector
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id
  owner_segment: 1A
  path_template: logs/rng/events/dirichlet_gamma_vector/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/dirichlet_gamma_vector
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_dirichlet_gamma_vector
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: Dirichlet gamma vectors for splitting outlets across countries.'
- output_id: rng_event_stream_jump
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id
  owner_segment: 1A
  path_template: logs/rng/events/stream_jump/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/stream_jump
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_stream_jump
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: explicit Philox stream/substream jump records.'
- output_id: rng_event_normal_box_muller
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id
  owner_segment: 1A
  path_template: logs/rng/events/normal_box_muller/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/normal_box_muller
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_normal_box_muller
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: standard normal draws via BoxMuller (Z only; sine mate discarded).'
- output_id: rng_event_sequence_finalize
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id
  owner_segment: 1A
  path_template: logs/rng/events/sequence_finalize/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/sequence_finalize
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_sequence_finalize
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: final sequence allocation per (merchant,country) block.'
- output_id: rng_event_residual_rank
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id
  owner_segment: 1A
  path_template: logs/rng/events/residual_rank/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/residual_rank
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_residual_rank
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: deterministic ranks of largest-remainder residuals for per-country integerisation.'
- output_id: rng_event_site_sequence_overflow
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id
  owner_segment: 1A
  path_template: logs/rng/events/site_sequence_overflow/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/site_sequence_overflow
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_site_sequence_overflow
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: guardrail events when site sequence space is exhausted.'
- output_id: s0_gate_receipt_1B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 1B
  path_template: data/layer1/1B/s0_gate_receipt/fingerprint={manifest_fingerprint}/s0_gate_receipt.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.1B.yaml#/validation/s0_gate_receipt
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s0_gate_receipt_1B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Fingerprint-scoped receipt proving 1A PASS verification; enumerates sealed inputs for 1B.'
- output_id: tile_index
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1B
  path_template: data/layer1/1B/tile_index/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1B.yaml#/prep/tile_index
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#tile_index
  primary_key:
  - country_iso
  - tile_id
  join_keys:
  - country_iso
  - tile_id
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Eligible raster cells per country after clip.'
- output_id: tile_weights
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1B
  path_template: data/layer1/1B/tile_weights/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1B.yaml#/prep/tile_weights
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#tile_weights
  primary_key:
  - country_iso
  - tile_id
  join_keys:
  - country_iso
  - tile_id
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Deterministic fixed-dp weights per tile.'
- output_id: s3_requirements
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 1B
  path_template: data/layer1/1B/s3_requirements/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.1B.yaml#/plan/s3_requirements
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s3_requirements
  primary_key:
  - merchant_id
  - legal_country_iso
  join_keys:
  - merchant_id
  - legal_country_iso
  read_requires_gates:
  - gate.layer1.1B.validation
  immutability:
    immutable_once_written: true
  description: 'Deterministic site counts per (merchant_id, legal_country_iso) for this run.'
- output_id: s3_run_report
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 1B
  path_template: control/s3_requirements/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s3_run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.1B.yaml#/control/s3_run_report
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s3_run_report
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.1B.validation
  immutability:
    immutable_once_written: true
  description: 'Control-plane counters and receipts for S3 requirements publish.'
- output_id: s4_alloc_plan
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 1B
  path_template: data/layer1/1B/s4_alloc_plan/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.1B.yaml#/plan/s4_alloc_plan
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s4_alloc_plan
  primary_key:
  - merchant_id
  - legal_country_iso
  - tile_id
  join_keys:
  - merchant_id
  - legal_country_iso
  - tile_id
  read_requires_gates:
  - gate.layer1.1B.validation
  immutability:
    immutable_once_written: true
  description: 'Per-tile integer allocations that sum to S3 n_sites (RNG-free; positives only).'
- output_id: s4_run_report
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 1B
  path_template: control/s4_alloc_plan/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s4_run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.1B.yaml#/control/s4_run_report
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s4_run_report
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.1B.validation
  immutability:
    immutable_once_written: true
  description: 'Control-plane counters and receipts for S4 allocation publish.'
- output_id: s5_site_tile_assignment
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 1B
  path_template: data/layer1/1B/s5_site_tile_assignment/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.1B.yaml#/plan/s5_site_tile_assignment
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s5_site_tile_assignment
  primary_key:
  - merchant_id
  - legal_country_iso
  - site_order
  join_keys:
  - merchant_id
  - legal_country_iso
  - site_order
  read_requires_gates:
  - gate.layer1.1B.validation
  immutability:
    immutable_once_written: true
  description: 'Sitetile assignment; one row per site; satisfies S4 per-tile quotas.'
- output_id: s5_run_report
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 1B
  path_template: control/s5_site_tile_assignment/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s5_run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.1B.yaml#/control/s5_run_report
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s5_run_report
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.1B.validation
  immutability:
    immutable_once_written: true
  description: 'Control-plane counters and receipts for S5 sitetile assignment publish.'
- output_id: s6_site_jitter
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 1B
  path_template: data/layer1/1B/s6_site_jitter/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.1B.yaml#/plan/s6_site_jitter
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s6_site_jitter
  primary_key:
  - merchant_id
  - legal_country_iso
  - site_order
  join_keys:
  - merchant_id
  - legal_country_iso
  - site_order
  read_requires_gates:
  - gate.layer1.1B.validation
  immutability:
    immutable_once_written: true
  description: 'Per-site in-pixel jitter; effective deltas (projection into country); one row per site.'
- output_id: s6_run_report
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 1B
  path_template: control/s6_site_jitter/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s6_run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.1B.yaml#/control/s6_run_report
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s6_run_report
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.1B.validation
  immutability:
    immutable_once_written: true
  description: 'Control-plane counters and RNG coverage for S6 jitter publish.'
- output_id: tile_bounds
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1B
  path_template: data/layer1/1B/tile_bounds/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1B.yaml#/prep/tile_bounds
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#tile_bounds
  primary_key:
  - country_iso
  - tile_id
  join_keys:
  - country_iso
  - tile_id
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Rectangle bounds per eligible tile (S1 companion to tile_index).'
- output_id: s7_site_synthesis
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 1B
  path_template: data/layer1/1B/s7_site_synthesis/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.1B.yaml#/plan/s7_site_synthesis
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s7_site_synthesis
  primary_key:
  - merchant_id
  - legal_country_iso
  - site_order
  join_keys:
  - merchant_id
  - legal_country_iso
  - site_order
  read_requires_gates:
  - gate.layer1.1B.validation
  immutability:
    immutable_once_written: true
  description: 'Deterministic stitch of S5 (tile) + S6 (effective deltas) + S1 geometry into per-site absolutes; RNG-free; 1:1 with outlet_catalogue.'
- output_id: s7_run_summary
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 1B
  path_template: data/layer1/1B/s7_site_synthesis/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s7_run_summary.json
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.1B.yaml#/control/s7_run_summary
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s7_run_summary
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.1B.validation
  immutability:
    immutable_once_written: true
  description: 'Control-plane run summary for S7 site synthesis publish.'
- output_id: site_locations
  class: surface
  exposure: external
  scope: scope_manifest_fingerprint_seed
  owner_segment: 1B
  path_template: data/layer1/1B/site_locations/seed={seed}/fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.1B.yaml#/egress/site_locations
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#site_locations
  primary_key:
  - merchant_id
  - legal_country_iso
  - site_order
  join_keys:
  - merchant_id
  - legal_country_iso
  - site_order
  read_requires_gates:
  - gate.layer1.1B.validation
  immutability:
    immutable_once_written: true
  description: 'Site locations with absolute lat/lon (post jitter + geometry stitch); partitioned by seed/fingerprint.'
- output_id: s8_run_summary
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 1B
  path_template: data/layer1/1B/site_locations/seed={seed}/fingerprint={manifest_fingerprint}/s8_run_summary.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.1B.yaml#/control/s8_run_summary
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s8_run_summary
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.1B.validation
  immutability:
    immutable_once_written: true
  description: 'Control-plane summary for S8 site_locations publish.'
- output_id: validation_bundle_1B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 1B
  path_template: data/layer1/1B/validation/fingerprint={manifest_fingerprint}/
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.1B.yaml#/validation/validation_bundle_1B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#validation_bundle_1B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Validation bundle for a 1B publish (one per manifest_fingerprint).'
- output_id: validation_passed_flag_1B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 1B
  path_template: data/layer1/1B/validation/fingerprint={manifest_fingerprint}/_passed.flag
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.1B.yaml#/validation/passed_flag
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#validation_passed_flag_1B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'PASS gate flag; equals SHA-256 of the bundle per S9 hashing rule.'
- output_id: jitter_policy
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 1B
  path_template: config/layer1/1B/policy/1B.jitter.yaml
  partitions: []
  schema_ref: schemas.1B.yaml#/policy/jitter_policy
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#jitter_policy
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'RESERVED (VNext). Gaussian jitter (deg) policy by latitude band / merchant class. Not consumed by 1B v1 uniform lane.'
- output_id: rng_event_site_tile_assign
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id
  owner_segment: 1B
  path_template: logs/rng/events/site_tile_assign/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/site_tile_assign
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#rng_event_site_tile_assign
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'RNG events for sitetile assignment (one event per assigned site).'
- output_id: rng_event_in_cell_jitter
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id
  owner_segment: 1B
  path_template: logs/rng/events/in_cell_jitter/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/in_cell_jitter
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#rng_event_in_cell_jitter
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'RNG events for S6 in-cell jitter (1 event per site; one per attempt; per-event budget; blocks=1, draws=2).'
- output_id: rng_audit_log_1B
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id
  owner_segment: 1B
  path_template: logs/rng/audit/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/rng_audit_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/core/rng_audit_log
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#rng_audit_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'RNG run audit (identity/config) one row at run start.'
  notes: 'Dictionary id rng_audit_log; namespaced here to enforce unique output_id.'
- output_id: rng_trace_log_1B
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id
  owner_segment: 1B
  path_template: logs/rng/trace/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/rng_trace_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/core/rng_trace_log
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#rng_trace_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'RNG cumulative trace append exactly one row after each event append.'
  notes: 'Dictionary id rng_trace_log; namespaced here to enforce unique output_id.'
- output_id: tz_overrides
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 2A
  path_template: config/layer1/2A/timezone/tz_overrides.yaml
  partitions: []
  schema_ref: schemas.2A.yaml#/policy/tz_overrides_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#tz_overrides
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Time-zone overrides (governed; precedence site mcc country).'
- output_id: tz_nudge
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 2A
  path_template: config/layer1/2A/timezone/tz_nudge.yml
  partitions: []
  schema_ref: schemas.2A.yaml#/policy/tz_nudge_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#tz_nudge
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Deterministic used at borders for tie-breaks; sealed for reproducibility.'
- output_id: s0_gate_receipt_2A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 2A
  path_template: data/layer1/2A/s0_gate_receipt/fingerprint={manifest_fingerprint}/s0_gate_receipt.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.2A.yaml#/validation/s0_gate_receipt_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#s0_gate_receipt_2A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Fingerprint-scoped receipt proving 1B PASS and recording sealed inputs for 2A.'
- output_id: sealed_inputs_v1_2A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 2A
  path_template: data/layer1/2A/sealed_inputs/fingerprint={manifest_fingerprint}/sealed_inputs_v1.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.2A.yaml#/manifests/sealed_inputs_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#sealed_inputs_v1
  primary_key:
  - manifest_fingerprint
  - asset_id
  join_keys:
  - manifest_fingerprint
  - asset_id
  read_requires_gates:
  - gate.layer1.2A.validation
  immutability:
    immutable_once_written: true
  description: 'Diagnostic inventory of sealed inputs for a 2A fingerprint.'
  notes: 'Dictionary id sealed_inputs_v1; namespaced here to enforce unique output_id.'
- output_id: s1_tz_lookup
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 2A
  path_template: data/layer1/2A/s1_tz_lookup/seed={seed}/fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.2A.yaml#/plan/s1_tz_lookup
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#s1_tz_lookup
  primary_key:
  - merchant_id
  - legal_country_iso
  - site_order
  join_keys:
  - merchant_id
  - legal_country_iso
  - site_order
  read_requires_gates:
  - gate.layer1.2A.validation
  immutability:
    immutable_once_written: true
  description: 'Provisional tz lookup results per site (deterministic).'
- output_id: site_timezones
  class: surface
  exposure: external
  scope: scope_manifest_fingerprint_seed
  owner_segment: 2A
  path_template: data/layer1/2A/site_timezones/seed={seed}/fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.2A.yaml#/egress/site_timezones
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#site_timezones
  primary_key:
  - merchant_id
  - legal_country_iso
  - site_order
  join_keys:
  - merchant_id
  - legal_country_iso
  - site_order
  read_requires_gates:
  - gate.layer1.2A.validation
  immutability:
    immutable_once_written: true
  description: 'Final per-site IANA tzid with provenance; order-free egress.'
- output_id: tz_timetable_cache
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 2A
  path_template: data/layer1/2A/tz_timetable_cache/fingerprint={manifest_fingerprint}/
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.2A.yaml#/cache/tz_timetable_cache
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#tz_timetable_cache
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.2A.validation
  immutability:
    immutable_once_written: true
  description: 'Fingerprint-scoped cache manifest for tz transitions.'
- output_id: s4_legality_report
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 2A
  path_template: data/layer1/2A/legality_report/seed={seed}/fingerprint={manifest_fingerprint}/s4_legality_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.2A.yaml#/validation/s4_legality_report
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#s4_legality_report
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.2A.validation
  immutability:
    immutable_once_written: true
  description: 'Legality/DST report per seedfingerprint (JSON summary).'
- output_id: validation_bundle_2A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 2A
  path_template: data/layer1/2A/validation/fingerprint={manifest_fingerprint}/
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.2A.yaml#/validation/validation_bundle_2A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#validation_bundle_2A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Validation bundle for 2A publish (one per fingerprint).'
- output_id: validation_passed_flag_2A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 2A
  path_template: data/layer1/2A/validation/fingerprint={manifest_fingerprint}/_passed.flag
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.2A.yaml#/validation/passed_flag
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#validation_passed_flag_2A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'PASS flag; equals SHA-256 of bundle per index+ASCII-lex law.'
- output_id: s0_gate_receipt_2B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 2B
  path_template: data/layer1/2B/s0_gate_receipt_2B/fingerprint={manifest_fingerprint}/s0_gate_receipt_2B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.2B.yaml#/validation/s0_gate_receipt_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#s0_gate_receipt_2B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Gate receipt attesting upstream verification, identity, and catalogue-only resolution.'
- output_id: sealed_inputs_v1_2B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 2B
  path_template: data/layer1/2B/sealed_inputs_v1/fingerprint={manifest_fingerprint}/sealed_inputs_v1.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.2B.yaml#/validation/sealed_inputs_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#sealed_inputs_v1
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.2B.validation
  immutability:
    immutable_once_written: true
  description: 'Authoritative inventory of every asset sealed by 2B.S0 for the manifest.'
  notes: 'Dictionary id sealed_inputs_v1; namespaced here to enforce unique output_id.'
- output_id: route_rng_policy_v1
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 2B
  path_template: config/layer1/2B/policy/route_rng_policy_v1.json
  partitions: []
  schema_ref: schemas.2B.yaml#/policy/route_rng_policy_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#route_rng_policy_v1
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Philox sub-stream layout & RNG budgets for routing states.'
- output_id: virtual_edge_policy_v1
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 2B
  path_template: config/layer1/2B/policy/virtual_edge_policy_v1.json
  partitions: []
  schema_ref: schemas.2B.yaml#/policy/virtual_edge_policy_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#virtual_edge_policy_v1
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Sealed virtual-edge catalogue containing edges, weights, and attributes.'
- output_id: alias_layout_policy_v1
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 2B
  path_template: config/layer1/2B/policy/alias_layout_policy_v1.json
  partitions: []
  schema_ref: schemas.2B.yaml#/policy/alias_layout_policy_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#alias_layout_policy_v1
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Alias table byte layout, alignment, and decode invariants.'
- output_id: day_effect_policy_v1
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 2B
  path_template: config/layer1/2B/policy/day_effect_policy_v1.json
  partitions: []
  schema_ref: schemas.2B.yaml#/policy/day_effect_policy_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#day_effect_policy_v1
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Daily modulation cadence, variance, and clipping configuration for S3.'
- output_id: s1_site_weights
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 2B
  path_template: data/layer1/2B/s1_site_weights/seed={seed}/fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.2B.yaml#/plan/s1_site_weights
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#s1_site_weights
  primary_key:
  - merchant_id
  - legal_country_iso
  - site_order
  join_keys:
  - merchant_id
  - legal_country_iso
  - site_order
  read_requires_gates:
  - gate.layer1.2B.validation
  immutability:
    immutable_once_written: true
  description: 'Frozen per-site probability law emitted by S1 for alias construction.'
- output_id: s2_alias_index
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 2B
  path_template: data/layer1/2B/s2_alias_index/seed={seed}/fingerprint={manifest_fingerprint}/index.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.2B.yaml#/plan/s2_alias_index
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#s2_alias_index
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.2B.validation
  immutability:
    immutable_once_written: true
  description: 'JSON index describing alias blob slices, offsets, and digests.'
- output_id: s2_alias_blob
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 2B
  path_template: data/layer1/2B/s2_alias_blob/seed={seed}/fingerprint={manifest_fingerprint}/alias.bin
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.2B.yaml#/binary/s2_alias_blob
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#s2_alias_blob
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.2B.validation
  immutability:
    immutable_once_written: true
  description: 'Contiguous binary blob containing per-merchant alias tables.'
- output_id: s3_day_effects
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 2B
  path_template: data/layer1/2B/s3_day_effects/seed={seed}/fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.2B.yaml#/plan/s3_day_effects
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#s3_day_effects
  primary_key:
  - merchant_id
  - utc_day
  - tz_group_id
  join_keys:
  - merchant_id
  - utc_day
  - tz_group_id
  read_requires_gates:
  - gate.layer1.2B.validation
  immutability:
    immutable_once_written: true
  description: 'Per-merchant UTC-day tz-group gamma multipliers for day-scale co-movement.'
- output_id: s4_group_weights
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 2B
  path_template: data/layer1/2B/s4_group_weights/seed={seed}/fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.2B.yaml#/plan/s4_group_weights
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#s4_group_weights
  primary_key:
  - merchant_id
  - utc_day
  - tz_group_id
  join_keys:
  - merchant_id
  - utc_day
  - tz_group_id
  read_requires_gates:
  - gate.layer1.2B.validation
  immutability:
    immutable_once_written: true
  description: 'Per-merchant UTC-day tz-group mix used to pick tz-group prior to static alias.'
- output_id: s5_selection_log
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id_utc_day
  owner_segment: 2B
  path_template: data/layer1/2B/s5_selection_log/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/utc_day={utc_day}/selection_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  - utc_day
  schema_ref: schemas.2B.yaml#/trace/s5_selection_log_row
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#s5_selection_log
  primary_key: []
  join_keys: []
  availability: optional
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Optional per-arrival trace for routing selections; arrival-ordered JSONL.'
- output_id: s6_edge_log
  class: stream
  exposure: internal
  scope: scope_parameter_hash_seed_run_id_utc_day
  owner_segment: 2B
  path_template: logs/edge/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/utc_day={utc_day}/s6_edge_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  - utc_day
  schema_ref: schemas.2B.yaml#/trace/s6_edge_log_row
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#s6_edge_log
  primary_key: []
  join_keys: []
  availability: optional
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Per-arrival virtual-edge selections captured as a diagnostic log.'
- output_id: s7_audit_report
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 2B
  path_template: data/layer1/2B/s7_audit_report/seed={seed}/fingerprint={manifest_fingerprint}/s7_audit_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.2B.yaml#/validation/s7_audit_report_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#s7_audit_report
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.2B.validation
  immutability:
    immutable_once_written: true
  description: 'Deterministic audit report emitted by S7 (validators, evidence, run metadata).'
- output_id: validation_bundle_index_2B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 2B
  path_template: data/layer1/2B/validation/fingerprint={manifest_fingerprint}/index.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/validation/validation_bundle/index_schema
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#validation_bundle_2B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Fingerprint-scoped PASS bundle index for Segment 2B.'
  notes: 'Dictionary id validation_bundle_2B; bundle index is stored as index.json in 2B.'
- output_id: validation_passed_flag_2B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 2B
  path_template: data/layer1/2B/validation/fingerprint={manifest_fingerprint}/_passed.flag
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.1B.yaml#/validation/passed_flag
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#validation_passed_flag_2B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Companion flag containing the SHA-256 digest of the 2B validation bundle.'
- output_id: zone_mixture_policy
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 3A
  path_template: config/layer1/3A/policy/zone_mixture_policy.yaml
  partitions: []
  schema_ref: schemas.3A.yaml#/policy/zone_mixture_policy_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#zone_mixture_policy
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Governed escalation policy describing theta thresholds and decision reasons.'
- output_id: country_zone_alphas
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 3A
  path_template: config/layer1/3A/allocation/country_zone_alphas.yaml
  partitions: []
  schema_ref: schemas.3A.yaml#/policy/country_zone_alphas_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#country_zone_alphas
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Dirichlet concentration priors per countrytzid used by S2.'
- output_id: zone_floor_policy
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 3A
  path_template: config/layer1/3A/allocation/zone_floor_policy.yaml
  partitions: []
  schema_ref: schemas.3A.yaml#/policy/zone_floor_policy_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#zone_floor_policy
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Global zone floor and bump rules.'
- output_id: s0_gate_receipt_3A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3A
  path_template: data/layer1/3A/s0_gate_receipt/fingerprint={manifest_fingerprint}/s0_gate_receipt_3A.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3A.yaml#/validation/s0_gate_receipt_3A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s0_gate_receipt_3A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Gate descriptor proving upstream PASS status and sealed policy set.'
- output_id: sealed_inputs_3A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3A
  path_template: data/layer1/3A/sealed_inputs/fingerprint={manifest_fingerprint}/sealed_inputs_3A.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3A.yaml#/validation/sealed_inputs_3A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#sealed_inputs_3A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: 'Sealed inventory of artefacts authorised for Segment 3A.'
- output_id: s1_escalation_queue
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3A
  path_template: data/layer1/3A/s1_escalation_queue/seed={seed}/fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3A.yaml#/plan/s1_escalation_queue
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s1_escalation_queue
  primary_key:
  - merchant_id
  - legal_country_iso
  join_keys:
  - merchant_id
  - legal_country_iso
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: 'Per-merchant escalation decisions and totals.'
- output_id: s2_country_zone_priors
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 3A
  path_template: data/layer1/3A/s2_country_zone_priors/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.3A.yaml#/plan/s2_country_zone_priors
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s2_country_zone_priors
  primary_key:
  - country_iso
  - tzid
  join_keys:
  - country_iso
  - tzid
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Parameter-scoped Dirichlet -vectors per countrytzid.'
- output_id: s3_zone_shares
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3A
  path_template: data/layer1/3A/s3_zone_shares/seed={seed}/fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3A.yaml#/plan/s3_zone_shares
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s3_zone_shares
  primary_key:
  - merchant_id
  - legal_country_iso
  - tzid
  join_keys:
  - merchant_id
  - legal_country_iso
  - tzid
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: 'Dirichlet share draws per merchantcountryzone.'
- output_id: s4_zone_counts
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3A
  path_template: data/layer1/3A/s4_zone_counts/seed={seed}/fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3A.yaml#/plan/s4_zone_counts
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s4_zone_counts
  primary_key:
  - merchant_id
  - legal_country_iso
  - tzid
  join_keys:
  - merchant_id
  - legal_country_iso
  - tzid
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: 'Integer outlet counts per merchantcountryzone after floor/bump.'
- output_id: zone_alloc
  class: surface
  exposure: external
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3A
  path_template: data/layer1/3A/zone_alloc/seed={seed}/fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3A.yaml#/egress/zone_alloc
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#zone_alloc
  primary_key:
  - merchant_id
  - legal_country_iso
  - tzid
  join_keys:
  - merchant_id
  - legal_country_iso
  - tzid
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: 'Cross-layer zone allocation egress for routing segment.'
- output_id: zone_alloc_universe_hash
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3A
  path_template: data/layer1/3A/zone_universe/fingerprint={manifest_fingerprint}/zone_alloc_universe_hash.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3A.yaml#/validation/zone_alloc_universe_hash
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#zone_alloc_universe_hash
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: 'Digest summary tying priors/policies to the published zone allocation.'
- output_id: s6_validation_report_3A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3A
  path_template: data/layer1/3A/s6_validation_report/fingerprint={manifest_fingerprint}/report.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3A.yaml#/validation/s6_validation_report_3A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s6_validation_report_3A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: 'Structural validation report emitted by 3A.S6.'
- output_id: s6_issue_table_3A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3A
  path_template: data/layer1/3A/s6_issues/fingerprint={manifest_fingerprint}/issues.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3A.yaml#/validation/s6_issue_table_3A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s6_issue_table_3A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: 'Per-issue findings emitted by 3A.S6.'
- output_id: s6_receipt_3A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3A
  path_template: data/layer1/3A/s6_receipt/fingerprint={manifest_fingerprint}/s6_receipt.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3A.yaml#/validation/s6_receipt_3A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s6_receipt_3A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: 'Compact validation receipt capturing S6 outcomes.'
- output_id: validation_bundle_3A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3A
  path_template: data/layer1/3A/validation/fingerprint={manifest_fingerprint}/
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/validation/validation_bundle_index_3A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#validation_bundle_3A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Fingerprint-scoped validation bundle for Segment 3A.'
- output_id: validation_passed_flag_3A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3A
  path_template: data/layer1/3A/validation/fingerprint={manifest_fingerprint}/_passed.flag
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/validation/passed_flag_3A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#validation_passed_flag_3A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'HashGate PASS flag accompanying the 3A validation bundle.'
- output_id: segment_state_runs_3A
  class: stream
  exposure: internal
  scope: scope_global
  owner_segment: 3A
  path_template: reports/l1/segment_states/segment_state_runs.jsonl
  partitions: []
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#segment_state_runs
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Layer-1 segment-state run-report (JSONL), one row per state invocation.'
  notes: 'Dictionary id segment_state_runs; namespaced here to enforce unique output_id.'
- output_id: s1_run_report_3A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3A
  path_template: reports/l1/3A/s1_escalation/seed={seed}/fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s1_run_report_3A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: 'Run report for 3A.S1 escalation queue.'
- output_id: s2_run_report_3A
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 3A
  path_template: reports/l1/3A/s2_priors/parameter_hash={parameter_hash}/run_report.json
  partitions:
  - parameter_hash
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s2_run_report_3A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Run report for 3A.S2 priors stage.'
- output_id: s3_run_report_3A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3A
  path_template: reports/l1/3A/s3_zone_shares/seed={seed}/fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s3_run_report_3A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: 'Run report for 3A.S3 zone share sampling.'
- output_id: s4_run_report_3A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3A
  path_template: reports/l1/3A/s4_zone_counts/seed={seed}/fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s4_run_report_3A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: 'Run report for 3A.S4 zone count integerisation.'
- output_id: s5_run_report_3A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3A
  path_template: reports/l1/3A/s5_zone_alloc/seed={seed}/fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s5_run_report_3A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: 'Run report for 3A.S5 zone allocation egress.'
- output_id: s6_run_report_3A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3A
  path_template: reports/l1/3A/s6_validation/seed={seed}/fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s6_run_report_3A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: 'Run report for 3A.S6 validation.'
- output_id: s7_run_report_3A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3A
  path_template: reports/l1/3A/s7_bundle/seed={seed}/fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s7_run_report_3A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: 'Run report for 3A.S7 validation bundle.'
- output_id: mcc_channel_rules
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 3B
  path_template: config/layer1/3B/virtual/mcc_channel_rules.yaml
  partitions: []
  schema_ref: schemas.3B.yaml#/policy/virtual_rules_policy_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#mcc_channel_rules
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Governed MCCchannel ladder that decides whether a merchant joins the virtual overlay.'
- output_id: virtual_settlement_coords
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 3B
  path_template: artefacts/virtual/virtual_settlement_coords.csv
  partitions: []
  schema_ref: schemas.3B.yaml#/reference/virtual_settlement_coords_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#virtual_settlement_coords
  primary_key:
  - merchant_id
  join_keys:
  - merchant_id
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Evidence-backed settlement coordinates keyed by merchant, used to seed S1 settlement nodes.'
- output_id: cdn_country_weights
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 3B
  path_template: config/layer1/3B/virtual/cdn_country_weights.yaml
  partitions: []
  schema_ref: schemas.3B.yaml#/policy/cdn_country_weights_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#cdn_country_weights
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Normalised CDN country weights plus integer edge scale E for catalogue expansion.'
- output_id: virtual_validation_policy
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 3B
  path_template: config/layer1/3B/virtual/virtual_validation.yml
  partitions: []
  schema_ref: schemas.3B.yaml#/policy/virtual_validation_policy_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#virtual_validation_policy
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'IP-country mix and settlement cut-off tolerances applied by virtual validation tests.'
- output_id: s0_gate_receipt_3B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/s0_gate_receipt/fingerprint={manifest_fingerprint}/s0_gate_receipt_3B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/validation/s0_gate_receipt_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#s0_gate_receipt_3B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Gate receipt capturing upstream PASS status, sealed policy set and authoritative digests.'
- output_id: sealed_inputs_3B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/sealed_inputs/fingerprint={manifest_fingerprint}/sealed_inputs_3B.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/validation/sealed_inputs_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#sealed_inputs_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: 'Inventory of every artefact authorised for the manifest.'
- output_id: virtual_classification_3B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3B
  path_template: data/layer1/3B/virtual_classification/seed={seed}/fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/plan/virtual_classification_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#virtual_classification_3B
  primary_key:
  - merchant_id
  join_keys:
  - merchant_id
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: 'Merchant-level classification surface with closed vocabulary reason codes.'
- output_id: virtual_settlement_3B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3B
  path_template: data/layer1/3B/virtual_settlement/seed={seed}/fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/plan/virtual_settlement_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#virtual_settlement_3B
  primary_key:
  - merchant_id
  join_keys:
  - merchant_id
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: 'One settlement node per virtual merchant with tzid semantics and evidence URLs.'
- output_id: edge_catalogue_3B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3B
  path_template: data/layer1/3B/edge_catalogue/seed={seed}/fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/plan/edge_catalogue_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#edge_catalogue_3B
  primary_key:
  - merchant_id
  - edge_id
  join_keys:
  - merchant_id
  - edge_id
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: 'Per-edge geometry, tz semantics and weights for all virtual merchants.'
- output_id: edge_catalogue_index_3B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3B
  path_template: data/layer1/3B/edge_catalogue_index/seed={seed}/fingerprint={manifest_fingerprint}/edge_catalogue_index_3B.parquet
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/plan/edge_catalogue_index_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#edge_catalogue_index_3B
  primary_key:
  - scope
  - merchant_id
  join_keys:
  - scope
  - merchant_id
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: 'Digest summary and per-merchant counts for the edge catalogue.'
- output_id: edge_alias_blob_3B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3B
  path_template: data/layer1/3B/edge_alias_blob/seed={seed}/fingerprint={manifest_fingerprint}/edge_alias_blob_3B.bin
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/binary/edge_alias_blob_header_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#edge_alias_blob_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: 'Contiguous alias blob covering every virtual merchant edge distribution.'
- output_id: edge_alias_index_3B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3B
  path_template: data/layer1/3B/edge_alias_index/seed={seed}/fingerprint={manifest_fingerprint}/edge_alias_index_3B.parquet
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/plan/edge_alias_index_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#edge_alias_index_3B
  primary_key:
  - scope
  - merchant_id
  join_keys:
  - scope
  - merchant_id
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: 'Index and checksum metadata for locating merchant alias segments inside the blob.'
- output_id: edge_universe_hash_3B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/edge_universe_hash/fingerprint={manifest_fingerprint}/edge_universe_hash_3B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/validation/edge_universe_hash_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#edge_universe_hash_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: 'Fingerprint-scoped hash tying cdn weights, edge catalogue/index and alias outputs.'
- output_id: gamma_draw_log_3B
  class: stream
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3B
  path_template: logs/layer1/3B/gamma_draw/seed={seed}/fingerprint={manifest_fingerprint}/gamma_draw_log_3B.jsonl
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/validation/gamma_draw_log_entry_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#gamma_draw_log_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: 'Structured Philox audit for any gamma draws in the virtual pipeline.'
- output_id: virtual_routing_policy_3B
  class: surface
  exposure: external
  scope: scope_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/virtual_routing_policy/fingerprint={manifest_fingerprint}/virtual_routing_policy_3B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/egress/virtual_routing_policy_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#virtual_routing_policy_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: 'Dual-TZ routing contract that tells 2B how to consume the virtual artefacts.'
- output_id: virtual_validation_contract_3B
  class: surface
  exposure: external
  scope: scope_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/virtual_validation_contract/fingerprint={manifest_fingerprint}/virtual_validation_contract_3B.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/egress/virtual_validation_contract_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#virtual_validation_contract_3B
  primary_key:
  - test_id
  join_keys:
  - test_id
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: 'Declarative suite of validation tests (IP mix, cut-offs, alias health) scoped to the manifest.'
- output_id: s4_run_summary_3B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/s4_run_summary/fingerprint={manifest_fingerprint}/s4_run_summary_3B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/validation/s4_run_summary_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#s4_run_summary_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: 'Optional S4 receipt capturing policy digests and status.'
- output_id: validation_bundle_3B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/validation/fingerprint={manifest_fingerprint}/
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/validation/validation_bundle_index_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#validation_bundle_3B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Directory artefact containing manifest, digests and structural or RNG evidence.'
- output_id: validation_bundle_index_3B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/validation/fingerprint={manifest_fingerprint}/index.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/validation/validation_bundle_index_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#validation_bundle_index_3B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'index.json enumerating evidence files plus their SHA-256 digests.'
- output_id: validation_passed_flag_3B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/validation/fingerprint={manifest_fingerprint}/_passed.flag
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/validation/passed_flag_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#validation_passed_flag_3B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'ASCII _passed.flag storing the hash of the validation bundle.'
- output_id: s5_manifest_3B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/validation/fingerprint={manifest_fingerprint}/s5_manifest_3B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/validation/s5_manifest_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#s5_manifest_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: 'Optional S5 manifest summarising identity, digests and validator outcomes; lives inside the bundle.'
- output_id: s1_run_report_3B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3B
  path_template: reports/l1/3B/s1_virtuals/seed={seed}/fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#s1_run_report_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: 'Run report for 3B.S1 virtual classification.'
- output_id: s2_run_report_3B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3B
  path_template: reports/l1/3B/s2_edges/seed={seed}/fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#s2_run_report_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: 'Run report for 3B.S2 edge catalogue.'
- output_id: s3_run_report_3B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3B
  path_template: reports/l1/3B/s3_alias/seed={seed}/fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#s3_run_report_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: 'Run report for 3B.S3 alias packaging.'
- output_id: s4_run_report_3B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3B
  path_template: reports/l1/3B/s4_routing/seed={seed}/fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#s4_run_report_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: 'Run report for 3B.S4 routing policy compilation.'
- output_id: s5_run_report_3B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed
  owner_segment: 3B
  path_template: reports/l1/3B/s5_validation/seed={seed}/fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#s5_run_report_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: 'Run report for 3B.S5 validation bundle.'
- output_id: s0_gate_receipt_5A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: data/layer2/5A/s0_gate_receipt/fingerprint={manifest_fingerprint}/s0_gate_receipt_5A.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.5A.yaml#/validation/s0_gate_receipt_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#s0_gate_receipt_5A
  primary_key:
  - manifest_fingerprint
  join_keys:
  - manifest_fingerprint
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Fingerprint-scoped S0 receipt confirming upstream gates and sealed inputs.'
- output_id: sealed_inputs_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: data/layer2/5A/sealed_inputs/fingerprint={manifest_fingerprint}/sealed_inputs_5A.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.5A.yaml#/validation/sealed_inputs_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#sealed_inputs_5A
  primary_key:
  - manifest_fingerprint
  - owner_segment
  - artifact_id
  join_keys:
  - manifest_fingerprint
  - owner_segment
  - artifact_id
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: 'Inventory of sealed artefacts 5A is allowed to read for a fingerprint.'
- output_id: scenario_manifest_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: data/layer2/5A/scenario_manifest/fingerprint={manifest_fingerprint}/scenario_manifest_5A.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.5A.yaml#/validation/scenario_manifest_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#scenario_manifest_5A
  primary_key:
  - manifest_fingerprint
  - scenario_id
  join_keys:
  - manifest_fingerprint
  - scenario_id
  availability: optional
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: 'Scenario-level manifest projection derived from sealed inputs.'
- output_id: merchant_zone_profile_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: data/layer2/5A/merchant_zone_profile/fingerprint={manifest_fingerprint}/merchant_zone_profile_5A.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.5A.yaml#/model/merchant_zone_profile_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#merchant_zone_profile_5A
  primary_key:
  - merchant_id
  - legal_country_iso
  - tzid
  join_keys:
  - merchant_id
  - legal_country_iso
  - tzid
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: 'Merchantzone demand profile including class and scale for the local week.'
- output_id: merchant_class_profile_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: data/layer2/5A/merchant_class_profile/fingerprint={manifest_fingerprint}/merchant_class_profile_5A.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.5A.yaml#/model/merchant_class_profile_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#merchant_class_profile_5A
  primary_key:
  - merchant_id
  join_keys:
  - merchant_id
  availability: optional
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: 'Merchant-level aggregate class profile derived deterministically from zone profiles.'
- output_id: shape_grid_definition_5A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_scenario_id
  owner_segment: 5A
  path_template: data/layer2/5A/shape_grid_definition/parameter_hash={parameter_hash}/scenario_id={scenario_id}/shape_grid_definition_5A.parquet
  partitions:
  - parameter_hash
  - scenario_id
  schema_ref: schemas.5A.yaml#/model/shape_grid_definition_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#shape_grid_definition_5A
  primary_key:
  - parameter_hash
  - scenario_id
  - bucket_index
  join_keys:
  - parameter_hash
  - scenario_id
  - bucket_index
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Local-week time grid definition for shapes under a parameter pack and scenario.'
- output_id: class_zone_shape_5A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_scenario_id
  owner_segment: 5A
  path_template: data/layer2/5A/class_zone_shape/parameter_hash={parameter_hash}/scenario_id={scenario_id}/class_zone_shape_5A.parquet
  partitions:
  - parameter_hash
  - scenario_id
  schema_ref: schemas.5A.yaml#/model/class_zone_shape_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#class_zone_shape_5A
  primary_key:
  - parameter_hash
  - scenario_id
  - demand_class
  - legal_country_iso
  - tzid
  - bucket_index
  join_keys:
  - parameter_hash
  - scenario_id
  - demand_class
  - legal_country_iso
  - tzid
  - bucket_index
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Normalised weekly shape vectors per classzone (and optional channel) for each scenario.'
- output_id: class_shape_catalogue_5A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_scenario_id
  owner_segment: 5A
  path_template: data/layer2/5A/class_shape_catalogue/parameter_hash={parameter_hash}/scenario_id={scenario_id}/class_shape_catalogue_5A.parquet
  partitions:
  - parameter_hash
  - scenario_id
  schema_ref: schemas.5A.yaml#/model/class_shape_catalogue_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#class_shape_catalogue_5A
  primary_key:
  - parameter_hash
  - scenario_id
  - demand_class
  join_keys:
  - parameter_hash
  - scenario_id
  - demand_class
  availability: optional
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Optional base shape catalogue per class (and optional channel) for each scenario.'
- output_id: merchant_zone_baseline_local_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_scenario_id
  owner_segment: 5A
  path_template: data/layer2/5A/merchant_zone_baseline_local/fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/merchant_zone_baseline_local_5A.parquet
  partitions:
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5A.yaml#/model/merchant_zone_baseline_local_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#merchant_zone_baseline_local_5A
  primary_key:
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - legal_country_iso
  - tzid
  - bucket_index
  join_keys:
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - legal_country_iso
  - tzid
  - bucket_index
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: 'Merchantzone baseline local-week intensities per scenario.'
- output_id: class_zone_baseline_local_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_scenario_id
  owner_segment: 5A
  path_template: data/layer2/5A/class_zone_baseline_local/fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/class_zone_baseline_local_5A.parquet
  partitions:
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5A.yaml#/model/class_zone_baseline_local_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#class_zone_baseline_local_5A
  primary_key:
  - manifest_fingerprint
  - scenario_id
  - demand_class
  - legal_country_iso
  - tzid
  - bucket_index
  join_keys:
  - manifest_fingerprint
  - scenario_id
  - demand_class
  - legal_country_iso
  - tzid
  - bucket_index
  availability: optional
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: 'Optional classzone baseline local-week intensities per scenario.'
- output_id: merchant_zone_baseline_utc_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_scenario_id
  owner_segment: 5A
  path_template: data/layer2/5A/merchant_zone_baseline_utc/fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/merchant_zone_baseline_utc_5A.parquet
  partitions:
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5A.yaml#/model/merchant_zone_baseline_utc_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#merchant_zone_baseline_utc_5A
  primary_key:
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - legal_country_iso
  - tzid
  - utc_bucket_index
  join_keys:
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - legal_country_iso
  - tzid
  - utc_bucket_index
  availability: optional
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: 'Optional merchantzone baseline intensities expressed on a UTC grid.'
- output_id: merchant_zone_scenario_local_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_scenario_id
  owner_segment: 5A
  path_template: data/layer2/5A/merchant_zone_scenario_local/fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/merchant_zone_scenario_local_5A.parquet
  partitions:
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5A.yaml#/model/merchant_zone_scenario_local_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#merchant_zone_scenario_local_5A
  primary_key:
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - legal_country_iso
  - tzid
  - local_horizon_bucket_index
  join_keys:
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - legal_country_iso
  - tzid
  - local_horizon_bucket_index
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: 'Scenario-adjusted local-week intensities per merchantzonehorizon bucket.'
- output_id: merchant_zone_overlay_factors_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_scenario_id
  owner_segment: 5A
  path_template: data/layer2/5A/merchant_zone_overlay_factors/fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/merchant_zone_overlay_factors_5A.parquet
  partitions:
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5A.yaml#/model/merchant_zone_overlay_factors_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#merchant_zone_overlay_factors_5A
  primary_key:
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - legal_country_iso
  - tzid
  - local_horizon_bucket_index
  join_keys:
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - legal_country_iso
  - tzid
  - local_horizon_bucket_index
  availability: optional
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: 'Optional multiplicative overlay factors per merchantzonehorizon bucket.'
- output_id: merchant_zone_scenario_utc_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_scenario_id
  owner_segment: 5A
  path_template: data/layer2/5A/merchant_zone_scenario_utc/fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/merchant_zone_scenario_utc_5A.parquet
  partitions:
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5A.yaml#/model/merchant_zone_scenario_utc_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#merchant_zone_scenario_utc_5A
  primary_key:
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - legal_country_iso
  - tzid
  - utc_horizon_bucket_index
  join_keys:
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - legal_country_iso
  - tzid
  - utc_horizon_bucket_index
  availability: optional
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: 'Scenario-adjusted UTC intensities per merchantzoneUTC horizon bucket.'
- output_id: validation_bundle_index_5A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: data/layer2/5A/validation/fingerprint={manifest_fingerprint}/validation_bundle_index_5A.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/validation/validation_bundle_index_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#validation_bundle_index_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Index and manifest for the 5A validation bundle.'
- output_id: validation_report_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: data/layer2/5A/validation/fingerprint={manifest_fingerprint}/reports/validation_report_5A.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/validation/validation_report_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#validation_report_5A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: 'Human/machine readable validation report for 5A.'
- output_id: validation_issue_table_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: data/layer2/5A/validation/fingerprint={manifest_fingerprint}/issues/validation_issue_table_5A.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/validation/validation_issue_table_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#validation_issue_table_5A
  primary_key: []
  join_keys: []
  availability: optional
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: 'Optional structured list of validation issues for 5A.'
- output_id: validation_passed_flag_5A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: data/layer2/5A/validation/fingerprint={manifest_fingerprint}/_passed.flag
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/validation/passed_flag_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#validation_passed_flag_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Pass/fail flag for the 5A validation bundle.'
- output_id: segment_state_runs_5A
  class: stream
  exposure: internal
  scope: scope_global
  owner_segment: 5A
  path_template: reports/l2/segment_states/segment_state_runs.jsonl
  partitions: []
  schema_ref: schemas.layer2.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#segment_state_runs
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Layer-2 segment-state run-report (JSONL), one row per state invocation.'
  notes: 'Dictionary id segment_state_runs; namespaced here to enforce unique output_id.'
- output_id: s1_run_report_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: reports/l2/5A/s1_profiles/fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#s1_run_report_5A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: 'Run report for 5A.S1 demand profiles.'
- output_id: s2_run_report_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: reports/l2/5A/s2_shapes/fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#s2_run_report_5A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: 'Run report for 5A.S2 shape synthesis.'
- output_id: s3_run_report_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: reports/l2/5A/s3_baselines/fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#s3_run_report_5A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: 'Run report for 5A.S3 baseline intensity synthesis.'
- output_id: s4_run_report_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: reports/l2/5A/s4_overlays/fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#s4_run_report_5A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: 'Run report for 5A.S4 scenario overlays.'
- output_id: s5_run_report_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: reports/l2/5A/s5_validation/fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#s5_run_report_5A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: 'Run report for 5A.S5 validation bundle.'
- output_id: s0_gate_receipt_5B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5B
  path_template: data/layer2/5B/s0_gate_receipt/fingerprint={manifest_fingerprint}/s0_gate_receipt_5B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.5B.yaml#/validation/s0_gate_receipt_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#s0_gate_receipt_5B
  primary_key:
  - manifest_fingerprint
  join_keys:
  - manifest_fingerprint
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Fingerprint-scoped receipt confirming upstream PASS gates and sealed inputs.'
- output_id: sealed_inputs_5B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5B
  path_template: data/layer2/5B/sealed_inputs/fingerprint={manifest_fingerprint}/sealed_inputs_5B.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.5B.yaml#/validation/sealed_inputs_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#sealed_inputs_5B
  primary_key:
  - manifest_fingerprint
  - owner_segment
  - artifact_id
  join_keys:
  - manifest_fingerprint
  - owner_segment
  - artifact_id
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: 'Inventory of artefacts 5B is allowed to read for a fingerprint.'
- output_id: s1_time_grid_5B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_scenario_id
  owner_segment: 5B
  path_template: data/layer2/5B/s1_time_grid/fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/s1_time_grid_5B.parquet
  partitions:
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5B.yaml#/model/s1_time_grid_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#s1_time_grid_5B
  primary_key:
  - manifest_fingerprint
  - scenario_id
  - bucket_index
  join_keys:
  - manifest_fingerprint
  - scenario_id
  - bucket_index
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: 'Canonical scenario-level time grid for arrivals.'
- output_id: s1_grouping_5B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_scenario_id
  owner_segment: 5B
  path_template: data/layer2/5B/s1_grouping/fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/s1_grouping_5B.parquet
  partitions:
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5B.yaml#/model/s1_grouping_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#s1_grouping_5B
  primary_key:
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - zone_representation
  - channel_group
  join_keys:
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - zone_representation
  - channel_group
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: 'Deterministic mapping from merchantzonechannel to latent group IDs.'
- output_id: s2_realised_intensity_5B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed_scenario_id
  owner_segment: 5B
  path_template: data/layer2/5B/s2_realised_intensity/seed={seed}/fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/s2_realised_intensity_5B.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5B.yaml#/model/s2_realised_intensity_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#s2_realised_intensity_5B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - zone_representation
  - channel_group
  - bucket_index
  join_keys:
  - seed
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - zone_representation
  - channel_group
  - bucket_index
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: 'Realised intensities _realised per entitybucketscenarioseed.'
- output_id: s2_latent_field_5B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed_scenario_id
  owner_segment: 5B
  path_template: data/layer2/5B/s2_latent_field/seed={seed}/fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/s2_latent_field_5B.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5B.yaml#/model/s2_latent_field_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#s2_latent_field_5B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - group_id
  - bucket_index
  join_keys:
  - seed
  - manifest_fingerprint
  - scenario_id
  - group_id
  - bucket_index
  availability: optional
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: 'Optional per-group latent field table for diagnostics.'
- output_id: s3_bucket_counts_5B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed_scenario_id
  owner_segment: 5B
  path_template: data/layer2/5B/s3_bucket_counts/seed={seed}/fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/s3_bucket_counts_5B.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5B.yaml#/model/s3_bucket_counts_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#s3_bucket_counts_5B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - zone_representation
  - channel_group
  - bucket_index
  join_keys:
  - seed
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - zone_representation
  - channel_group
  - bucket_index
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: 'Integer counts per entitybucketscenarioseed.'
- output_id: arrival_events_5B
  class: surface
  exposure: external
  scope: scope_manifest_fingerprint_seed_scenario_id
  owner_segment: 5B
  path_template: data/layer2/5B/arrival_events/seed={seed}/fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5B.yaml#/egress/s4_arrival_events_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#arrival_events_5B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - arrival_seq
  join_keys:
  - seed
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - arrival_seq
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: 'Canonical arrival skeleton stream per scenarioseed (final egress).'
- output_id: s4_arrival_summary_5B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed_scenario_id
  owner_segment: 5B
  path_template: data/layer2/5B/arrival_summary/seed={seed}/fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/s4_arrival_summary_5B.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5B.yaml#/diagnostics/s4_arrival_summary_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#s4_arrival_summary_5B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - zone_representation
  - channel_group
  - bucket_index
  join_keys:
  - seed
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - zone_representation
  - channel_group
  - bucket_index
  availability: optional
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: 'Optional per-entity/bucket arrival summaries for observability.'
- output_id: s4_arrival_anomalies_5B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_seed_scenario_id
  owner_segment: 5B
  path_template: data/layer2/5B/arrival_anomalies/seed={seed}/fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/s4_arrival_anomalies_5B.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5B.yaml#/diagnostics/s4_arrival_anomalies_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#s4_arrival_anomalies_5B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - anomaly_id
  join_keys:
  - seed
  - manifest_fingerprint
  - scenario_id
  - anomaly_id
  availability: optional
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: 'Optional anomaly log for arrival routing/time-placement diagnostics.'
- output_id: validation_bundle_index_5B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5B
  path_template: data/layer2/5B/validation/fingerprint={manifest_fingerprint}/index.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/validation/validation_bundle_index_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#validation_bundle_index_5B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Index/manifest for the 5B validation bundle (fingerprint scope).'
- output_id: validation_report_5B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5B
  path_template: data/layer2/5B/validation/fingerprint={manifest_fingerprint}/validation_report_5B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/validation/validation_report_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#validation_report_5B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: 'Human/machine readable 5B validation report.'
- output_id: validation_issue_table_5B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5B
  path_template: data/layer2/5B/validation/fingerprint={manifest_fingerprint}/validation_issue_table_5B.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/validation/validation_issue_table_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#validation_issue_table_5B
  primary_key: []
  join_keys: []
  availability: optional
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: 'Optional structured issue table for 5B validation findings.'
- output_id: validation_passed_flag_5B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5B
  path_template: data/layer2/5B/validation/fingerprint={manifest_fingerprint}/_passed.flag
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/validation/passed_flag_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#validation_passed_flag_5B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'HashGate flag proving the validation bundle digest for a fingerprint.'
- output_id: segment_state_runs_5B
  class: stream
  exposure: internal
  scope: scope_global
  owner_segment: 5B
  path_template: reports/l2/segment_states/segment_state_runs.jsonl
  partitions: []
  schema_ref: schemas.layer2.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#segment_state_runs
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Global run-report journal for layer2 segment states.'
  notes: 'Dictionary id segment_state_runs; namespaced here to enforce unique output_id.'
- output_id: s0_gate_receipt_6A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6A
  path_template: data/layer3/6A/gate_receipt/fingerprint={manifest_fingerprint}/s0_gate_receipt_6A.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/gate/6A/s0_gate_receipt_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s0_gate_receipt_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Layer-3 / Segment 6A gate receipt. One row per manifest_fingerprint, summarising upstream gates and the sealed input universe for 6A.'
- output_id: sealed_inputs_6A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6A
  path_template: data/layer3/6A/sealed_inputs/fingerprint={manifest_fingerprint}/sealed_inputs_6A.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/gate/6A/sealed_inputs_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#sealed_inputs_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Manifest of all artefacts 6A is authorised to depend on for a given manifest_fingerprint, with roles, digests, and read scopes.'
- output_id: s1_party_base_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s1_party_base_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s1_party_base_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s1/party_base
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s1_party_base_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Base party/customer universe for Layer-3 / Segment 6A. One row per party per (manifest_fingerprint, seed), including type, home geography and static segment attributes.'
- output_id: s1_party_summary_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s1_party_summary_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s1_party_summary_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s1/party_summary
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s1_party_summary_6A
  primary_key: []
  join_keys: []
  availability: optional
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Aggregate view of the 6A party base, providing party counts by geography, segment and type for diagnostics and downstream sizing.'
- output_id: s2_account_base_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s2_account_base_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s2_account_base_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s2/account_base
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s2_account_base_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Account and product universe for Layer-3 / Segment 6A. One row per account per (manifest_fingerprint, seed), including owner references, account type, currency and static account attributes.'
- output_id: s2_party_product_holdings_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s2_party_product_holdings_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s2_party_product_holdings_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s2/party_product_holdings
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s2_party_product_holdings_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Per-party product holdings for Layer-3 / Segment 6A, derived from s2_account_base_6A and s1_party_base_6A. One row per party and product grouping (e.g. account_type), with account counts.'
- output_id: s2_merchant_account_base_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s2_merchant_account_base_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s2_merchant_account_base_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s2/merchant_account_base
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s2_merchant_account_base_6A
  primary_key: []
  join_keys: []
  availability: optional
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Merchant-centric view of accounts where a merchant is an owner (e.g. settlement or acquiring accounts). Pure subset of s2_account_base_6A.'
- output_id: s2_account_summary_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s2_account_summary_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s2_account_summary_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s2/account_summary
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s2_account_summary_6A
  primary_key: []
  join_keys: []
  availability: optional
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Aggregate view of the 6A account base, providing account counts by geography, segment and account type for diagnostics and sizing.'
- output_id: s3_instrument_base_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s3_instrument_base_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s3_instrument_base_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s3/instrument_base
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s3_instrument_base_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Instrument and payment-credential universe for Layer-3 / Segment 6A. One row per instrument per (manifest_fingerprint, seed), including owner account, owner party/merchant (if modelled), instrument type, scheme/network, masked identifier, expiry, and static flags.'
- output_id: s3_account_instrument_links_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s3_account_instrument_links_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s3_account_instrument_links_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s3/account_instrument_links
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s3_account_instrument_links_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Per-account instrument linkage surface for Layer-3 / Segment 6A. Derived from s3_instrument_base_6A and s2_account_base_6A; provides either per-instrument or aggregated per-account, per-instrument-type views of instrument ownership.'
- output_id: s3_party_instrument_holdings_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s3_party_instrument_holdings_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s3_party_instrument_holdings_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s3/party_instrument_holdings
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s3_party_instrument_holdings_6A
  primary_key: []
  join_keys: []
  availability: optional
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Per-party instrument holdings for Layer-3 / Segment 6A, derived from s3_instrument_base_6A and s1_party_base_6A; one row per (party_id, instrument grouping) with instrument_count.'
- output_id: s3_instrument_summary_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s3_instrument_summary_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s3_instrument_summary_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s3/instrument_summary
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s3_instrument_summary_6A
  primary_key: []
  join_keys: []
  availability: optional
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Aggregate instrument diagnostics for Layer-3 / Segment 6A, providing instrument counts by geography, segment, account_type and instrument_type.'
- output_id: s4_device_base_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s4_device_base_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s4_device_base_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s4/device_base
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s4_device_base_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Device universe for Layer-3 / Segment 6A. One row per device per (manifest_fingerprint, seed), with device classification, primary owner context and static device risk/capability flags.'
- output_id: s4_ip_base_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s4_ip_base_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s4_ip_base_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s4/ip_base
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s4_ip_base_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'IP / network endpoint universe for Layer-3 / Segment 6A. One row per IP/endpoint per (manifest_fingerprint, seed), including masked representation, ip_type, asn_class, geo hints and static risk tags.'
- output_id: s4_device_links_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s4_device_links_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s4_device_links_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s4/device_links
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s4_device_links_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Device-to-entity edges for Layer-3 / Segment 6A. Links each device_id to one or more parties/accounts/instruments/merchants with a link_role describing the semantics.'
- output_id: s4_ip_links_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s4_ip_links_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s4_ip_links_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s4/ip_links
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s4_ip_links_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'IP-to-device/entity edges for Layer-3 / Segment 6A. Links each ip_id to one or more devices/parties/merchants with a link_role describing the semantics.'
- output_id: s4_entity_neighbourhoods_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s4_entity_neighbourhoods_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s4_entity_neighbourhoods_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s4/entity_neighbourhoods
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s4_entity_neighbourhoods_6A
  primary_key: []
  join_keys: []
  availability: optional
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Per-entity graph neighbourhood metrics for Layer-3 / Segment 6A (devices per party, IPs per device, shared-device/shared-IP degrees, etc.), derived from S4 base and link datasets.'
- output_id: s4_network_summary_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s4_network_summary_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s4_network_summary_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s4/network_summary
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s4_network_summary_6A
  primary_key: []
  join_keys: []
  availability: optional
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Aggregate graph diagnostics for Layer-3 / Segment 6A: degree distributions and sharing summaries per region/segment/account_type and globally.'
- output_id: s5_party_fraud_roles_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s5_party_fraud_roles_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s5_party_fraud_roles_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s5/party_fraud_roles
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s5_party_fraud_roles_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Static fraud posture for parties in Layer-3 / Segment 6A. One row per party per (manifest_fingerprint, seed).'
- output_id: s5_account_fraud_roles_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s5_account_fraud_roles_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s5_account_fraud_roles_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s5/account_fraud_roles
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s5_account_fraud_roles_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Static fraud posture for accounts in Layer-3 / Segment 6A. One row per account per (manifest_fingerprint, seed).'
- output_id: s5_merchant_fraud_roles_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s5_merchant_fraud_roles_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s5_merchant_fraud_roles_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s5/merchant_fraud_roles
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s5_merchant_fraud_roles_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Static fraud posture for merchants in Layer-3 / Segment 6A. One row per merchant, keyed by merchant_id.'
- output_id: s5_device_fraud_roles_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s5_device_fraud_roles_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s5_device_fraud_roles_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s5/device_fraud_roles
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s5_device_fraud_roles_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Static fraud posture for devices in Layer-3 / Segment 6A. One row per device per (manifest_fingerprint, seed).'
- output_id: s5_ip_fraud_roles_6A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed
  owner_segment: 6A
  path_template: data/layer3/6A/s5_ip_fraud_roles_6A/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/s5_ip_fraud_roles_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s5/ip_fraud_roles
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s5_ip_fraud_roles_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Static fraud posture for IPs/endpoints in Layer-3 / Segment 6A. One row per ip_id per (manifest_fingerprint, seed).'
- output_id: s5_validation_report_6A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6A
  path_template: data/layer3/6A/validation/fingerprint={manifest_fingerprint}/s5_validation_report_6A.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/validation/6A/validation_report_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s5_validation_report_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Segment-level validation report for Layer-3 / Segment 6A, summarising the results of S5 checks across S1S4 and S5 fraud roles.'
- output_id: s5_issue_table_6A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6A
  path_template: data/layer3/6A/validation/fingerprint={manifest_fingerprint}/s5_issue_table_6A.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/validation/6A/validation_issue_table_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s5_issue_table_6A
  primary_key: []
  join_keys: []
  availability: optional
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Row-level issue table for 6A validation, containing one row per failing/borderline check instance.'
- output_id: validation_bundle_index_6A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6A
  path_template: data/layer3/6A/validation/fingerprint={manifest_fingerprint}/validation_bundle_index_6A.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/validation/6A/validation_bundle_index_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#validation_bundle_index_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Index for the Layer-3 / Segment 6A validation bundle, listing all evidence files and their SHA-256 digests.'
- output_id: validation_passed_flag_6A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6A
  path_template: data/layer3/6A/validation/fingerprint={manifest_fingerprint}/_passed.flag
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/validation/6A/passed_flag_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#validation_passed_flag_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'HashGate flag for Layer-3 / Segment 6A. Contains the SHA-256 digest over the validation bundle for this manifest_fingerprint.'
- output_id: s0_gate_receipt_6B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6B
  path_template: data/layer3/6B/gate_receipt/fingerprint={manifest_fingerprint}/s0_gate_receipt_6B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/gate/6B/s0_gate_receipt_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s0_gate_receipt_6B
  primary_key:
  - manifest_fingerprint
  join_keys:
  - manifest_fingerprint
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Behavioural gate receipt for 6B; one JSON object per manifest_fingerprint summarising upstream gates, contracts_6B and sealed_inputs_digest_6B.'
- output_id: sealed_inputs_6B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6B
  path_template: data/layer3/6B/sealed_inputs/fingerprint={manifest_fingerprint}/sealed_inputs_6B.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/gate/6B/sealed_inputs_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#sealed_inputs_6B
  primary_key:
  - manifest_fingerprint
  - owner_layer
  - owner_segment
  - manifest_key
  join_keys:
  - manifest_fingerprint
  - owner_layer
  - owner_segment
  - manifest_key
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: 'Sealed list of all artefacts 6B is allowed to read for a given manifest_fingerprint, with roles, schema_refs and digests.'
- output_id: s1_arrival_entities_6B
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s1_arrival_entities_6B/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s1/arrival_entities_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s1_arrival_entities_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - arrival_seq
  join_keys:
  - seed
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - arrival_seq
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: 'Arrival events from 5B enriched with entity attachments and session identifiers for Layer-3 behaviour; one row per arrival.'
- output_id: s1_session_index_6B
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s1_session_index_6B/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s1/session_index_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s1_session_index_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - session_id
  join_keys:
  - seed
  - manifest_fingerprint
  - scenario_id
  - session_id
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: 'Session index for 6B arrivals; one row per session with party/device/IP relationships and anchor metadata.'
- output_id: s2_flow_anchor_baseline_6B
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s2_flow_anchor_baseline_6B/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s2/flow_anchor_baseline_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s2_flow_anchor_baseline_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  join_keys:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: 'Baseline flow anchors (all-legit) for 6B. One row per flow_id per (seed, manifest_fingerprint, scenario_id).'
- output_id: s2_event_stream_baseline_6B
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s2_event_stream_baseline_6B/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s2/event_stream_baseline_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s2_event_stream_baseline_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  - event_seq
  join_keys:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  - event_seq
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: 'Baseline event stream for each flow (auth/clearing/refund/etc.).'
- output_id: s3_campaign_catalogue_6B
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s3_campaign_catalogue_6B/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/scenario_id={scenario_id}/s3_campaign_catalogue_6B.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s3/campaign_catalogue_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s3_campaign_catalogue_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - campaign_id
  join_keys:
  - seed
  - manifest_fingerprint
  - scenario_id
  - campaign_id
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: 'Catalogue of realised fraud/abuse campaigns with campaign_id, fraud_type, parameters and the flows affected.'
- output_id: s3_flow_anchor_with_fraud_6B
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s3_flow_anchor_with_fraud_6B/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s3/flow_anchor_with_fraud_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s3_flow_anchor_with_fraud_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  join_keys:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: 'Flow anchors after fraud overlays and campaign adjustments are applied.'
- output_id: s3_event_stream_with_fraud_6B
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s3_event_stream_with_fraud_6B/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s3/event_stream_with_fraud_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s3_event_stream_with_fraud_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  - event_seq
  join_keys:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  - event_seq
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: 'Event stream after fraud overlays. Contains synthetic fraud behaviours for training/labelling flows.'
- output_id: s4_flow_truth_labels_6B
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s4_flow_truth_labels_6B/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s4/flow_truth_labels_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s4_flow_truth_labels_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  join_keys:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: 'Flow-level ground truth labels used by 4A/4B and model training.'
- output_id: s4_flow_bank_view_6B
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s4_flow_bank_view_6B/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s4/flow_bank_view_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s4_flow_bank_view_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  join_keys:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: 'Bank-view classification of each flow (what the institution sees / would act on).'
- output_id: s4_event_labels_6B
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s4_event_labels_6B/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s4/event_labels_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s4_event_labels_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  - event_seq
  join_keys:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  - event_seq
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: 'Event-level truth and bank-view labels keyed to s3_event_stream_with_fraud_6B.'
- output_id: s4_case_timeline_6B
  class: surface
  exposure: internal
  scope: scope_parameter_hash_manifest_fingerprint_seed_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s4_case_timeline_6B/seed={seed}/fingerprint={manifest_fingerprint}/parameter_hash={parameter_hash}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s4/case_timeline_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s4_case_timeline_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - case_id
  - case_event_seq
  join_keys:
  - seed
  - manifest_fingerprint
  - scenario_id
  - case_id
  - case_event_seq
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: 'Case timeline events for flows promoted to manual review or automated cases.'
- output_id: s5_validation_report_6B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6B
  path_template: data/layer3/6B/validation/fingerprint={manifest_fingerprint}/s5_validation_report_6B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/validation/6B/s5_validation_report
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s5_validation_report_6B
  primary_key:
  - manifest_fingerprint
  join_keys:
  - manifest_fingerprint
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: 'Segment 6B world-level validation report; one JSON document summarising the results of S5 checks across S1-S4 artefacts.'
- output_id: s5_issue_table_6B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6B
  path_template: data/layer3/6B/validation/fingerprint={manifest_fingerprint}/s5_issue_table_6B.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/validation/6B/s5_issue_table
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s5_issue_table_6B
  primary_key:
  - manifest_fingerprint
  - check_id
  - issue_id
  join_keys:
  - manifest_fingerprint
  - check_id
  - issue_id
  availability: optional
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: 'Structured list of validation issues for 6B (one row per failing/warning check).'
- output_id: validation_bundle_6B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6B
  path_template: data/layer3/6B/validation/fingerprint={manifest_fingerprint}/
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/validation/6B/validation_bundle_index_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#validation_bundle_6B
  primary_key:
  - manifest_fingerprint
  join_keys:
  - manifest_fingerprint
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'World-level validation bundle for Segment 6B; directory of validation artefacts plus index.json and _passed.flag.'
- output_id: validation_passed_flag_6B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6B
  path_template: data/layer3/6B/validation/fingerprint={manifest_fingerprint}/_passed.flag
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/validation/6B/passed_flag_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#validation_passed_flag_6B
  primary_key:
  - manifest_fingerprint
  join_keys:
  - manifest_fingerprint
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Segment 6B HashGate flag; encodes SHA-256 digest over the 6B validation bundle.'
