version: '1.0'
outputs:
- output_id: ccy_country_weights_cache
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/ccy_country_weights_cache/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/prep/ccy_country_weights_cache
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#ccy_country_weights_cache
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Deterministic cache of expanded currency->country weights.
- output_id: country_set
  class: surface
  exposure: internal
  scope: scope_seed_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/country_set/seed={seed}/parameter_hash={parameter_hash}/
  partitions:
  - seed
  - parameter_hash
  schema_ref: schemas.1A.yaml#/alloc/country_set
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#country_set
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Legacy RNG-dependent allocation set; superseded by S3 ordered candidate
    set. Not authoritative for inter-country order.
- output_id: crossborder_eligibility_flags
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/crossborder_eligibility_flags/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/prep/crossborder_eligibility_flags
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#crossborder_eligibility_flags
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Flags enforcing cross-border eligibility rules prior to ZTP.
- output_id: crossborder_features
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/crossborder_features/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/model/crossborder_features
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#crossborder_features
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Per-merchant deterministic features used by cross-border K (currently:
    openness scalar X_m in [0,1]).'
- output_id: hurdle_design_matrix
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/hurdle_design_matrix/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/model/hurdle_design_matrix
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#hurdle_design_matrix
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Predictor matrix for hurdle (single vs multi-site) decision.
- output_id: hurdle_pi_probs
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/hurdle_pi_probs/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/model/hurdle_pi_probs
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#hurdle_pi_probs
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Per-merchant hurdle probabilities () after logistic model.
- output_id: hurdle_stationarity_tests_2024Q4
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/hurdle_stationarity_tests/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/validation/hurdle_stationarity_tests
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#hurdle_stationarity_tests_2024Q4
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Diagnostics for hurdle model stability across vintages.
- output_id: merchant_abort_log
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/prep/merchant_abort_log/parameter_hash={parameter_hash}/part-*.parquet
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/prep/merchant_abort_log
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#merchant_abort_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Merchant-scoped abort log for soft failures (does not replace run abort).
- output_id: merchant_currency
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/merchant_currency/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/prep/merchant_currency
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#merchant_currency
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Per-merchant settlement currency  with provenance.
- output_id: outlet_catalogue
  class: surface
  exposure: external
  scope: scope_seed_manifest_fingerprint
  owner_segment: 1A
  path_template: data/layer1/1A/outlet_catalogue/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.1A.yaml#/egress/outlet_catalogue
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#outlet_catalogue
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.1A.validation
  immutability:
    immutable_once_written: true
  description: Immutable outlet stubs per merchant x legal_country. Does NOT encode
    cross-country order; consumers MUST join `s3_candidate_set.candidate_rank` for
    that. Consumers MUST only read after verifying `_passed.flag` matches SHA256(`validation_bundle_1A`)
    for the same fingerprint (see S9.9).
- output_id: ranking_residual_cache_1A
  class: surface
  exposure: internal
  scope: scope_seed_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/ranking_residual_cache_1A/seed={seed}/parameter_hash={parameter_hash}/
  partitions:
  - seed
  - parameter_hash
  schema_ref: schemas.1A.yaml#/alloc/ranking_residual_cache
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#ranking_residual_cache_1A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Legacy residual cache for RNG integerisation; superseded by S3 deterministic
    integerised counts (parameter-scoped).
- output_id: rng_audit_log_1A
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 1A
  path_template: logs/layer1/1A/rng/audit/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/rng_audit_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/core/rng_audit_log
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_audit_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run-scoped RNG audit log (master seed, counters, substream jumps).
- output_id: rng_event_dirichlet_gamma_vector
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 1A
  path_template: logs/layer1/1A/rng/events/dirichlet_gamma_vector/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/dirichlet_gamma_vector
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_dirichlet_gamma_vector
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: Dirichlet gamma vectors for splitting outlets across
    countries.'
- output_id: rng_event_gamma_component
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 1A
  path_template: logs/layer1/1A/rng/events/gamma_component/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/gamma_component
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_gamma_component
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: gamma draws for NB/Dirichlet components.'
- output_id: rng_event_gumbel_key
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 1A
  path_template: logs/layer1/1A/rng/events/gumbel_key/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/gumbel_key
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_gumbel_key
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: Gumbel-top-k keys for foreign-country selection.'
- output_id: rng_event_hurdle_bernoulli
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 1A
  path_template: logs/layer1/1A/rng/events/hurdle_bernoulli/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/hurdle_bernoulli
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_hurdle_bernoulli
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: hurdle Bernoulli draws per merchant ().'
- output_id: rng_event_nb_final
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 1A
  path_template: logs/layer1/1A/rng/events/nb_final/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/nb_final
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_nb_final
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: final Negative Binomial draws for outlet counts.'
- output_id: rng_event_normal_box_muller
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 1A
  path_template: logs/layer1/1A/rng/events/normal_box_muller/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/normal_box_muller
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_normal_box_muller
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: standard normal draws via Box-Muller (Z only; sine mate
    discarded).'
- output_id: rng_event_poisson_component
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 1A
  path_template: logs/layer1/1A/rng/events/poisson_component/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/poisson_component
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_poisson_component
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: Poisson draws used in NB composition / ZTP.'
- output_id: rng_event_residual_rank
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 1A
  path_template: logs/layer1/1A/rng/events/residual_rank/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/residual_rank
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_residual_rank
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: deterministic ranks of largest-remainder residuals for
    per-country integerisation.'
- output_id: rng_event_sequence_finalize
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 1A
  path_template: logs/layer1/1A/rng/events/sequence_finalize/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/sequence_finalize
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_sequence_finalize
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: final sequence allocation per (merchant,country) block.'
- output_id: rng_event_site_sequence_overflow
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 1A
  path_template: logs/layer1/1A/rng/events/site_sequence_overflow/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/site_sequence_overflow
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_site_sequence_overflow
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: guardrail events when site sequence space is exhausted.'
- output_id: rng_event_stream_jump
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 1A
  path_template: logs/layer1/1A/rng/events/stream_jump/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/stream_jump
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_stream_jump
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: explicit Philox stream/substream jump records.'
- output_id: rng_event_ztp_final
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 1A
  path_template: logs/layer1/1A/rng/events/ztp_final/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/ztp_final
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_ztp_final
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: S4 single acceptance record per resolved merchant (fixes
    K_target and run facts).'
- output_id: rng_event_ztp_rejection
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 1A
  path_template: logs/layer1/1A/rng/events/ztp_rejection/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/ztp_rejection
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_ztp_rejection
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: ZTP rejection samples and acceptance traces.'
- output_id: rng_event_ztp_retry_exhausted
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 1A
  path_template: logs/layer1/1A/rng/events/ztp_retry_exhausted/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/ztp_retry_exhausted
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_event_ztp_retry_exhausted
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Event stream: ZTP retry exhaustion (diagnostic hard events).'
- output_id: rng_trace_log_1A
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 1A
  path_template: logs/layer1/1A/rng/trace/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/rng_trace_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/core/rng_trace_log
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#rng_trace_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Structured per-(module,substream_label) RNG trace (saturating totals
    for draws/blocks/events; `draws_total` equals the sum of event-level draws; `blocks_total`
    reconciled via counters). Emit exactly one cumulative row after each RNG event
    append (per S4 2A).
- output_id: s0_gate_receipt_1A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 1A
  path_template: data/layer1/1A/s0_gate_receipt/manifest_fingerprint={manifest_fingerprint}/s0_gate_receipt.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.1A.yaml#/validation/s0_gate_receipt_1A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#s0_gate_receipt_1A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Root sealing receipt for 1A; records run lineage and the sealed input
    inventory.
- output_id: s3_base_weight_priors
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/s3_base_weight_priors/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/s3/base_weight_priors
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#s3_base_weight_priors
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Deterministic base-weight priors (fixed-dp strings) per candidate;
    not probabilities.
- output_id: s3_candidate_set
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/s3_candidate_set/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/s3/candidate_set
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#s3_candidate_set
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Deterministic ordered candidate set per merchant; single authority
    for inter-country order (`candidate_rank`).
- output_id: s3_integerised_counts
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/s3_integerised_counts/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/s3/integerised_counts
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#s3_integerised_counts
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Deterministic per-country integer counts summing to N; includes residual_rank.
- output_id: s3_site_sequence
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/s3_site_sequence/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/s3/site_sequence
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#s3_site_sequence
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Deterministic within-country site sequence (and optional 6-digit site_id).
- output_id: s6_membership
  class: surface
  exposure: internal
  scope: scope_seed_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/s6/membership/seed={seed}/parameter_hash={parameter_hash}/
  partitions:
  - seed
  - parameter_hash
  schema_ref: schemas.1A.yaml#/alloc/membership
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#s6_membership
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Optional convenience surface of selected foreign ISO2s per merchant;
    authority remains S6 RNG events; no inter-country order encoded.
- output_id: s6_validation_receipt
  class: surface
  exposure: internal
  scope: scope_seed_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/s6/seed={seed}/parameter_hash={parameter_hash}/
  partitions:
  - seed
  - parameter_hash
  schema_ref: schemas.layer1.yaml#/validation/s6_receipt
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#s6_validation_receipt
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: PASS receipt for S6; gate for S7/S8 reads.
- output_id: sealed_inputs_1A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 1A
  path_template: data/layer1/1A/sealed_inputs/manifest_fingerprint={manifest_fingerprint}/sealed_inputs_1A.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.1A.yaml#/validation/sealed_inputs_1A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#sealed_inputs_1A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.1A.validation
  immutability:
    immutable_once_written: true
  description: Authoritative inventory of every asset sealed by 1A.S0 for the manifest.
- output_id: segment_state_runs_1A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 1A
  path_template: reports/layer1/segment_state_runs/segment=1A/utc_day={utc_day}/segment_state_runs.jsonl
  partitions: []
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#segment_state_runs
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Layer-1 segment-state run-report (JSONL), one row per state invocation.
- output_id: sparse_flag
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1A
  path_template: data/layer1/1A/sparse_flag/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1A.yaml#/prep/sparse_flag
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#sparse_flag
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Per-currency sparsity flags emitted by currency->country expansion.
- output_id: validation_bundle_1A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 1A
  path_template: data/layer1/1A/validation/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.1A.yaml#/validation/validation_bundle
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#validation_bundle_1A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Validator outputs for 1A (metrics, plots, diffs).
- output_id: validation_bundle_index_1A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 1A
  path_template: data/layer1/1A/validation/manifest_fingerprint={manifest_fingerprint}/index.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.1A.yaml#/validation/validation_bundle_index_1A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#validation_bundle_index_1A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: index.json enumerating validation bundle members with hashes.
- output_id: validation_passed_flag_1A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 1A
  path_template: data/layer1/1A/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/validation/passed_flag
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1A/dataset_dictionary.layer1.1A.yaml#validation_passed_flag_1A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: HashGate PASS flag for the 1A validation bundle.
- output_id: jitter_policy
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 1B
  path_template: config/layer1/1B/policy/1B.jitter.yaml
  partitions: []
  schema_ref: schemas.1B.yaml#/policy/jitter_policy
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#jitter_policy
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: "RESERVED (VNext). Gaussian jitter \u03C3 (deg) policy by latitude\
    \ band / merchant class. Not consumed by 1B v1 uniform lane."
- output_id: rng_audit_log_1B
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 1B
  path_template: logs/layer1/1B/rng/audit/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/rng_audit_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/core/rng_audit_log
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#rng_audit_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: "RNG run audit (identity/config) \u2014 one row at run start."
- output_id: rng_event_in_cell_jitter
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 1B
  path_template: logs/layer1/1B/rng/events/in_cell_jitter/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/in_cell_jitter
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#rng_event_in_cell_jitter
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: "RNG events for S6 in-cell jitter (\u22651 event per site; one per\
    \ attempt; per-event budget; blocks=1, draws=2)."
- output_id: rng_event_site_tile_assign
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 1B
  path_template: logs/layer1/1B/rng/events/site_tile_assign/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/site_tile_assign
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#rng_event_site_tile_assign
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: "RNG events for site\u2192tile assignment (one event per assigned site)."
- output_id: rng_trace_log_1B
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 1B
  path_template: logs/layer1/1B/rng/trace/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/rng_trace_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/core/rng_trace_log
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#rng_trace_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: "RNG cumulative trace \u2014 append exactly one row after each event\
    \ append."
- output_id: s0_gate_receipt_1B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 1B
  path_template: data/layer1/1B/s0_gate_receipt/manifest_fingerprint={manifest_fingerprint}/s0_gate_receipt.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.1B.yaml#/validation/s0_gate_receipt
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s0_gate_receipt_1B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Fingerprint-scoped receipt proving 1A PASS verification; enumerates
    sealed inputs for 1B.
- output_id: s1_run_report
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1B
  path_template: reports/layer1/1B/state=S1/parameter_hash={parameter_hash}/s1_run_report.json
  partitions:
  - parameter_hash
  schema_ref: schemas.1B.yaml#/control/s1_run_report
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s1_run_report
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Control-plane run report for S1 tile index publish.
- output_id: s2_run_report
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1B
  path_template: reports/layer1/1B/state=S2/parameter_hash={parameter_hash}/s2_run_report.json
  partitions:
  - parameter_hash
  schema_ref: schemas.1B.yaml#/control/s2_run_report
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s2_run_report
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Control-plane run report for S2 tile weights publish.
- output_id: s3_requirements
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 1B
  path_template: data/layer1/1B/s3_requirements/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.1B.yaml#/plan/s3_requirements
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s3_requirements
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.1B.validation
  immutability:
    immutable_once_written: true
  description: Deterministic site counts per (merchant_id, legal_country_iso) for
    this run.
- output_id: s3_run_report
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 1B
  path_template: reports/layer1/1B/state=S3/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s3_run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.1B.yaml#/control/s3_run_report
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s3_run_report
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Control-plane counters and receipts for S3 requirements publish.
- output_id: s4_alloc_plan
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 1B
  path_template: data/layer1/1B/s4_alloc_plan/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.1B.yaml#/plan/s4_alloc_plan
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s4_alloc_plan
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.1B.validation
  immutability:
    immutable_once_written: true
  description: Per-tile integer allocations that sum to S3 n_sites (RNG-free; positives
    only).
- output_id: s4_run_report
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 1B
  path_template: reports/layer1/1B/state=S4/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s4_run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.1B.yaml#/control/s4_run_report
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s4_run_report
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Control-plane counters and receipts for S4 allocation publish.
- output_id: s5_run_report
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 1B
  path_template: reports/layer1/1B/state=S5/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s5_run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.1B.yaml#/control/s5_run_report
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s5_run_report
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: "Control-plane counters and receipts for S5 site\u2192tile assignment\
    \ publish."
- output_id: s5_site_tile_assignment
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 1B
  path_template: data/layer1/1B/s5_site_tile_assignment/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.1B.yaml#/plan/s5_site_tile_assignment
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s5_site_tile_assignment
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.1B.validation
  immutability:
    immutable_once_written: true
  description: Site->tile assignment; one row per site; satisfies S4 per-tile quotas.
- output_id: s6_run_report
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 1B
  path_template: reports/layer1/1B/state=S6/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s6_run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.1B.yaml#/control/s6_run_report
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s6_run_report
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Control-plane counters and RNG coverage for S6 jitter publish.
- output_id: s6_site_jitter
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 1B
  path_template: data/layer1/1B/s6_site_jitter/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.1B.yaml#/plan/s6_site_jitter
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s6_site_jitter
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.1B.validation
  immutability:
    immutable_once_written: true
  description: Per-site in-pixel jitter; effective deltas (projection into country);
    one row per site.
- output_id: s7_run_summary
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 1B
  path_template: reports/layer1/1B/state=S7/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s7_run_summary.json
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.1B.yaml#/control/s7_run_summary
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s7_run_summary
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Control-plane run summary for S7 site synthesis publish.
- output_id: s7_site_synthesis
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 1B
  path_template: data/layer1/1B/s7_site_synthesis/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.1B.yaml#/plan/s7_site_synthesis
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s7_site_synthesis
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.1B.validation
  immutability:
    immutable_once_written: true
  description: Deterministic stitch of S5 (tile) + S6 (effective deltas) + S1 geometry
    into per-site absolutes; RNG-free; 1:1 with outlet_catalogue.
- output_id: s8_run_summary
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 1B
  path_template: reports/layer1/1B/state=S8/seed={seed}/manifest_fingerprint={manifest_fingerprint}/s8_run_summary.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.1B.yaml#/control/s8_run_summary
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#s8_run_summary
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Control-plane summary for S8 site_locations publish.
- output_id: sealed_inputs_1B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 1B
  path_template: data/layer1/1B/sealed_inputs/manifest_fingerprint={manifest_fingerprint}/sealed_inputs_1B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.1B.yaml#/validation/sealed_inputs_1B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#sealed_inputs_1B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.1B.validation
  immutability:
    immutable_once_written: true
  description: Authoritative inventory of every asset sealed by 1B.S0 for the manifest.
- output_id: site_locations
  class: surface
  exposure: external
  scope: scope_seed_manifest_fingerprint
  owner_segment: 1B
  path_template: data/layer1/1B/site_locations/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.1B.yaml#/egress/site_locations
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#site_locations
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.1B.validation
  immutability:
    immutable_once_written: true
  description: Site locations with absolute lat/lon (post jitter + geometry stitch);
    partitioned by seed/fingerprint.
- output_id: tile_bounds
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1B
  path_template: data/layer1/1B/tile_bounds/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1B.yaml#/prep/tile_bounds
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#tile_bounds
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Rectangle bounds per eligible tile (S1 companion to tile_index).
- output_id: tile_index
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1B
  path_template: data/layer1/1B/tile_index/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1B.yaml#/prep/tile_index
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#tile_index
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Eligible raster cells per country after clip.
- output_id: tile_weights
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 1B
  path_template: data/layer1/1B/tile_weights/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.1B.yaml#/prep/tile_weights
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#tile_weights
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Deterministic fixed-dp weights per tile.
- output_id: validation_bundle_1B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 1B
  path_template: data/layer1/1B/validation/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.1B.yaml#/validation/validation_bundle_1B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#validation_bundle_1B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Validation bundle for a 1B publish (one per manifest_fingerprint).
- output_id: validation_bundle_index_1B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 1B
  path_template: data/layer1/1B/validation/manifest_fingerprint={manifest_fingerprint}/index.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.1B.yaml#/validation/validation_bundle_index_1B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#validation_bundle_index_1B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: index.json enumerating validation bundle members with hashes.
- output_id: validation_passed_flag_1B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 1B
  path_template: data/layer1/1B/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.1B.yaml#/validation/passed_flag
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/1B/dataset_dictionary.layer1.1B.yaml#validation_passed_flag_1B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: PASS gate flag; equals SHA-256 of the bundle per S9 hashing rule.
- output_id: s0_gate_receipt_2A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 2A
  path_template: data/layer1/2A/s0_gate_receipt/manifest_fingerprint={manifest_fingerprint}/s0_gate_receipt.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.2A.yaml#/validation/s0_gate_receipt_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#s0_gate_receipt_2A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Fingerprint-scoped receipt proving 1B PASS and recording sealed inputs
    for 2A.
- output_id: s1_tz_lookup
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 2A
  path_template: data/layer1/2A/s1_tz_lookup/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.2A.yaml#/plan/s1_tz_lookup
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#s1_tz_lookup
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.2A.validation
  immutability:
    immutable_once_written: true
  description: Provisional tz lookup results per site (deterministic).
- output_id: s4_legality_report
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 2A
  path_template: data/layer1/2A/legality_report/seed={seed}/manifest_fingerprint={manifest_fingerprint}/s4_legality_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.2A.yaml#/validation/s4_legality_report
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#s4_legality_report
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.2A.validation
  immutability:
    immutable_once_written: true
  description: Legality/DST report per seedxfingerprint (JSON summary).
- output_id: sealed_inputs_2A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 2A
  path_template: data/layer1/2A/sealed_inputs/manifest_fingerprint={manifest_fingerprint}/sealed_inputs_2A.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.2A.yaml#/manifests/sealed_inputs_2A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#sealed_inputs_2A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.2A.validation
  immutability:
    immutable_once_written: true
  description: Diagnostic inventory of sealed inputs for a 2A fingerprint.
- output_id: site_timezones
  class: surface
  exposure: external
  scope: scope_seed_manifest_fingerprint
  owner_segment: 2A
  path_template: data/layer1/2A/site_timezones/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.2A.yaml#/egress/site_timezones
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#site_timezones
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.2A.validation
  immutability:
    immutable_once_written: true
  description: Final per-site IANA tzid with provenance; order-free egress.
- output_id: tz_nudge
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 2A
  path_template: config/layer1/2A/timezone/tz_nudge.yml
  partitions: []
  schema_ref: schemas.2A.yaml#/policy/tz_nudge_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#tz_nudge
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: "Deterministic \u03B5 used at borders for tie-breaks; sealed for reproducibility."
- output_id: tz_overrides
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 2A
  path_template: config/layer1/2A/timezone/tz_overrides.yaml
  partitions: []
  schema_ref: schemas.2A.yaml#/policy/tz_overrides_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#tz_overrides
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: "Time-zone overrides (governed; precedence site \xBB mcc \xBB country)."
- output_id: tz_timetable_cache
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 2A
  path_template: data/layer1/2A/tz_timetable_cache/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.2A.yaml#/cache/tz_timetable_cache
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#tz_timetable_cache
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.2A.validation
  immutability:
    immutable_once_written: true
  description: Fingerprint-scoped cache manifest for tz transitions.
- output_id: tzdb_release
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 2A
  path_template: artefacts/priors/tzdata/{release_tag}/
  partitions: []
  schema_ref: schemas.2A.yaml#/ingress/tzdb_release_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#tzdb_release
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Pinned IANA tzdata archive and release tag.
- output_id: validation_bundle_2A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 2A
  path_template: data/layer1/2A/validation/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.2A.yaml#/validation/validation_bundle_2A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#validation_bundle_2A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Validation bundle for 2A publish (one per fingerprint).
- output_id: validation_bundle_index_2A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 2A
  path_template: data/layer1/2A/validation/manifest_fingerprint={manifest_fingerprint}/index.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.2A.yaml#/validation/validation_bundle_index_2A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#validation_bundle_index_2A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: index.json enumerating validation bundle members with hashes.
- output_id: validation_passed_flag_2A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 2A
  path_template: data/layer1/2A/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.2A.yaml#/validation/passed_flag
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2A/dataset_dictionary.layer1.2A.yaml#validation_passed_flag_2A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: PASS flag; equals SHA-256 of bundle per index+ASCII-lex law.
- output_id: alias_layout_policy_v1
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 2B
  path_template: config/layer1/2B/policy/alias_layout_policy_v1.json
  partitions: []
  schema_ref: schemas.2B.yaml#/policy/alias_layout_policy_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#alias_layout_policy_v1
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Alias table byte layout, alignment, and decode invariants.
- output_id: day_effect_policy_v1
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 2B
  path_template: config/layer1/2B/policy/day_effect_policy_v1.json
  partitions: []
  schema_ref: schemas.2B.yaml#/policy/day_effect_policy_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#day_effect_policy_v1
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Daily modulation cadence, variance, and clipping configuration for
    S3.
- output_id: rng_audit_log_2B
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 2B
  path_template: logs/layer1/2B/rng/audit/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/rng_audit_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/core/rng_audit_log
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#rng_audit_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG run audit (identity/config) - one row at run start for 2B routing
    runs.
- output_id: rng_event_alias_pick_group
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 2B
  path_template: logs/layer1/2B/rng/events/alias_pick_group/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/alias_pick_group
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#rng_event_alias_pick_group
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 2B.S5 tz-group selection (single-uniform; Stage A).
- output_id: rng_event_alias_pick_site
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 2B
  path_template: logs/layer1/2B/rng/events/alias_pick_site/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/alias_pick_site
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#rng_event_alias_pick_site
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 2B.S5 site selection (single-uniform; Stage B).
- output_id: rng_event_cdn_edge_pick
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 2B
  path_template: logs/layer1/2B/rng/events/cdn_edge_pick/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/cdn_edge_pick
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#rng_event_cdn_edge_pick
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 2B.S6 virtual-edge pick (single-uniform).
- output_id: rng_trace_log_2B
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 2B
  path_template: logs/layer1/2B/rng/trace/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/rng_trace_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/core/rng_trace_log
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#rng_trace_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG cumulative trace - append exactly one row after each event append
    for 2B routing runs.
- output_id: route_rng_policy_v1
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 2B
  path_template: config/layer1/2B/policy/route_rng_policy_v1.json
  partitions: []
  schema_ref: schemas.2B.yaml#/policy/route_rng_policy_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#route_rng_policy_v1
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Philox sub-stream layout & RNG budgets for routing states.
- output_id: s0_gate_receipt_2B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 2B
  path_template: data/layer1/2B/s0_gate_receipt/manifest_fingerprint={manifest_fingerprint}/s0_gate_receipt_2B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.2B.yaml#/validation/s0_gate_receipt_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#s0_gate_receipt_2B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Gate receipt attesting upstream verification, identity, and catalogue-only
    resolution.
- output_id: s1_site_weights
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 2B
  path_template: data/layer1/2B/s1_site_weights/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.2B.yaml#/plan/s1_site_weights
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#s1_site_weights
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.2B.validation
  immutability:
    immutable_once_written: true
  description: Frozen per-site probability law emitted by S1 for alias construction.
- output_id: s2_alias_blob
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 2B
  path_template: data/layer1/2B/s2_alias_blob/seed={seed}/manifest_fingerprint={manifest_fingerprint}/alias.bin
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.2B.yaml#/binary/s2_alias_blob
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#s2_alias_blob
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.2B.validation
  immutability:
    immutable_once_written: true
  description: Contiguous binary blob containing per-merchant alias tables.
- output_id: s2_alias_index
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 2B
  path_template: data/layer1/2B/s2_alias_index/seed={seed}/manifest_fingerprint={manifest_fingerprint}/index.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.2B.yaml#/plan/s2_alias_index
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#s2_alias_index
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.2B.validation
  immutability:
    immutable_once_written: true
  description: JSON index describing alias blob slices, offsets, and digests.
- output_id: s3_day_effects
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 2B
  path_template: data/layer1/2B/s3_day_effects/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.2B.yaml#/plan/s3_day_effects
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#s3_day_effects
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.2B.validation
  immutability:
    immutable_once_written: true
  description: Per-merchant x UTC-day x tz-group gamma multipliers for day-scale co-movement.
- output_id: s4_group_weights
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 2B
  path_template: data/layer1/2B/s4_group_weights/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.2B.yaml#/plan/s4_group_weights
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#s4_group_weights
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.2B.validation
  immutability:
    immutable_once_written: true
  description: Per-merchant x UTC-day x tz-group mix used to pick tz-group prior to
    static alias.
- output_id: s5_selection_log
  class: surface
  exposure: internal
  scope: scope_seed_parameter_hash_run_id_utc_day
  owner_segment: 2B
  path_template: data/layer1/2B/s5_selection_log/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/utc_day={utc_day}/selection_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  - utc_day
  schema_ref: schemas.2B.yaml#/trace/s5_selection_log_row
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#s5_selection_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Optional per-arrival trace for routing selections; arrival-ordered
    JSONL.
- output_id: s6_edge_log
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id_utc_day
  owner_segment: 2B
  path_template: logs/layer1/2B/edge/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/utc_day={utc_day}/s6_edge_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  - utc_day
  schema_ref: schemas.2B.yaml#/trace/s6_edge_log_row
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#s6_edge_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Per-arrival virtual-edge selections captured as a diagnostic log.
- output_id: s7_audit_report
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 2B
  path_template: data/layer1/2B/s7_audit_report/seed={seed}/manifest_fingerprint={manifest_fingerprint}/s7_audit_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.2B.yaml#/validation/s7_audit_report_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#s7_audit_report
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.2B.validation
  immutability:
    immutable_once_written: true
  description: Deterministic audit report emitted by S7 (validators, evidence, run
    metadata).
- output_id: sealed_inputs_2B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 2B
  path_template: data/layer1/2B/sealed_inputs/manifest_fingerprint={manifest_fingerprint}/sealed_inputs_2B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.2B.yaml#/validation/sealed_inputs_2B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#sealed_inputs_2B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.2B.validation
  immutability:
    immutable_once_written: true
  description: Authoritative inventory of every asset sealed by 2B.S0 for the manifest.
- output_id: validation_bundle_2B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 2B
  path_template: data/layer1/2B/validation/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.2B.yaml#/validation/validation_bundle_index_2B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#validation_bundle_2B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Directory artefact containing the 2B validation bundle contents.
- output_id: validation_bundle_index_2B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 2B
  path_template: data/layer1/2B/validation/manifest_fingerprint={manifest_fingerprint}/index.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.2B.yaml#/validation/validation_bundle_index_2B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#validation_bundle_index_2B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: index.json enumerating evidence files plus their SHA-256 digests.
- output_id: validation_passed_flag_2B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 2B
  path_template: data/layer1/2B/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.1B.yaml#/validation/passed_flag
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#validation_passed_flag_2B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Companion flag containing the SHA-256 digest of the 2B validation bundle.
- output_id: virtual_edge_policy_v1
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 2B
  path_template: config/layer1/2B/policy/virtual_edge_policy_v1.json
  partitions: []
  schema_ref: schemas.2B.yaml#/policy/virtual_edge_policy_v1
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/2B/dataset_dictionary.layer1.2B.yaml#virtual_edge_policy_v1
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Sealed virtual-edge catalogue containing edges, weights, and attributes.
- output_id: rng_audit_log_3A
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 3A
  path_template: logs/layer1/3A/rng/audit/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/rng_audit_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/core/rng_audit_log
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#rng_audit_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG run audit (identity/config) - one row at run start for 3A routing
    runs.
- output_id: rng_event_zone_dirichlet
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 3A
  path_template: logs/layer1/3A/rng/events/zone_dirichlet/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/zone_dirichlet
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#rng_event_zone_dirichlet
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 3A.S3 Dirichlet draws (one per escalated merchant x
    country).
- output_id: rng_trace_log_3A
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 3A
  path_template: logs/layer1/3A/rng/trace/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/rng_trace_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/core/rng_trace_log
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#rng_trace_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG cumulative trace - append exactly one row after each event append
    for 3A S3 runs.
- output_id: s0_gate_receipt_3A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3A
  path_template: data/layer1/3A/s0_gate_receipt/manifest_fingerprint={manifest_fingerprint}/s0_gate_receipt_3A.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3A.yaml#/validation/s0_gate_receipt_3A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s0_gate_receipt_3A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Gate descriptor proving upstream PASS status and sealed policy set.
- output_id: s1_escalation_queue
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3A
  path_template: data/layer1/3A/s1_escalation_queue/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3A.yaml#/plan/s1_escalation_queue
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s1_escalation_queue
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: Per-merchant escalation decisions and totals.
- output_id: s1_run_report_3A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3A
  path_template: reports/layer1/3A/state=S1/seed={seed}/manifest_fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s1_run_report_3A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run report for 3A.S1 escalation queue.
- output_id: s2_country_zone_priors
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 3A
  path_template: data/layer1/3A/s2_country_zone_priors/parameter_hash={parameter_hash}/
  partitions:
  - parameter_hash
  schema_ref: schemas.3A.yaml#/plan/s2_country_zone_priors
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s2_country_zone_priors
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Parameter-scoped Dirichlet -vectors per countryxtzid.
- output_id: s2_run_report_3A
  class: surface
  exposure: internal
  scope: scope_parameter_hash
  owner_segment: 3A
  path_template: reports/layer1/3A/state=S2/parameter_hash={parameter_hash}/run_report.json
  partitions:
  - parameter_hash
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s2_run_report_3A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run report for 3A.S2 priors stage.
- output_id: s3_run_report_3A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3A
  path_template: reports/layer1/3A/state=S3/seed={seed}/manifest_fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s3_run_report_3A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run report for 3A.S3 zone share sampling.
- output_id: s3_zone_shares
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3A
  path_template: data/layer1/3A/s3_zone_shares/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3A.yaml#/plan/s3_zone_shares
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s3_zone_shares
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: Dirichlet share draws per merchantxcountryxzone.
- output_id: s4_run_report_3A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3A
  path_template: reports/layer1/3A/state=S4/seed={seed}/manifest_fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s4_run_report_3A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run report for 3A.S4 zone count integerisation.
- output_id: s4_zone_counts
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3A
  path_template: data/layer1/3A/s4_zone_counts/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3A.yaml#/plan/s4_zone_counts
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s4_zone_counts
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: Integer outlet counts per merchantxcountryxzone after floor/bump.
- output_id: s5_run_report_3A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3A
  path_template: reports/layer1/3A/state=S5/seed={seed}/manifest_fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s5_run_report_3A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run report for 3A.S5 zone allocation egress.
- output_id: s6_issue_table_3A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3A
  path_template: data/layer1/3A/s6_issues/manifest_fingerprint={manifest_fingerprint}/issues.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3A.yaml#/validation/s6_issue_table_3A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s6_issue_table_3A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: Per-issue findings emitted by 3A.S6.
- output_id: s6_receipt_3A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3A
  path_template: data/layer1/3A/s6_receipt/manifest_fingerprint={manifest_fingerprint}/s6_receipt.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3A.yaml#/validation/s6_receipt_3A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s6_receipt_3A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: Compact validation receipt capturing S6 outcomes.
- output_id: s6_run_report_3A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3A
  path_template: reports/layer1/3A/state=S6/seed={seed}/manifest_fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s6_run_report_3A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run report for 3A.S6 validation.
- output_id: s6_validation_report_3A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3A
  path_template: data/layer1/3A/s6_validation_report/manifest_fingerprint={manifest_fingerprint}/report.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3A.yaml#/validation/s6_validation_report_3A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s6_validation_report_3A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: Structural validation report emitted by 3A.S6.
- output_id: s7_run_report_3A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3A
  path_template: reports/layer1/3A/state=S7/seed={seed}/manifest_fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#s7_run_report_3A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run report for 3A.S7 validation bundle.
- output_id: sealed_inputs_3A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3A
  path_template: data/layer1/3A/sealed_inputs/manifest_fingerprint={manifest_fingerprint}/sealed_inputs_3A.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3A.yaml#/validation/sealed_inputs_3A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#sealed_inputs_3A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: Sealed inventory of artefacts authorised for Segment 3A.
- output_id: segment_state_runs_3A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 3A
  path_template: reports/layer1/segment_state_runs/segment=3A/utc_day={utc_day}/segment_state_runs.jsonl
  partitions: []
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#segment_state_runs
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Layer-1 segment-state run-report (JSONL), one row per state invocation.
- output_id: validation_bundle_3A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3A
  path_template: data/layer1/3A/validation/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/validation/validation_bundle_index_3A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#validation_bundle_3A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Fingerprint-scoped validation bundle for Segment 3A.
- output_id: validation_passed_flag_3A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3A
  path_template: data/layer1/3A/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/validation/passed_flag_3A
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#validation_passed_flag_3A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: HashGate PASS flag accompanying the 3A validation bundle.
- output_id: zone_alloc
  class: surface
  exposure: external
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3A
  path_template: data/layer1/3A/zone_alloc/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3A.yaml#/egress/zone_alloc
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#zone_alloc
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: Cross-layer zone allocation egress for routing segment.
- output_id: zone_alloc_universe_hash
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3A
  path_template: data/layer1/3A/zone_universe/manifest_fingerprint={manifest_fingerprint}/zone_alloc_universe_hash.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3A.yaml#/validation/zone_alloc_universe_hash
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3A/dataset_dictionary.layer1.3A.yaml#zone_alloc_universe_hash
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3A.validation
  immutability:
    immutable_once_written: true
  description: Digest summary tying priors/policies to the published zone allocation.
- output_id: edge_alias_blob_3B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/edge_alias_blob/seed={seed}/manifest_fingerprint={manifest_fingerprint}/edge_alias_blob_3B.bin
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/binary/edge_alias_blob_header_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#edge_alias_blob_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: Contiguous alias blob covering every virtual merchant edge distribution.
- output_id: edge_alias_index_3B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/edge_alias_index/seed={seed}/manifest_fingerprint={manifest_fingerprint}/edge_alias_index_3B.parquet
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/plan/edge_alias_index_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#edge_alias_index_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: Index and checksum metadata for locating merchant alias segments inside
    the blob.
- output_id: edge_catalogue_3B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/edge_catalogue/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/plan/edge_catalogue_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#edge_catalogue_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: Per-edge geometry, tz semantics and weights for all virtual merchants.
- output_id: edge_catalogue_index_3B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/edge_catalogue_index/seed={seed}/manifest_fingerprint={manifest_fingerprint}/edge_catalogue_index_3B.parquet
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/plan/edge_catalogue_index_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#edge_catalogue_index_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: Digest summary and per-merchant counts for the edge catalogue.
- output_id: edge_universe_hash_3B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/edge_universe_hash/manifest_fingerprint={manifest_fingerprint}/edge_universe_hash_3B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/validation/edge_universe_hash_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#edge_universe_hash_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: Fingerprint-scoped hash tying cdn weights, edge catalogue/index and
    alias outputs.
- output_id: gamma_draw_log_3B
  class: stream
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3B
  path_template: logs/layer1/3B/gamma_draw/seed={seed}/manifest_fingerprint={manifest_fingerprint}/gamma_draw_log_3B.jsonl
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/validation/gamma_draw_log_entry_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#gamma_draw_log_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: Structured Philox audit for any gamma draws in the virtual pipeline.
- output_id: rng_audit_log_3B
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 3B
  path_template: logs/layer1/3B/rng/audit/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/rng_audit_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/core/rng_audit_log
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#rng_audit_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG run audit (identity/config) - one row at run start for 3B S2 runs.
- output_id: rng_event_edge_jitter
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 3B
  path_template: logs/layer1/3B/rng/events/edge_jitter/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/edge_jitter
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#rng_event_edge_jitter
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for S2 edge jitter attempts (one per attempt).
- output_id: rng_event_edge_tile_assign
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 3B
  path_template: logs/layer1/3B/rng/events/edge_tile_assign/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/edge_tile_assign
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#rng_event_edge_tile_assign
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for S2 edge tile assignment (one per expanded edge slot).
- output_id: rng_trace_log_3B
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 3B
  path_template: logs/layer1/3B/rng/trace/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/rng_trace_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/core/rng_trace_log
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#rng_trace_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG cumulative trace - append exactly one row after each event append
    for 3B S2 runs.
- output_id: s0_gate_receipt_3B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/s0_gate_receipt/manifest_fingerprint={manifest_fingerprint}/s0_gate_receipt_3B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/validation/s0_gate_receipt_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#s0_gate_receipt_3B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Gate receipt capturing upstream PASS status, sealed policy set and
    authoritative digests.
- output_id: s1_run_report_3B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3B
  path_template: reports/layer1/3B/state=S1/seed={seed}/manifest_fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#s1_run_report_3B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run report for 3B.S1 virtual classification.
- output_id: s2_run_report_3B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3B
  path_template: reports/layer1/3B/state=S2/seed={seed}/manifest_fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#s2_run_report_3B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run report for 3B.S2 edge catalogue.
- output_id: s3_run_report_3B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3B
  path_template: reports/layer1/3B/state=S3/seed={seed}/manifest_fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#s3_run_report_3B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run report for 3B.S3 alias packaging.
- output_id: s4_run_report_3B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3B
  path_template: reports/layer1/3B/state=S4/seed={seed}/manifest_fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#s4_run_report_3B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run report for 3B.S4 routing policy compilation.
- output_id: s4_run_summary_3B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3B
  path_template: reports/layer1/3B/state=S4/manifest_fingerprint={manifest_fingerprint}/s4_run_summary_3B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/validation/s4_run_summary_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#s4_run_summary_3B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Optional S4 receipt capturing policy digests and status.
- output_id: s5_manifest_3B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/validation/manifest_fingerprint={manifest_fingerprint}/s5_manifest_3B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/validation/s5_manifest_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#s5_manifest_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: Optional S5 manifest summarising identity, digests and validator outcomes;
    lives inside the bundle.
- output_id: s5_run_report_3B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3B
  path_template: reports/layer1/3B/state=S5/seed={seed}/manifest_fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#s5_run_report_3B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run report for 3B.S5 validation bundle.
- output_id: sealed_inputs_3B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/sealed_inputs/manifest_fingerprint={manifest_fingerprint}/sealed_inputs_3B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/validation/sealed_inputs_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#sealed_inputs_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: Inventory of every artefact authorised for the manifest.
- output_id: validation_bundle_3B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/validation/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/validation/validation_bundle_index_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#validation_bundle_3B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Directory artefact containing manifest, digests and structural or RNG
    evidence.
- output_id: validation_bundle_index_3B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/validation/manifest_fingerprint={manifest_fingerprint}/index.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/validation/validation_bundle_index_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#validation_bundle_index_3B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: index.json enumerating evidence files plus their SHA-256 digests.
- output_id: validation_passed_flag_3B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer1.yaml#/validation/passed_flag_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#validation_passed_flag_3B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: ASCII _passed.flag storing the hash of the validation bundle.
- output_id: virtual_classification_3B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/virtual_classification/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/plan/virtual_classification_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#virtual_classification_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: Merchant-level classification surface with closed vocabulary reason
    codes.
- output_id: virtual_routing_policy_3B
  class: surface
  exposure: external
  scope: scope_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/virtual_routing_policy/manifest_fingerprint={manifest_fingerprint}/virtual_routing_policy_3B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/egress/virtual_routing_policy_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#virtual_routing_policy_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: Dual-TZ routing contract that tells 2B how to consume the virtual artefacts.
- output_id: virtual_settlement_3B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/virtual_settlement/seed={seed}/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - seed
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/plan/virtual_settlement_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#virtual_settlement_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: One settlement node per virtual merchant with tzid semantics and evidence
    URLs.
- output_id: virtual_validation_contract_3B
  class: surface
  exposure: external
  scope: scope_manifest_fingerprint
  owner_segment: 3B
  path_template: data/layer1/3B/virtual_validation_contract/manifest_fingerprint={manifest_fingerprint}/virtual_validation_contract_3B.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.3B.yaml#/egress/virtual_validation_contract_3B
  dictionary_ref: docs/model_spec/data-engine/layer-1/specs/contracts/3B/dataset_dictionary.layer1.3B.yaml#virtual_validation_contract_3B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer1.3B.validation
  immutability:
    immutable_once_written: true
  description: Declarative suite of validation tests (IP mix, cut-offs, alias health)
    scoped to the manifest.
- output_id: baseline_intensity_policy_5A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5A
  path_template: config/layer2/5A/policy/baseline_intensity_policy_5A.v1.yaml
  partitions: []
  schema_ref: schemas.5A.yaml#/policy/baseline_intensity_policy_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#baseline_intensity_policy_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Baseline intensity semantics policy for 5A.S3. Defines how S1 scale
    fields are interpreted (units/constraints) and any clipping/zero-handling rules.

    '
- output_id: class_shape_catalogue_5A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_scenario_id
  owner_segment: 5A
  path_template: 'data/layer2/5A/class_shape_catalogue/parameter_hash={parameter_hash}/scenario_id={scenario_id}/class_shape_catalogue_5A.parquet

    '
  partitions:
  - parameter_hash
  - scenario_id
  schema_ref: schemas.5A.yaml#/model/class_shape_catalogue_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#class_shape_catalogue_5A
  primary_key:
  - parameter_hash
  - scenario_id
  - demand_class
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Optional base shape catalogue per class (and optional channel) for
    each scenario.
- output_id: class_zone_baseline_local_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_scenario_id
  owner_segment: 5A
  path_template: 'data/layer2/5A/class_zone_baseline_local/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/class_zone_baseline_local_5A.parquet

    '
  partitions:
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5A.yaml#/model/class_zone_baseline_local_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#class_zone_baseline_local_5A
  primary_key:
  - manifest_fingerprint
  - scenario_id
  - demand_class
  - legal_country_iso
  - tzid
  - bucket_index
  join_keys: []
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: Optional classxzone baseline local-week intensities per scenario.
- output_id: class_zone_shape_5A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_scenario_id
  owner_segment: 5A
  path_template: 'data/layer2/5A/class_zone_shape/parameter_hash={parameter_hash}/scenario_id={scenario_id}/class_zone_shape_5A.parquet

    '
  partitions:
  - parameter_hash
  - scenario_id
  schema_ref: schemas.5A.yaml#/model/class_zone_shape_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#class_zone_shape_5A
  primary_key:
  - parameter_hash
  - scenario_id
  - demand_class
  - legal_country_iso
  - tzid
  - bucket_index
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Normalised weekly shape vectors per classxzone (and optional channel)
    for each scenario.
- output_id: demand_scale_policy_5A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5A
  path_template: config/layer2/5A/policy/demand_scale_policy_5A.v1.yaml
  partitions: []
  schema_ref: schemas.5A.yaml#/policy/demand_scale_policy_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#demand_scale_policy_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Demand scale policy for 5A.S1/S3. Maps demand_class and merchant features
    to baseline weekly volume / scale_factor.

    '
- output_id: merchant_class_policy_5A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5A
  path_template: config/layer2/5A/policy/merchant_class_policy_5A.v1.yaml
  partitions: []
  schema_ref: schemas.5A.yaml#/policy/merchant_class_policy_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#merchant_class_policy_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Classing policy for 5A.S1. Maps merchantxzone features to demand_class
    and optional demand_subclass/profile IDs.

    '
- output_id: merchant_class_profile_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: data/layer2/5A/merchant_class_profile/manifest_fingerprint={manifest_fingerprint}/merchant_class_profile_5A.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.5A.yaml#/model/merchant_class_profile_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#merchant_class_profile_5A
  primary_key:
  - merchant_id
  join_keys: []
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: Merchant-level aggregate class profile derived deterministically from
    zone profiles.
- output_id: merchant_zone_baseline_local_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_scenario_id
  owner_segment: 5A
  path_template: 'data/layer2/5A/merchant_zone_baseline_local/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/merchant_zone_baseline_local_5A.parquet

    '
  partitions:
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5A.yaml#/model/merchant_zone_baseline_local_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#merchant_zone_baseline_local_5A
  primary_key:
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - legal_country_iso
  - tzid
  - bucket_index
  join_keys: []
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: Merchantxzone baseline local-week intensities per scenario.
- output_id: merchant_zone_baseline_utc_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_scenario_id
  owner_segment: 5A
  path_template: 'data/layer2/5A/merchant_zone_baseline_utc/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/merchant_zone_baseline_utc_5A.parquet

    '
  partitions:
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5A.yaml#/model/merchant_zone_baseline_utc_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#merchant_zone_baseline_utc_5A
  primary_key:
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - legal_country_iso
  - tzid
  - utc_bucket_index
  join_keys: []
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: Optional merchantxzone baseline intensities expressed on a UTC grid.
- output_id: merchant_zone_overlay_factors_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_scenario_id
  owner_segment: 5A
  path_template: 'data/layer2/5A/merchant_zone_overlay_factors/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/merchant_zone_overlay_factors_5A.parquet

    '
  partitions:
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5A.yaml#/model/merchant_zone_overlay_factors_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#merchant_zone_overlay_factors_5A
  primary_key:
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - legal_country_iso
  - tzid
  - local_horizon_bucket_index
  join_keys: []
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: Optional multiplicative overlay factors per merchantxzonexhorizon bucket.
- output_id: merchant_zone_profile_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: data/layer2/5A/merchant_zone_profile/manifest_fingerprint={manifest_fingerprint}/merchant_zone_profile_5A.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.5A.yaml#/model/merchant_zone_profile_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#merchant_zone_profile_5A
  primary_key:
  - merchant_id
  - legal_country_iso
  - tzid
  join_keys: []
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: Merchantxzone demand profile including class and scale for the local
    week.
- output_id: merchant_zone_scenario_local_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_scenario_id
  owner_segment: 5A
  path_template: 'data/layer2/5A/merchant_zone_scenario_local/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/merchant_zone_scenario_local_5A.parquet

    '
  partitions:
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5A.yaml#/model/merchant_zone_scenario_local_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#merchant_zone_scenario_local_5A
  primary_key:
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - legal_country_iso
  - tzid
  - local_horizon_bucket_index
  join_keys: []
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: Scenario-adjusted local-week intensities per merchantxzonexhorizon
    bucket.
- output_id: merchant_zone_scenario_utc_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_scenario_id
  owner_segment: 5A
  path_template: 'data/layer2/5A/merchant_zone_scenario_utc/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/merchant_zone_scenario_utc_5A.parquet

    '
  partitions:
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5A.yaml#/model/merchant_zone_scenario_utc_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#merchant_zone_scenario_utc_5A
  primary_key:
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - legal_country_iso
  - tzid
  - utc_horizon_bucket_index
  join_keys: []
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: Scenario-adjusted UTC intensities per merchantxzonexUTC horizon bucket.
- output_id: overlay_ordering_policy_5A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5A
  path_template: config/layer2/5A/scenario/overlay_ordering_policy_5A.v1.yaml
  partitions: []
  schema_ref: schemas.5A.yaml#/policy/overlay_ordering_policy_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#overlay_ordering_policy_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Optional overlay ordering policy for 5A.S4 to define precedence between
    overlapping scenario events.

    '
- output_id: s0_gate_receipt_5A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: data/layer2/5A/s0_gate_receipt/manifest_fingerprint={manifest_fingerprint}/s0_gate_receipt_5A.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.5A.yaml#/validation/s0_gate_receipt_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#s0_gate_receipt_5A
  primary_key:
  - manifest_fingerprint
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Fingerprint-scoped S0 receipt confirming upstream gates and sealed
    inputs.
- output_id: s1_run_report_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: reports/layer2/5A/state=S1/manifest_fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#s1_run_report_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run report for 5A.S1 demand profiles.
- output_id: s2_run_report_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: reports/layer2/5A/state=S2/manifest_fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#s2_run_report_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run report for 5A.S2 shape synthesis.
- output_id: s3_run_report_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: reports/layer2/5A/state=S3/manifest_fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#s3_run_report_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run report for 5A.S3 baseline intensity synthesis.
- output_id: s4_run_report_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: reports/layer2/5A/state=S4/manifest_fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#s4_run_report_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run report for 5A.S4 scenario overlays.
- output_id: s5_run_report_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: reports/layer2/5A/state=S5/manifest_fingerprint={manifest_fingerprint}/run_report.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#s5_run_report_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run report for 5A.S5 validation bundle.
- output_id: scenario_calendar_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_scenario_id
  owner_segment: 5A
  path_template: data/layer2/5A/scenario_calendar/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/scenario_calendar_5A.parquet
  partitions:
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5A.yaml#/scenario/scenario_calendar_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#scenario_calendar_5A
  primary_key:
  - manifest_fingerprint
  - scenario_id
  - event_id
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Scenario calendar for 5A.S4. Defines dated events (holidays, campaigns,
    outages, stress scenarios) and their scope.

    '
- output_id: scenario_horizon_config_5A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5A
  path_template: config/layer2/5A/scenario/scenario_horizon_config_5A.v1.yaml
  partitions: []
  schema_ref: schemas.5A.yaml#/scenario/scenario_horizon_config_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#scenario_horizon_config_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Horizon and grid configuration for 5A.S4 scenario overlays (local
    and UTC).

    '
- output_id: scenario_manifest_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: data/layer2/5A/scenario_manifest/manifest_fingerprint={manifest_fingerprint}/scenario_manifest_5A.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.5A.yaml#/validation/scenario_manifest_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#scenario_manifest_5A
  primary_key:
  - manifest_fingerprint
  - scenario_id
  join_keys: []
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: Scenario-level manifest projection derived from sealed inputs.
- output_id: scenario_metadata
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5A
  path_template: config/layer2/5A/scenario/scenario_metadata.v1.yaml
  partitions: []
  schema_ref: schemas.5A.yaml#/scenario/scenario_metadata
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#scenario_metadata
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Scenario metadata pack (scenario IDs, labels, types, and horizon range)
    sealed by S0.

    '
- output_id: scenario_overlay_policy_5A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5A
  path_template: config/layer2/5A/scenario/scenario_overlay_policy_5A.v1.yaml
  partitions: []
  schema_ref: schemas.5A.yaml#/scenario/scenario_overlay_policy_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#scenario_overlay_policy_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Overlay policy for 5A.S4. Maps scenario events to multiplicative factors
    and defines precedence/combination rules.

    '
- output_id: scenario_overlay_validation_policy_5A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5A
  path_template: config/layer2/5A/scenario/scenario_overlay_validation_policy_5A.v1.yaml
  partitions: []
  schema_ref: schemas.5A.yaml#/scenario/scenario_overlay_validation_policy_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#scenario_overlay_validation_policy_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Optional overlay validation policy for 5A.S4 to define bounds or warnings
    for overlay factors.

    '
- output_id: sealed_inputs_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: data/layer2/5A/sealed_inputs/manifest_fingerprint={manifest_fingerprint}/sealed_inputs_5A.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.5A.yaml#/validation/sealed_inputs_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#sealed_inputs_5A
  primary_key:
  - manifest_fingerprint
  - owner_segment
  - artifact_id
  join_keys: []
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: Inventory of sealed artefacts 5A is allowed to read for a fingerprint.
- output_id: segment_state_runs_5A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5A
  path_template: reports/layer2/segment_state_runs/segment=5A/utc_day={utc_day}/segment_state_runs.jsonl
  partitions: []
  schema_ref: schemas.layer2.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#segment_state_runs
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Layer-2 segment-state run-report (JSONL), one row per state invocation.
- output_id: shape_grid_definition_5A
  class: surface
  exposure: internal
  scope: scope_parameter_hash_scenario_id
  owner_segment: 5A
  path_template: 'data/layer2/5A/shape_grid_definition/parameter_hash={parameter_hash}/scenario_id={scenario_id}/shape_grid_definition_5A.parquet

    '
  partitions:
  - parameter_hash
  - scenario_id
  schema_ref: schemas.5A.yaml#/model/shape_grid_definition_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#shape_grid_definition_5A
  primary_key:
  - parameter_hash
  - scenario_id
  - bucket_index
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Local-week time grid definition for shapes under a parameter pack and
    scenario.
- output_id: shape_library_5A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5A
  path_template: config/layer2/5A/policy/shape_library_5A.v1.yaml
  partitions: []
  schema_ref: schemas.5A.yaml#/policy/shape_library_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#shape_library_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Shape library for 5A.S2. Defines unit-mass shape templates per demand_classxzonexchannel_group
    (grid lives in shape_time_grid_policy_5A).

    '
- output_id: shape_time_grid_policy_5A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5A
  path_template: config/layer2/5A/policy/shape_time_grid_policy_5A.v1.yaml
  partitions: []
  schema_ref: schemas.5A.yaml#/policy/shape_time_grid_policy_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#shape_time_grid_policy_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Local-week time grid policy for 5A.S2 (bucket size, buckets per week,
    and bucket_index mapping).

    '
- output_id: spec_compatibility_config_5A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5A
  path_template: config/layer2/5A/validation/spec_compatibility_config_5A.v1.yaml
  partitions: []
  schema_ref: schemas.5A.yaml#/validation/spec_compatibility_config_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#spec_compatibility_config_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Optional S5 config declaring compatible S1-S4 spec-version combinations.

    '
- output_id: validation_bundle_5A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: data/layer2/5A/validation/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/validation/validation_bundle_index_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#validation_bundle_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Directory artefact containing the 5A validation bundle and evidence
    outputs.
- output_id: validation_bundle_index_5A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: data/layer2/5A/validation/manifest_fingerprint={manifest_fingerprint}/validation_bundle_index_5A.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/validation/validation_bundle_index_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#validation_bundle_index_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Index and manifest for the 5A validation bundle.
- output_id: validation_issue_table_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: data/layer2/5A/validation/manifest_fingerprint={manifest_fingerprint}/issues/validation_issue_table_5A.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/validation/validation_issue_table_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#validation_issue_table_5A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: Optional structured list of validation issues for 5A.
- output_id: validation_passed_flag_5A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: data/layer2/5A/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/validation/passed_flag_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#validation_passed_flag_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Pass/fail flag for the 5A validation bundle.
- output_id: validation_policy_5A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5A
  path_template: config/layer2/5A/validation/validation_policy_5A.v1.yaml
  partitions: []
  schema_ref: schemas.5A.yaml#/validation/validation_policy_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#validation_policy_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Optional S5 validation strictness config (tolerances, warn corridors,
    blocking rules).

    '
- output_id: validation_report_5A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5A
  path_template: data/layer2/5A/validation/manifest_fingerprint={manifest_fingerprint}/reports/validation_report_5A.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/validation/validation_report_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#validation_report_5A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer2.5A.validation
  immutability:
    immutable_once_written: true
  description: Human/machine readable validation report for 5A.
- output_id: zone_shape_modifiers_5A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5A
  path_template: config/layer2/5A/policy/zone_shape_modifiers_5A.v1.yaml
  partitions: []
  schema_ref: schemas.5A.yaml#/policy/zone_shape_modifiers_5A
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5A/dataset_dictionary.layer2.5A.yaml#zone_shape_modifiers_5A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Optional deterministic zone-level modifiers applied after base templates
    and before normalization in 5A.S2.

    '
- output_id: arrival_count_config_5B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5B
  path_template: config/layer2/5B/arrival_count_config_5B.yaml
  partitions: []
  schema_ref: schemas.5B.yaml#/config/arrival_count_config_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#arrival_count_config_5B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Bucket count law configuration for 5B.S3.
- output_id: arrival_events_5B
  class: surface
  exposure: external
  scope: scope_seed_manifest_fingerprint_scenario_id
  owner_segment: 5B
  path_template: 'data/layer2/5B/arrival_events/seed={seed}/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/part-*.parquet

    '
  partitions:
  - seed
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5B.yaml#/egress/s4_arrival_events_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#arrival_events_5B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - arrival_seq
  join_keys:
  - seed
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - arrival_seq
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: Canonical arrival skeleton per scenario x seed; traffic primitive / join surface (not emitted as traffic by default).
- output_id: arrival_lgcp_config_5B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5B
  path_template: config/layer2/5B/arrival_lgcp_config_5B.yaml
  partitions: []
  schema_ref: schemas.5B.yaml#/config/arrival_lgcp_config_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#arrival_lgcp_config_5B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Latent intensity (LGCP) configuration for 5B.S2.
- output_id: arrival_rng_policy_5B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5B
  path_template: config/layer2/5B/arrival_rng_policy_5B.yaml
  partitions: []
  schema_ref: schemas.5B.yaml#/config/arrival_rng_policy_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#arrival_rng_policy_5B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG wiring and budgets for 5B.S2-S4.
- output_id: arrival_routing_policy_5B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5B
  path_template: config/layer2/5B/arrival_routing_policy_5B.yaml
  partitions: []
  schema_ref: schemas.5B.yaml#/config/arrival_routing_policy_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#arrival_routing_policy_5B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Arrival routing policy for 5B.S4.
- output_id: arrival_time_placement_policy_5B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5B
  path_template: config/layer2/5B/arrival_time_placement_policy_5B.yaml
  partitions: []
  schema_ref: schemas.5B.yaml#/config/arrival_time_placement_policy_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#arrival_time_placement_policy_5B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Arrival time placement policy for 5B.S4.
- output_id: bundle_layout_policy_5B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5B
  path_template: config/layer2/5B/bundle_layout_policy_5B.yaml
  partitions: []
  schema_ref: schemas.5B.yaml#/config/bundle_layout_policy_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#bundle_layout_policy_5B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Optional bundle layout policy for 5B.S5 evidence assembly.
- output_id: grouping_policy_5B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5B
  path_template: config/layer2/5B/grouping_policy_5B.yaml
  partitions: []
  schema_ref: schemas.5B.yaml#/config/grouping_policy_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#grouping_policy_5B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Deterministic grouping policy for 5B.S1.
- output_id: rng_audit_log_5B
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 5B
  path_template: logs/layer2/5B/rng/audit/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/rng_audit_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/core/rng_audit_log
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#rng_audit_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run-scoped RNG audit envelope for 5B runs (seed, parameters, build
    metadata).
- output_id: rng_event_arrival_edge_pick
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 5B
  path_template: logs/layer2/5B/rng/events/arrival_edge_pick/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/arrival_edge_pick
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#rng_event_arrival_edge_pick
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG event table for 5B.S4 virtual edge selection draws.
- output_id: rng_event_arrival_lgcp_gaussian
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 5B
  path_template: logs/layer2/5B/rng/events/arrival_lgcp_gaussian/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/arrival_lgcp_gaussian
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#rng_event_arrival_lgcp_gaussian
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG event table for 5B.S2 LGCP Gaussian draws.
- output_id: rng_event_arrival_site_pick
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 5B
  path_template: logs/layer2/5B/rng/events/arrival_site_pick/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/arrival_site_pick
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#rng_event_arrival_site_pick
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG event table for 5B.S4 physical site selection draws.
- output_id: rng_event_arrival_time_jitter
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 5B
  path_template: logs/layer2/5B/rng/events/arrival_time_jitter/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/events/arrival_time_jitter
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#rng_event_arrival_time_jitter
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG event table for 5B.S4 time-placement jitter draws.
- output_id: rng_trace_log_5B
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 5B
  path_template: logs/layer2/5B/rng/trace/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/rng_trace_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer1.yaml#/rng/core/rng_trace_log
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#rng_trace_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Aggregated RNG trace log for 5B runs (per event family draws/blocks).
- output_id: s0_gate_receipt_5B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5B
  path_template: data/layer2/5B/s0_gate_receipt/manifest_fingerprint={manifest_fingerprint}/s0_gate_receipt_5B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.5B.yaml#/validation/s0_gate_receipt_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#s0_gate_receipt_5B
  primary_key:
  - manifest_fingerprint
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Fingerprint-scoped receipt confirming upstream PASS gates and sealed
    inputs.
- output_id: s1_grouping_5B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_scenario_id
  owner_segment: 5B
  path_template: 'data/layer2/5B/s1_grouping/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/s1_grouping_5B.parquet

    '
  partitions:
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5B.yaml#/model/s1_grouping_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#s1_grouping_5B
  primary_key:
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - zone_representation
  - channel_group
  join_keys: []
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: Deterministic mapping from merchantxzonexchannel to latent group IDs.
- output_id: s1_time_grid_5B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint_scenario_id
  owner_segment: 5B
  path_template: 'data/layer2/5B/s1_time_grid/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/s1_time_grid_5B.parquet

    '
  partitions:
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5B.yaml#/model/s1_time_grid_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#s1_time_grid_5B
  primary_key:
  - manifest_fingerprint
  - scenario_id
  - bucket_index
  join_keys: []
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: Canonical scenario-level time grid for arrivals.
- output_id: s2_latent_field_5B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_scenario_id
  owner_segment: 5B
  path_template: 'data/layer2/5B/s2_latent_field/seed={seed}/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/s2_latent_field_5B.parquet

    '
  partitions:
  - seed
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5B.yaml#/model/s2_latent_field_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#s2_latent_field_5B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - group_id
  - bucket_index
  join_keys: []
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: Optional per-group latent field table for diagnostics.
- output_id: s2_realised_intensity_5B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_scenario_id
  owner_segment: 5B
  path_template: 'data/layer2/5B/s2_realised_intensity/seed={seed}/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/s2_realised_intensity_5B.parquet

    '
  partitions:
  - seed
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5B.yaml#/model/s2_realised_intensity_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#s2_realised_intensity_5B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - zone_representation
  - channel_group
  - bucket_index
  join_keys: []
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: Realised intensities _realised per entityxbucketxscenarioxseed.
- output_id: s3_bucket_counts_5B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_scenario_id
  owner_segment: 5B
  path_template: 'data/layer2/5B/s3_bucket_counts/seed={seed}/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/s3_bucket_counts_5B.parquet

    '
  partitions:
  - seed
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5B.yaml#/model/s3_bucket_counts_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#s3_bucket_counts_5B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - zone_representation
  - channel_group
  - bucket_index
  join_keys: []
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: Integer counts per entityxbucketxscenarioxseed.
- output_id: s4_arrival_anomalies_5B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_scenario_id
  owner_segment: 5B
  path_template: 'data/layer2/5B/arrival_anomalies/seed={seed}/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/s4_arrival_anomalies_5B.parquet

    '
  partitions:
  - seed
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5B.yaml#/diagnostics/s4_arrival_anomalies_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#s4_arrival_anomalies_5B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - anomaly_id
  join_keys: []
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: Optional anomaly log for arrival routing/time-placement diagnostics.
- output_id: s4_arrival_summary_5B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_scenario_id
  owner_segment: 5B
  path_template: 'data/layer2/5B/arrival_summary/seed={seed}/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/s4_arrival_summary_5B.parquet

    '
  partitions:
  - seed
  - manifest_fingerprint
  - scenario_id
  schema_ref: schemas.5B.yaml#/diagnostics/s4_arrival_summary_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#s4_arrival_summary_5B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - zone_representation
  - channel_group
  - bucket_index
  join_keys: []
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: Optional per-entity/bucket arrival summaries for observability.
- output_id: sealed_inputs_5B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5B
  path_template: data/layer2/5B/sealed_inputs/manifest_fingerprint={manifest_fingerprint}/sealed_inputs_5B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.5B.yaml#/validation/sealed_inputs_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#sealed_inputs_5B
  primary_key:
  - manifest_fingerprint
  - owner_segment
  - artifact_id
  join_keys: []
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: Inventory of artefacts 5B is allowed to read for a fingerprint.
- output_id: segment_state_runs_5B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5B
  path_template: reports/layer2/segment_state_runs/segment=5B/utc_day={utc_day}/segment_state_runs.jsonl
  partitions: []
  schema_ref: schemas.layer2.yaml#/run_report/segment_state_run
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#segment_state_runs
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Global run-report journal for layer2 segment states.
- output_id: time_grid_policy_5B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5B
  path_template: config/layer2/5B/time_grid_policy_5B.yaml
  partitions: []
  schema_ref: schemas.5B.yaml#/config/time_grid_policy_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#time_grid_policy_5B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Time grid configuration for 5B.S1.
- output_id: validation_bundle_5B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5B
  path_template: data/layer2/5B/validation/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/validation/validation_bundle_index_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#validation_bundle_5B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Directory artefact for the 5B validation bundle and evidence outputs.
- output_id: validation_bundle_index_5B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5B
  path_template: data/layer2/5B/validation/manifest_fingerprint={manifest_fingerprint}/index.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/validation/validation_bundle_index_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#validation_bundle_index_5B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Index/manifest for the 5B validation bundle (fingerprint scope).
- output_id: validation_issue_table_5B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5B
  path_template: data/layer2/5B/validation/manifest_fingerprint={manifest_fingerprint}/validation_issue_table_5B.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/validation/validation_issue_table_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#validation_issue_table_5B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: Optional structured issue table for 5B validation findings.
- output_id: validation_passed_flag_5B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5B
  path_template: data/layer2/5B/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/validation/passed_flag_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#validation_passed_flag_5B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: HashGate flag proving the validation bundle digest for a fingerprint.
- output_id: validation_policy_5B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 5B
  path_template: config/layer2/5B/validation_policy_5B.yaml
  partitions: []
  schema_ref: schemas.5B.yaml#/config/validation_policy_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#validation_policy_5B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Validation policy for 5B.S5.
- output_id: validation_report_5B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 5B
  path_template: data/layer2/5B/validation/manifest_fingerprint={manifest_fingerprint}/validation_report_5B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer2.yaml#/validation/validation_report_5B
  dictionary_ref: docs/model_spec/data-engine/layer-2/specs/contracts/5B/dataset_dictionary.layer2.5B.yaml#validation_report_5B
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer2.5B.validation
  immutability:
    immutable_once_written: true
  description: Human/machine readable 5B validation report.
- output_id: device_linkage_rules_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/policy/device_linkage_rules_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/policy/device_linkage_rules_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#device_linkage_rules_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Device-specific linkage rules for 6A.S4 (sharing patterns and degree
    caps).
- output_id: graph_linkage_rules_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/policy/graph_linkage_rules_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/policy/graph_linkage_rules_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#graph_linkage_rules_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Graph/linkage rules for 6A.S4 (device/IP sharing, degree caps, deterministic
    tie-breaks).
- output_id: instrument_linkage_rules_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/policy/instrument_linkage_rules_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/policy/instrument_linkage_rules_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#instrument_linkage_rules_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Optional instrument linkage rules for 6A.S3 (instrument ownership constraints).
- output_id: prior_account_per_party_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/priors/account_per_party_priors_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/prior/account_per_party_priors_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#prior_account_per_party_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Priors for account counts per party and per segment.
- output_id: prior_account_roles_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/priors/account_role_priors_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/prior/account_role_priors_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#prior_account_roles_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Fraud-role priors for accounts.
- output_id: prior_device_counts_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/priors/device_count_priors_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/prior/device_count_priors_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#prior_device_counts_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Priors for device counts and sharing behavior.
- output_id: prior_device_roles_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/priors/device_role_priors_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/prior/device_role_priors_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#prior_device_roles_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Fraud-role priors for devices.
- output_id: prior_instrument_mix_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/priors/instrument_mix_priors_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/prior/instrument_mix_priors_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#prior_instrument_mix_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Priors for instrument type and scheme mixes.
- output_id: prior_instrument_per_account_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/priors/instrument_per_account_priors_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/prior/instrument_per_account_priors_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#prior_instrument_per_account_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Priors for instrument counts per account.
- output_id: prior_ip_counts_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/priors/ip_count_priors_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/prior/ip_count_priors_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#prior_ip_counts_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Priors for IP/endpoint counts and sharing behavior.
- output_id: prior_ip_roles_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/priors/ip_role_priors_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/prior/ip_role_priors_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#prior_ip_roles_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Fraud-role priors for IPs/endpoints.
- output_id: prior_merchant_roles_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/priors/merchant_role_priors_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/prior/merchant_role_priors_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#prior_merchant_roles_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Fraud-role priors for merchants.
- output_id: prior_party_roles_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/priors/party_role_priors_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/prior/party_role_priors_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#prior_party_roles_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Fraud-role priors for parties.
- output_id: prior_population_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/priors/population_priors_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/prior/population_priors_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#prior_population_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Population priors pack for 6A (world/region totals, mixtures, demographics).
- output_id: prior_product_mix_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/priors/product_mix_priors_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/prior/product_mix_priors_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#prior_product_mix_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Priors for account/product mix by party segment and region.
- output_id: prior_segmentation_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/priors/segmentation_priors_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/prior/segmentation_priors_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#prior_segmentation_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Segmentation priors for 6A (party_type/segment mixes and region splits).
- output_id: product_eligibility_config_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/policy/product_eligibility_config_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/policy/product_eligibility_config_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#product_eligibility_config_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Optional product eligibility config for 6A.S2 (account/product admissibility
    rules).
- output_id: product_linkage_rules_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/policy/product_linkage_rules_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/policy/product_linkage_rules_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#product_linkage_rules_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Optional product linkage rules for 6A.S2 (account/product wiring constraints).
- output_id: rng_audit_log_6A
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/audit/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/rng_audit_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/core/rng_audit_log
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_audit_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run-scoped RNG audit envelope for 6A runs.
- output_id: rng_event_account_allocation_sampling
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/events/account_allocation_sampling/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/account_allocation_sampling
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_event_account_allocation_sampling
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6A.S2 account allocation sampling.
- output_id: rng_event_account_attribute_sampling
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/events/account_attribute_sampling/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/account_attribute_sampling
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_event_account_attribute_sampling
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6A.S2 account attribute sampling.
- output_id: rng_event_account_count_realisation
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/events/account_count_realisation/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/account_count_realisation
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_event_account_count_realisation
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6A.S2 account count realisation.
- output_id: rng_event_device_allocation_sampling
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/events/device_allocation_sampling/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/device_allocation_sampling
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_event_device_allocation_sampling
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6A.S4 device allocation sampling.
- output_id: rng_event_device_attribute_sampling
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/events/device_attribute_sampling/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/device_attribute_sampling
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_event_device_attribute_sampling
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6A.S4 device attribute sampling.
- output_id: rng_event_device_count_realisation
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/events/device_count_realisation/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/device_count_realisation
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_event_device_count_realisation
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6A.S4 device count realisation.
- output_id: rng_event_fraud_role_sampling_account
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/events/fraud_role_sampling_account/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/fraud_role_sampling_account
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_event_fraud_role_sampling_account
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6A.S5 account fraud-role sampling.
- output_id: rng_event_fraud_role_sampling_device
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/events/fraud_role_sampling_device/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/fraud_role_sampling_device
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_event_fraud_role_sampling_device
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6A.S5 device fraud-role sampling.
- output_id: rng_event_fraud_role_sampling_ip
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/events/fraud_role_sampling_ip/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/fraud_role_sampling_ip
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_event_fraud_role_sampling_ip
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6A.S5 IP fraud-role sampling.
- output_id: rng_event_fraud_role_sampling_merchant
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/events/fraud_role_sampling_merchant/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/fraud_role_sampling_merchant
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_event_fraud_role_sampling_merchant
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6A.S5 merchant fraud-role sampling.
- output_id: rng_event_fraud_role_sampling_party
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/events/fraud_role_sampling_party/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/fraud_role_sampling_party
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_event_fraud_role_sampling_party
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6A.S5 party fraud-role sampling.
- output_id: rng_event_instrument_allocation_sampling
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/events/instrument_allocation_sampling/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/instrument_allocation_sampling
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_event_instrument_allocation_sampling
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6A.S3 instrument allocation sampling.
- output_id: rng_event_instrument_attribute_sampling
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/events/instrument_attribute_sampling/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/instrument_attribute_sampling
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_event_instrument_attribute_sampling
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6A.S3 instrument attribute sampling.
- output_id: rng_event_instrument_count_realisation
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/events/instrument_count_realisation/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/instrument_count_realisation
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_event_instrument_count_realisation
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6A.S3 instrument count realisation.
- output_id: rng_event_ip_allocation_sampling
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/events/ip_allocation_sampling/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/ip_allocation_sampling
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_event_ip_allocation_sampling
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6A.S4 IP allocation sampling.
- output_id: rng_event_ip_attribute_sampling
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/events/ip_attribute_sampling/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/ip_attribute_sampling
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_event_ip_attribute_sampling
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6A.S4 IP attribute sampling.
- output_id: rng_event_ip_count_realisation
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/events/ip_count_realisation/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/ip_count_realisation
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_event_ip_count_realisation
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6A.S4 IP count realisation.
- output_id: rng_event_party_attribute_sampling
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/events/party_attribute_sampling/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/party_attribute_sampling
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_event_party_attribute_sampling
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6A.S1 party attribute sampling.
- output_id: rng_event_party_count_realisation
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/events/party_count_realisation/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/party_count_realisation
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_event_party_count_realisation
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6A.S1 party count realisation.
- output_id: rng_trace_log_6A
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6A
  path_template: logs/layer3/6A/rng/trace/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/rng_trace_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/core/rng_trace_log
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#rng_trace_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Aggregated RNG trace log for 6A runs (per event family draws/blocks).
- output_id: s0_gate_receipt_6A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6A
  path_template: data/layer3/6A/s0_gate_receipt/manifest_fingerprint={manifest_fingerprint}/s0_gate_receipt_6A.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/gate/6A/s0_gate_receipt_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s0_gate_receipt_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Layer-3 / Segment 6A gate receipt. One row per manifest_fingerprint,
    summarising upstream gates and the sealed input universe for 6A.

    '
- output_id: s1_party_base_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s1_party_base_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s1_party_base_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s1/party_base
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s1_party_base_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Base party/customer universe for Layer-3 / Segment 6A. One row per
    party per (manifest_fingerprint, seed), including type, home geography and static
    segment attributes.

    '
- output_id: s1_party_summary_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s1_party_summary_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s1_party_summary_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s1/party_summary
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s1_party_summary_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Aggregate view of the 6A party base, providing party counts by geography,
    segment and type for diagnostics and downstream sizing.

    '
- output_id: s2_account_base_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s2_account_base_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s2_account_base_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s2/account_base
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s2_account_base_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Account and product universe for Layer-3 / Segment 6A. One row per
    account per (manifest_fingerprint, seed), including owner references, account
    type, currency and static account attributes.

    '
- output_id: s2_account_summary_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s2_account_summary_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s2_account_summary_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s2/account_summary
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s2_account_summary_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Aggregate view of the 6A account base, providing account counts by
    geography, segment and account type for diagnostics and sizing.

    '
- output_id: s2_merchant_account_base_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s2_merchant_account_base_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s2_merchant_account_base_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s2/merchant_account_base
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s2_merchant_account_base_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Merchant-centric view of accounts where a merchant is an owner (e.g.
    settlement or acquiring accounts). Pure subset of s2_account_base_6A.

    '
- output_id: s2_party_product_holdings_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s2_party_product_holdings_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s2_party_product_holdings_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s2/party_product_holdings
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s2_party_product_holdings_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Per-party product holdings for Layer-3 / Segment 6A, derived from
    s2_account_base_6A and s1_party_base_6A. One row per party and product grouping
    (e.g. account_type), with account counts.

    '
- output_id: s3_account_instrument_links_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s3_account_instrument_links_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s3_account_instrument_links_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s3/account_instrument_links
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s3_account_instrument_links_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Per-account instrument linkage surface for Layer-3 / Segment 6A. Derived
    from s3_instrument_base_6A and s2_account_base_6A; provides either per-instrument
    or aggregated per-account, per-instrument-type views of instrument ownership.

    '
- output_id: s3_instrument_base_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s3_instrument_base_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s3_instrument_base_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s3/instrument_base
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s3_instrument_base_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Instrument and payment-credential universe for Layer-3 / Segment 6A.
    One row per instrument per (manifest_fingerprint, seed), including owner account,
    owner party/merchant (if modelled), instrument type, scheme/network, masked identifier,
    expiry, and static flags.

    '
- output_id: s3_instrument_summary_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s3_instrument_summary_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s3_instrument_summary_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s3/instrument_summary
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s3_instrument_summary_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Aggregate instrument diagnostics for Layer-3 / Segment 6A, providing
    instrument counts by geography, segment, account_type and instrument_type.

    '
- output_id: s3_party_instrument_holdings_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s3_party_instrument_holdings_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s3_party_instrument_holdings_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s3/party_instrument_holdings
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s3_party_instrument_holdings_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Per-party instrument holdings for Layer-3 / Segment 6A, derived from
    s3_instrument_base_6A and s1_party_base_6A; one row per (party_id, instrument
    grouping) with instrument_count.

    '
- output_id: s4_device_base_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s4_device_base_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s4_device_base_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s4/device_base
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s4_device_base_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Device universe for Layer-3 / Segment 6A. One row per device per (manifest_fingerprint,
    seed), with device classification, primary owner context and static device risk/capability
    flags.

    '
- output_id: s4_device_links_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s4_device_links_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s4_device_links_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s4/device_links
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s4_device_links_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Device-to-entity edges for Layer-3 / Segment 6A. Links each device_id
    to one or more parties/accounts/instruments/merchants with a link_role describing
    the semantics.

    '
- output_id: s4_entity_neighbourhoods_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s4_entity_neighbourhoods_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s4_entity_neighbourhoods_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s4/entity_neighbourhoods
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s4_entity_neighbourhoods_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Per-entity graph neighbourhood metrics for Layer-3 / Segment 6A (devices
    per party, IPs per device, shared-device/shared-IP degrees, etc.), derived from
    S4 base and link datasets.

    '
- output_id: s4_ip_base_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s4_ip_base_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s4_ip_base_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s4/ip_base
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s4_ip_base_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'IP / network endpoint universe for Layer-3 / Segment 6A. One row per
    IP/endpoint per (manifest_fingerprint, seed), including masked representation,
    ip_type, asn_class, geo hints and static risk tags.

    '
- output_id: s4_ip_links_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s4_ip_links_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s4_ip_links_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s4/ip_links
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s4_ip_links_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'IP-to-device/entity edges for Layer-3 / Segment 6A. Links each ip_id
    to one or more devices/parties/merchants with a link_role describing the semantics.

    '
- output_id: s4_network_summary_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s4_network_summary_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s4_network_summary_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s4/network_summary
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s4_network_summary_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Aggregate graph diagnostics for Layer-3 / Segment 6A: degree distributions
    and sharing summaries per region/segment/account_type and globally.

    '
- output_id: s5_account_fraud_roles_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s5_account_fraud_roles_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s5_account_fraud_roles_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s5/account_fraud_roles
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s5_account_fraud_roles_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Static fraud posture for accounts in Layer-3 / Segment 6A. One row
    per account per (manifest_fingerprint, seed).

    '
- output_id: s5_device_fraud_roles_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s5_device_fraud_roles_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s5_device_fraud_roles_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s5/device_fraud_roles
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s5_device_fraud_roles_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Static fraud posture for devices in Layer-3 / Segment 6A. One row
    per device per (manifest_fingerprint, seed).

    '
- output_id: s5_ip_fraud_roles_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s5_ip_fraud_roles_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s5_ip_fraud_roles_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s5/ip_fraud_roles
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s5_ip_fraud_roles_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Static fraud posture for IPs/endpoints in Layer-3 / Segment 6A. One
    row per ip_id per (manifest_fingerprint, seed).

    '
- output_id: s5_issue_table_6A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6A
  path_template: data/layer3/6A/validation/manifest_fingerprint={manifest_fingerprint}/s5_issue_table_6A.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/validation/6A/validation_issue_table_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s5_issue_table_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Row-level issue table for 6A validation, containing one row per failing/borderline
    check instance.

    '
- output_id: s5_merchant_fraud_roles_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s5_merchant_fraud_roles_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s5_merchant_fraud_roles_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s5/merchant_fraud_roles
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s5_merchant_fraud_roles_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Static fraud posture for merchants in Layer-3 / Segment 6A. One row
    per merchant, keyed by merchant_id.

    '
- output_id: s5_party_fraud_roles_6A
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash
  owner_segment: 6A
  path_template: data/layer3/6A/s5_party_fraud_roles_6A/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/s5_party_fraud_roles_6A.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  schema_ref: schemas.6A.yaml#/s5/party_fraud_roles
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s5_party_fraud_roles_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Static fraud posture for parties in Layer-3 / Segment 6A. One row
    per party per (manifest_fingerprint, seed).

    '
- output_id: s5_validation_report_6A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6A
  path_template: data/layer3/6A/validation/manifest_fingerprint={manifest_fingerprint}/s5_validation_report_6A.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/validation/6A/validation_report_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#s5_validation_report_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Segment-level validation report for Layer-3 / Segment 6A, summarising
    the results of S5 checks across S1-S4 and S5 fraud roles.

    '
- output_id: sealed_inputs_6A
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6A
  path_template: data/layer3/6A/sealed_inputs/manifest_fingerprint={manifest_fingerprint}/sealed_inputs_6A.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/gate/6A/sealed_inputs_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#sealed_inputs_6A
  primary_key: []
  join_keys: []
  read_requires_gates:
  - gate.layer3.6A.validation
  immutability:
    immutable_once_written: true
  description: 'Manifest of all artefacts 6A is authorised to depend on for a given
    manifest_fingerprint, with roles, digests, and read scopes.

    '
- output_id: taxonomy_account_types_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/taxonomy/account_taxonomy_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/taxonomy/account_taxonomy_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#taxonomy_account_types_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Account/product taxonomies for 6A.
- output_id: taxonomy_devices_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/taxonomy/device_taxonomy_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/taxonomy/device_taxonomy_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#taxonomy_devices_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Device taxonomies (device_type, OS, UA families, risk codes).
- output_id: taxonomy_fraud_roles_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/taxonomy/fraud_role_taxonomy_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/taxonomy/fraud_role_taxonomy_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#taxonomy_fraud_roles_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Fraud-role enum taxonomy for parties/accounts/merchants/devices/IPs.
- output_id: taxonomy_instrument_types_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/taxonomy/instrument_taxonomy_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/taxonomy/instrument_taxonomy_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#taxonomy_instrument_types_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Instrument, scheme, and network taxonomies for 6A.
- output_id: taxonomy_ips_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/taxonomy/ip_taxonomy_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/taxonomy/ip_taxonomy_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#taxonomy_ips_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: IP/endpoint taxonomies (type and ASN class).
- output_id: taxonomy_party_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/taxonomy/party_taxonomy_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/taxonomy/party_taxonomy_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#taxonomy_party_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Party/segment/region taxonomies for 6A.
- output_id: validation_bundle_6A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6A
  path_template: data/layer3/6A/validation/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/validation/6A/validation_bundle_index_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#validation_bundle_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Validation bundle directory for Layer-3 / Segment 6A, containing the
    evidence index and HashGate outputs for this manifest_fingerprint.

    '
- output_id: validation_bundle_index_6A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6A
  path_template: data/layer3/6A/validation/manifest_fingerprint={manifest_fingerprint}/validation_bundle_index_6A.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/validation/6A/validation_bundle_index_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#validation_bundle_index_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Index for the Layer-3 / Segment 6A validation bundle, listing all
    evidence files and their SHA-256 digests.

    '
- output_id: validation_passed_flag_6A
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6A
  path_template: data/layer3/6A/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/validation/6A/passed_flag_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#validation_passed_flag_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'HashGate flag for Layer-3 / Segment 6A. Contains the SHA-256 digest
    over the validation bundle for this manifest_fingerprint.

    '
- output_id: validation_policy_6A
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6A
  path_template: config/layer3/6A/policy/validation_policy_6A.v1.yaml
  partitions: []
  schema_ref: schemas.6A.yaml#/policy/validation_policy_6A
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6A/dataset_dictionary.layer3.6A.yaml#validation_policy_6A
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Validation policy/checklist for 6A.S5 (PASS/WARN/FAIL thresholds and
    required checks).
- output_id: amount_model_6B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6B
  path_template: config/layer3/6B/amount_model_6B.yaml
  partitions: []
  schema_ref: schemas.6B.yaml#/policy/amount_model_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#amount_model_6B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Amount model policy for S2.
- output_id: attachment_policy_6B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6B
  path_template: config/layer3/6B/attachment_policy_6B.yaml
  partitions: []
  schema_ref: schemas.6B.yaml#/policy/attachment_policy_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#attachment_policy_6B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Attachment policy for entity selection and linking (S1).
- output_id: bank_view_policy_6B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6B
  path_template: config/layer3/6B/bank_view_policy_6B.yaml
  partitions: []
  schema_ref: schemas.6B.yaml#/policy/bank_view_policy_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#bank_view_policy_6B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Bank-view policy for S4.
- output_id: behaviour_config_6B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6B
  path_template: config/layer3/6B/behaviour_config_6B.yaml
  partitions: []
  schema_ref: schemas.6B.yaml#/policy/behaviour_config_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#behaviour_config_6B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Optional feature flags and guardrails for 6B behaviour.
- output_id: behaviour_prior_pack_6B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6B
  path_template: config/layer3/6B/behaviour_prior_pack_6B.yaml
  partitions: []
  schema_ref: schemas.6B.yaml#/policy/behaviour_prior_pack_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#behaviour_prior_pack_6B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Behaviour priors pack for 6B (distributions/parameters used by S1-S4;
    sealed by S0).
- output_id: case_policy_6B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6B
  path_template: config/layer3/6B/case_policy_6B.yaml
  partitions: []
  schema_ref: schemas.6B.yaml#/policy/case_policy_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#case_policy_6B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Case policy for S4.
- output_id: delay_models_6B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6B
  path_template: config/layer3/6B/delay_models_6B.yaml
  partitions: []
  schema_ref: schemas.6B.yaml#/policy/delay_models_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#delay_models_6B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Delay models for S4.
- output_id: flow_rng_policy_6B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6B
  path_template: config/layer3/6B/flow_rng_policy_6B.yaml
  partitions: []
  schema_ref: schemas.6B.yaml#/policy/flow_rng_policy_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#flow_rng_policy_6B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG policy for S2 flows.
- output_id: flow_shape_policy_6B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6B
  path_template: config/layer3/6B/flow_shape_policy_6B.yaml
  partitions: []
  schema_ref: schemas.6B.yaml#/policy/flow_shape_policy_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#flow_shape_policy_6B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Flow shape policy for S2.
- output_id: fraud_campaign_catalogue_config_6B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6B
  path_template: config/layer3/6B/fraud_campaign_catalogue_config_6B.yaml
  partitions: []
  schema_ref: schemas.6B.yaml#/policy/fraud_campaign_catalogue_config_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#fraud_campaign_catalogue_config_6B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Fraud campaign catalogue configuration for S3.
- output_id: fraud_overlay_policy_6B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6B
  path_template: config/layer3/6B/fraud_overlay_policy_6B.yaml
  partitions: []
  schema_ref: schemas.6B.yaml#/policy/fraud_overlay_policy_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#fraud_overlay_policy_6B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Fraud overlay policy for S3.
- output_id: fraud_rng_policy_6B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6B
  path_template: config/layer3/6B/fraud_rng_policy_6B.yaml
  partitions: []
  schema_ref: schemas.6B.yaml#/policy/fraud_rng_policy_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#fraud_rng_policy_6B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG policy for S3 fraud overlays.
- output_id: label_rng_policy_6B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6B
  path_template: config/layer3/6B/label_rng_policy_6B.yaml
  partitions: []
  schema_ref: schemas.6B.yaml#/policy/label_rng_policy_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#label_rng_policy_6B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG policy for S4 labelling.
- output_id: rng_audit_log_6B
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6B
  path_template: logs/layer3/6B/rng/audit/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/rng_audit_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/core/rng_audit_log
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#rng_audit_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Run-scoped RNG audit envelope for 6B runs.
- output_id: rng_event_bank_view_label
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6B
  path_template: logs/layer3/6B/rng/events/bank_view_label/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/bank_view_label
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#rng_event_bank_view_label
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6B.S4 bank-view label sampling.
- output_id: rng_event_event_stream_baseline
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6B
  path_template: logs/layer3/6B/rng/events/event_stream_baseline/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/event_stream_baseline
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#rng_event_event_stream_baseline
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6B.S2 baseline event stream draws.
- output_id: rng_event_flow_anchor_baseline
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6B
  path_template: logs/layer3/6B/rng/events/flow_anchor_baseline/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/flow_anchor_baseline
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#rng_event_flow_anchor_baseline
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6B.S2 baseline flow anchor draws.
- output_id: rng_event_fraud_campaign_pick
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6B
  path_template: logs/layer3/6B/rng/events/fraud_campaign_pick/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/fraud_campaign_pick
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#rng_event_fraud_campaign_pick
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6B.S3 fraud campaign selection.
- output_id: rng_event_fraud_overlay_apply
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6B
  path_template: logs/layer3/6B/rng/events/fraud_overlay_apply/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/fraud_overlay_apply
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#rng_event_fraud_overlay_apply
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6B.S3 fraud overlay application.
- output_id: rng_event_truth_label
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6B
  path_template: logs/layer3/6B/rng/events/truth_label/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/part-*.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/events/truth_label
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#rng_event_truth_label
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG events for 6B.S4 truth-label sampling.
- output_id: rng_policy_6B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6B
  path_template: config/layer3/6B/rng_policy_6B.yaml
  partitions: []
  schema_ref: schemas.6B.yaml#/policy/rng_policy_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#rng_policy_6B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: RNG family mapping for S1 decision families.
- output_id: rng_profile_layer3
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6B
  path_template: config/layer3/6B/rng_profile_layer3.yaml
  partitions: []
  schema_ref: schemas.6B.yaml#/policy/rng_profile_layer3
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#rng_profile_layer3
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Layer-3 RNG profile (Philox parameters and invariants).
- output_id: rng_trace_log_6B
  class: stream
  exposure: internal
  scope: scope_seed_parameter_hash_run_id
  owner_segment: 6B
  path_template: logs/layer3/6B/rng/trace/seed={seed}/parameter_hash={parameter_hash}/run_id={run_id}/rng_trace_log.jsonl
  partitions:
  - seed
  - parameter_hash
  - run_id
  schema_ref: schemas.layer3.yaml#/rng/core/rng_trace_log
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#rng_trace_log
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Aggregated RNG trace log for 6B runs (per event family draws/blocks).
- output_id: s0_gate_receipt_6B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6B
  path_template: data/layer3/6B/s0_gate_receipt/manifest_fingerprint={manifest_fingerprint}/s0_gate_receipt_6B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/gate/6B/s0_gate_receipt_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s0_gate_receipt_6B
  primary_key:
  - manifest_fingerprint
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Behavioural gate receipt for 6B; one JSON object per manifest_fingerprint
    summarising upstream gates, contracts_6B and sealed_inputs_digest_6B.

    '
- output_id: s1_arrival_entities_6B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s1_arrival_entities_6B/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s1/arrival_entities_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s1_arrival_entities_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - arrival_seq
  join_keys:
  - seed
  - manifest_fingerprint
  - scenario_id
  - merchant_id
  - arrival_seq
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: Arrival-level entity attachments; join surface for enrichment (not traffic).
    identifiers for Layer-3 behaviour; one row per arrival.

    '
- output_id: s1_session_index_6B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s1_session_index_6B/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s1/session_index_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s1_session_index_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - session_id
  join_keys:
  - seed
  - manifest_fingerprint
  - scenario_id
  - session_id
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: Session grouping index for arrivals; join surface (not traffic).
    relationships and anchor metadata.

    '
- output_id: s2_event_stream_baseline_6B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s2_event_stream_baseline_6B/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s2/event_stream_baseline_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s2_event_stream_baseline_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  - event_seq
  join_keys:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  - flow_id
  - event_seq
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: Baseline behavioural traffic event stream (pre-overlay).

    '
- output_id: s2_flow_anchor_baseline_6B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s2_flow_anchor_baseline_6B/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s2/flow_anchor_baseline_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s2_flow_anchor_baseline_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  join_keys:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  - flow_id
  - merchant_id
  - arrival_seq
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: Flow-level context surface for baseline stream; join surface for enrichment.
    (seed, manifest_fingerprint, scenario_id).

    '
- output_id: s3_campaign_catalogue_6B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s3_campaign_catalogue_6B/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/s3_campaign_catalogue_6B.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s3/campaign_catalogue_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s3_campaign_catalogue_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - campaign_id
  join_keys: []
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: 'Catalogue of realised fraud/abuse campaigns with campaign_id, fraud_type,
    parameters and the flows affected.

    '
- output_id: s3_event_stream_with_fraud_6B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s3_event_stream_with_fraud_6B/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s3/event_stream_with_fraud_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s3_event_stream_with_fraud_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  - event_seq
  join_keys:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  - flow_id
  - event_seq
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: Post-overlay behavioural traffic event stream (fraud/abuse injected).
    for training/labelling flows.

    '
- output_id: s3_flow_anchor_with_fraud_6B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s3_flow_anchor_with_fraud_6B/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s3/flow_anchor_with_fraud_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s3_flow_anchor_with_fraud_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  join_keys:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  - flow_id
  - merchant_id
  - arrival_seq
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: Flow-level context surface for post-overlay stream; join surface for enrichment.

    '
- output_id: s4_case_timeline_6B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s4_case_timeline_6B/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s4/case_timeline_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s4_case_timeline_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - case_id
  - case_event_seq
  join_keys:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  - case_id
  - case_event_seq
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: Case lifecycle timeline (truth product; not traffic).
    cases.

    '
- output_id: s4_event_labels_6B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s4_event_labels_6B/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s4/event_labels_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s4_event_labels_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  - event_seq
  join_keys:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  - flow_id
  - event_seq
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: Event-level truth labels aligned to post-overlay stream (not traffic).

    '
- output_id: s4_flow_bank_view_6B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s4_flow_bank_view_6B/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s4/flow_bank_view_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s4_flow_bank_view_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  join_keys:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  - flow_id
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: Flow-level bank-view labels aligned to post-overlay stream (not traffic).
    would act on).

    '
- output_id: s4_flow_truth_labels_6B
  class: surface
  exposure: internal
  scope: scope_seed_manifest_fingerprint_parameter_hash_scenario_id
  owner_segment: 6B
  path_template: data/layer3/6B/s4_flow_truth_labels_6B/seed={seed}/parameter_hash={parameter_hash}/manifest_fingerprint={manifest_fingerprint}/scenario_id={scenario_id}/part-*.parquet
  partitions:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  schema_ref: schemas.6B.yaml#/s4/flow_truth_labels_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s4_flow_truth_labels_6B
  primary_key:
  - seed
  - manifest_fingerprint
  - scenario_id
  - flow_id
  join_keys:
  - seed
  - manifest_fingerprint
  - parameter_hash
  - scenario_id
  - flow_id
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: Flow-level truth labels aligned to post-overlay stream (not traffic).

    '
- output_id: s5_issue_table_6B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6B
  path_template: data/layer3/6B/validation/manifest_fingerprint={manifest_fingerprint}/s5_issue_table_6B.parquet
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/validation/6B/s5_issue_table
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s5_issue_table_6B
  primary_key:
  - manifest_fingerprint
  - check_id
  - issue_id
  join_keys: []
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: 'Structured list of validation issues for 6B (one row per failing/warning
    check).

    '
- output_id: s5_validation_report_6B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6B
  path_template: data/layer3/6B/validation/manifest_fingerprint={manifest_fingerprint}/s5_validation_report_6B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/validation/6B/s5_validation_report
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#s5_validation_report_6B
  primary_key:
  - manifest_fingerprint
  join_keys: []
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: 'Segment 6B world-level validation report; one JSON document summarising
    the results of S5 checks across S1-S4 artefacts.

    '
- output_id: sealed_inputs_6B
  class: surface
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6B
  path_template: data/layer3/6B/sealed_inputs/manifest_fingerprint={manifest_fingerprint}/sealed_inputs_6B.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/gate/6B/sealed_inputs_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#sealed_inputs_6B
  primary_key:
  - manifest_fingerprint
  - owner_layer
  - owner_segment
  - manifest_key
  join_keys: []
  read_requires_gates:
  - gate.layer3.6B.validation
  immutability:
    immutable_once_written: true
  description: 'Sealed list of all artefacts 6B is allowed to read for a given manifest_fingerprint,
    with roles, schema_refs and digests.

    '
- output_id: segment_validation_policy_6B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6B
  path_template: config/layer3/6B/segment_validation_policy_6B.yaml
  partitions: []
  schema_ref: schemas.6B.yaml#/policy/segment_validation_policy_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#segment_validation_policy_6B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Segment validation policy for S5.
- output_id: sessionisation_policy_6B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6B
  path_template: config/layer3/6B/sessionisation_policy_6B.yaml
  partitions: []
  schema_ref: schemas.6B.yaml#/policy/sessionisation_policy_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#sessionisation_policy_6B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Session key and inactivity gap policy (S1).
- output_id: timing_policy_6B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6B
  path_template: config/layer3/6B/timing_policy_6B.yaml
  partitions: []
  schema_ref: schemas.6B.yaml#/policy/timing_policy_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#timing_policy_6B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Timing policy for S2.
- output_id: truth_labelling_policy_6B
  class: surface
  exposure: internal
  scope: scope_global
  owner_segment: 6B
  path_template: config/layer3/6B/truth_labelling_policy_6B.yaml
  partitions: []
  schema_ref: schemas.6B.yaml#/policy/truth_labelling_policy_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#truth_labelling_policy_6B
  primary_key: []
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: Truth labelling policy for S4.
- output_id: validation_bundle_6B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6B
  path_template: data/layer3/6B/validation/manifest_fingerprint={manifest_fingerprint}/
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/validation/6B/validation_bundle_index_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#validation_bundle_6B
  primary_key:
  - manifest_fingerprint
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'World-level validation bundle for Segment 6B; directory of validation
    artefacts plus index.json and _passed.flag.

    '
- output_id: validation_bundle_index_6B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6B
  path_template: data/layer3/6B/validation/manifest_fingerprint={manifest_fingerprint}/index.json
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/validation/6B/validation_bundle_index_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#validation_bundle_index_6B
  primary_key:
  - manifest_fingerprint
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Index for the Segment 6B validation bundle, listing evidence files
    and their SHA-256 digests.

    '
- output_id: validation_passed_flag_6B
  class: gate
  exposure: internal
  scope: scope_manifest_fingerprint
  owner_segment: 6B
  path_template: data/layer3/6B/validation/manifest_fingerprint={manifest_fingerprint}/_passed.flag
  partitions:
  - manifest_fingerprint
  schema_ref: schemas.layer3.yaml#/validation/6B/passed_flag_6B
  dictionary_ref: docs/model_spec/data-engine/layer-3/specs/contracts/6B/dataset_dictionary.layer3.6B.yaml#validation_passed_flag_6B
  primary_key:
  - manifest_fingerprint
  join_keys: []
  read_requires_gates: []
  immutability:
    immutable_once_written: true
  description: 'Segment 6B HashGate flag; encodes SHA-256 digest over the 6B validation
    bundle.

    '
