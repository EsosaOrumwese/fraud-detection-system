<<<EC-FIX id=1>>
Stage: LaunchPipelineContainer
Failure_event: Missing `Dockerfile.lock`
Detection:
  trigger: file existence check for `Dockerfile.lock`
  error_code: JP-M001
Recovery:
  action: abort
  max_retries: 0
  backoff_sec: 0
Idempotence:
  guarantee: no container startup without lock file
Monitoring:
  metric_name: dockerfile_lock_missing_total
  alert_thresh: dockerfile_lock_missing_total > 0
Expected_format: project root file `Dockerfile.lock` containing `IMAGE_SHA256=<hex256>`
Interface_affected: pipeline_launcher.sh
Test_pathway:
  type: CI
  injection: remove `Dockerfile.lock` and run pipeline_launcher.sh
<<<END EC-FIX>>>

<<<EC-FIX id=2>>
Stage: WriteBuildManifest
Failure_event: Cannot write `/tmp/build.manifest`
Detection:
  trigger: writeManifest() fails with PermissionError or IOError on `/tmp/build.manifest`
  error_code: JP-M002
Recovery:
  action: abort
  max_retries: 0
  backoff_sec: 0
Idempotence:
  guarantee: no partial manifest on abort
Monitoring:
  metric_name: build_manifest_write_fail_total
  alert_thresh: build_manifest_write_fail_total > 0
Expected_format: writable `/tmp/build.manifest` with ≥5 lines (container_hash, hostname, utc_start, source_sha1, master_seed_hex)
Interface_affected: pipeline_launcher.sh
Test_pathway:
  type: CI
  injection: make `/tmp` non-writable and run pipeline_launcher.sh
<<<END EC-FIX>>>

<<<EC-FIX id=3>>
Stage: BuildArtefactManifest
Failure_event: Missing `artefact_registry.yaml`
Detection:
  trigger: artefact_loader.py raises FileNotFoundError for `artefact_registry.yaml`
  error_code: JP-M003
Recovery:
  action: abort
  max_retries: 0
  backoff_sec: 0
Idempotence:
  guarantee: no artefact processing on abort
Monitoring:
  metric_name: artefact_registry_missing_total
  alert_thresh: artefact_registry_missing_total > 0
Expected_format: YAML file `artefact_registry.yaml` listing all artefacts and `license_map`
Interface_affected: artefact_loader.py
Test_pathway:
  type: CI
  injection: delete `artefact_registry.yaml` and run artefact_loader.py
<<<END EC-FIX>>>

<<<EC-FIX id=4>>
Stage: ValidateLicences
Failure_event: Missing licence file for an artefact
Detection:
  trigger: validate_licences.py finds a path in `manifest.licence_digests` without a file under `LICENSES/`
  error_code: JP-M004
Recovery:
  action: abort
  max_retries: 0
  backoff_sec: 0
Idempotence:
  guarantee: no validation pass on abort
Monitoring:
  metric_name: licence_file_missing_total
  alert_thresh: licence_file_missing_total > 0
Expected_format: Markdown licence under `LICENSES/` for each artefact path
Interface_affected: validate_licences.py
Test_pathway:
  type: CI
  injection: remove a licence file and run validate_licences.py
<<<END EC-FIX>>>

<<<EC-FIX id=5>>
Stage: ValidateConfigSchemas
Failure_event: Missing or mismatched JSON Schema for a config domain
Detection:
  trigger: bootstrap_validator.py raises SchemaVersionError for missing or wrong `schemas/<domain>.json`
  error_code: JP-M005
Recovery:
  action: abort
  max_retries: 0
  backoff_sec: 0
Idempotence:
  guarantee: no schema validation on abort
Monitoring:
  metric_name: config_schema_error_total
  alert_thresh: config_schema_error_total > 0
Expected_format: `schemas/<domain>.json` present for each YAML `schema` header, matching major version
Interface_affected: bootstrap_validator.py
Test_pathway:
  type: CI
  injection: remove `schemas/hurdle_coefficients.json` and run bootstrap_validator.py
<<<END EC-FIX>>>

<<<EC-FIX id=6>>
Stage: BootstrapValidation
Failure_event: Missing `bootstrap_validator.py`
Detection:
  trigger: CI fails to locate `bootstrap_validator.py` in project root
  error_code: JP-M006
Recovery:
  action: abort
  max_retries: 0
  backoff_sec: 0
Idempotence:
  guarantee: no validation run on abort
Monitoring:
  metric_name: bootstrap_validator_missing_total
  alert_thresh: bootstrap_validator_missing_total > 0
Expected_format: executable `bootstrap_validator.py` in project root
Interface_affected: bootstrap_validator.py
Test_pathway:
  type: CI
  injection: delete `bootstrap_validator.py` and run validate_config_schemas
<<<END EC-FIX>>>

<<<EC-FIX id=7>>
Stage: RegisterDataset
Failure_event: Postgres `datasets` catalog unreachable or missing table
Detection:
  trigger: register_dataset.py raises connection or UNIQUE_VIOLATION error
  error_code: JP-M007
Recovery:
  action: retry
  max_retries: 3
  backoff_sec: 5
Idempotence:
  guarantee: duplicate insert retries produce no additional rows
Monitoring:
  metric_name: datasets_catalog_error_total
  alert_thresh: datasets_catalog_error_total > 0
Expected_format: Postgres DSN and table `datasets(id, parameter_hash, seed, path)` with unique constraint on (parameter_hash, seed)
Interface_affected: register_dataset.py
Test_pathway:
  type: integration
  injection: point to invalid Postgres URL and run register_dataset.py
<<<END EC-FIX>>>

<<<EC-FIX id=8>>
Stage: JumpRNGStreams
Failure_event: Missing `logs/rng_trace.log`
Detection:
  trigger: firewall.py fails to open or write to `logs/rng_trace.log`
  error_code: JP-M008
Recovery:
  action: abort
  max_retries: 0
  backoff_sec: 0
Idempotence:
  guarantee: no RNG offset logging on abort
Monitoring:
  metric_name: rng_trace_log_missing_total
  alert_thresh: rng_trace_log_missing_total > 0
Expected_format: `logs/rng_trace.log` with CSV lines `module,identifier,offset`
Interface_affected: firewall.py
Test_pathway:
  type: CI
  injection: delete `logs/rng_trace.log` and run any RNG-driven module
<<<END EC-FIX>>>

<<<EC-FIX id=9>>
Stage: RunDSTEdgePasser
Failure_event: Missing `zoneinfo_version.yml`
Detection:
  trigger: firewall.py raises FileNotFoundError for `zoneinfo_version.yml`
  error_code: JP-M009
Recovery:
  action: abort
  max_retries: 0
  backoff_sec: 0
Idempotence:
  guarantee: no DST edge pass on abort
Monitoring:
  metric_name: zoneinfo_version_missing_total
  alert_thresh: zoneinfo_version_missing_total > 0
Expected_format: YAML `zoneinfo_version.yml` containing build identifier
Interface_affected: firewall.py
Test_pathway:
  type: CI
  injection: delete `zoneinfo_version.yml` and run firewall.py
<<<END EC-FIX>>>

<<<EC-FIX id=10>>
Stage: UploadToHashGate
Failure_event: HashGate HTTP 5xx or service unreachable
Detection:
  trigger: upload_to_hashgate.py detects non-200 HTTP response
  error_code: JP-M010
Recovery:
  action: retry
  max_retries: 3
  backoff_sec: 10
Idempotence:
  guarantee: idempotent POST; retries won’t duplicate entries
Monitoring:
  metric_name: hashgate_post_fail_total
  alert_thresh: hashgate_post_fail_total > 0
Expected_format: HTTP 200 response from HashGate on manifest POST
Interface_affected: upload_to_hashgate.py
Test_pathway:
  type: integration
  injection: point to invalid HashGate endpoint and run upload_to_hashgate.py
<<<END EC-FIX>>>

<<<EC-FIX id=11>>
Stage: EnforceImmutability
Failure_event: Dataset directory not read-only or missing collision detection
Detection:
  trigger: enforce_immutability.py fails to write to `datasets/<parameter_hash>_<seed>/` or missing UNIQUE_VIOLATION catch
  error_code: JP-M011
Recovery:
  action: abort
  max_retries: 0
  backoff_sec: 0
Idempotence:
  guarantee: read-only enforcement prevents accidental overwrite
Monitoring:
  metric_name: immutability_violation_total
  alert_thresh: immutability_violation_total > 0
Expected_format: NFS-mounted `datasets/<parameter_hash>_<seed>/` with read-only permissions and UNIQUE constraint
Interface_affected: enforce_immutability.py
Test_pathway:
  type: integration
  injection: remount directory writable and attempt regenerate
<<<END EC-FIX>>>

##### END EDGE-CASE SPEC #####

id=1  | Confidence=HIGH   | Notes=Abort on missing lock to ensure container provenance.  
id=2  | Confidence=HIGH   | Notes=Abort if build manifest cannot be written.  
id=3  | Confidence=HIGH   | Notes=Require artefact registry to define all inputs.  
id=4  | Confidence=HIGH   | Notes=Ensure licence compliance before sampling.  
id=5  | Confidence=MEDIUM | Notes=Validate schema versions to prevent config drift.  
id=6  | Confidence=HIGH   | Notes=Require bootstrap validator for reproducibility check.  
id=7  | Confidence=HIGH   | Notes=Retry dataset registration to handle transient DB errors.  
id=8  | Confidence=HIGH   | Notes=Abort on missing RNG trace to guarantee stream isolation.  
id=9  | Confidence=HIGH   | Notes=Require zoneinfo version for DST edge correctness.  
id=10 | Confidence=MEDIUM | Notes=Retry HashGate posts for service resiliency.  
id=11 | Confidence=HIGH   | Notes=Enforce read-only data directories for immutability.  

<<ES-END>>