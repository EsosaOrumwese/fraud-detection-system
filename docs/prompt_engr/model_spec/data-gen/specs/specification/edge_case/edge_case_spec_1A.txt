<<<EC-FIX id=1>>
Stage: ComputeGDPBuckets
Failure_event: Missing input artefact `gdp_bucket_map_2024.parquet`
Detection:
trigger: load_manifest() detects FileNotFoundError for S3 path
error_code: JP-M001
Recovery:
action: abort
max_retries: 0
backoff_sec: 0
Idempotence:
guarantee: no state change on abort
Monitoring:
metric_name: artefact_missing_total
alert_thresh: artefact_missing_total > 0
Expected_format: file present at S3 path
Interface_affected: artefact_registry_loader/load_manifest
Test_pathway:
type: CI
injection: remove file from S3 path and run load_manifest()
<<<END EC-FIX>>>

<<<EC-FIX id=2>>
Stage: CrossBorderExpansion
Failure_event: Dirichlet parameter α ≤ 0 in `crossborder_hyperparams.yaml`
Detection:
trigger: validation check on loaded α values
error_code: JP-M002
Recovery:
action: abort
max_retries: 0
backoff_sec: 0
Idempotence:
guarantee: no state change on abort
Monitoring:
metric_name: invalid_param_total
alert_thresh: invalid_param_total > 0
Expected_format: α ∈ ℝ⁺
Interface_affected: alloc_dirichlet(), sample_nb_poisson_component()
Test_pathway:
type: fuzz
injection: inject α = 0 or negative in hyperparams file
<<<END EC-FIX>>>

<<<EC-FIX id=3>>
Stage: SiteIndexing
Failure_event: Site identifier overflow beyond 6 digits
Detection:
trigger: site_id_generator produces ID length >6
error_code: JP-M003
Recovery:
action: abort
max_retries: 0
backoff_sec: 0
Idempotence:
guarantee: no duplicate writes on retry
Monitoring:
metric_name: site_id_overflow_total
alert_thresh: site_id_overflow_total > 0
Expected_format: site_id length = 6 digits
Interface_affected: site_id_generator/generate_id
Test_pathway:
type: fuzz
injection: request >1,000,000 site IDs in generation
<<<END EC-FIX>>>

<<<EC-FIX id=4>>
Stage: AuditLogging
Failure_event: Missing audit log entry invalidates build
Detection:
trigger: post-build log count mismatch detection
error_code: JP-M004
Recovery:
action: abort
max_retries: 0
backoff_sec: 0
Idempotence:
guarantee: no partial log replay on retry
Monitoring:
metric_name: audit_log_missing_total
alert_thresh: audit_log_missing_total > 0
Expected_format: continuous pre/post counter entries
Interface_affected: audit_logger/log_event
Test_pathway:
type: CI
injection: omit a log entry in CI replay
<<<END EC-FIX>>>

<<<EC-FIX id=5>>
Stage: StructuralValidation
Failure_event: Structural validation failure on read-back
Detection:
trigger: validation_runner.validate_parquet() returns error
error_code: JP-M005
Recovery:
action: abort
max_retries: 0
backoff_sec: 0
Idempotence:
guarantee: no file writes on retry
Monitoring:
metric_name: structural_validation_fail_total
alert_thresh: structural_validation_fail_total > 0
Expected_format: schema-compliant Parquet file
Interface_affected: validation_runner/validate_parquet
Test_pathway:
type: unit
injection: write malformed Parquet in CI test
<<<END EC-FIX>>>

<<<EC-FIX id=6>>
Stage: RandomSeed
Failure_event: Uninitialized or missing `random_seed` leads to non-determinism
Detection:
trigger: check for null or missing seed before run
error_code: JP-M006
Recovery:
action: abort
max_retries: 0
backoff_sec: 0
Idempotence:
guarantee: no change in RNG state on abort
Monitoring:
metric_name: nondeterminism_fault_total
alert_thresh: nondeterminism_fault_total > 0
Expected_format: random_seed ∈ ℕ
Interface_affected: stochastic_engine/set_seed
Test_pathway:
type: CI
injection: run build without random_seed parameter
<<<END EC-FIX>>>

<<<EC-FIX id=7>>
Stage: Provenance
Failure_event: Missing SHA-256 digest placeholder for calibration scripts
Detection:
trigger: digest value matches placeholder pattern `<to-be-populated`
error_code: JP-M007
Recovery:
action: abort
max_retries: 0
backoff_sec: 0
Idempotence:
guarantee: no manifest update on abort
Monitoring:
metric_name: missing_digest_total
alert_thresh: missing_digest_total > 0
Expected_format: sha256 = 64-hex string
Interface_affected: provenance_tracker/record_digest
Test_pathway:
type: CI
injection: run CI with placeholder digest values
<<<END EC-FIX>>>

##### END EDGE-CASE SPEC #####

id=1 | Confidence=HIGH | Notes=Abort build on missing GDP bucket artefact to prevent silent data drift.  
id=2 | Confidence=HIGH | Notes=Enforce positive Dirichlet parameters to maintain valid probability sampling.  
id=3 | Confidence=MEDIUM | Notes=Prevent ID overflow to guarantee consistent site identifiers.  
id=4 | Confidence=HIGH | Notes=Abort on missing audit logs to ensure full traceability.  
id=5 | Confidence=MEDIUM | Notes=Abort on Parquet validation failure to maintain schema integrity.  
id=6 | Confidence=HIGH | Notes=Require explicit RNG seed to guarantee reproducibility.  
id=7 | Confidence=HIGH | Notes=Enforce SHA-256 digest presence to guarantee artefact provenance.  

<<ES-END>>