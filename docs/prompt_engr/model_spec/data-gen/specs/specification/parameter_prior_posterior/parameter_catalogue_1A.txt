--- PP 1 ---
Name: Hurdle Bernoulli uniform deviate
Symbol: $u$
Scope: merchant_location
Prior_type: Uniform
Prior_specified: Yes
Calibration_recipe: No
Posterior_validation: No
Provenance_tag: Yes (`rng_policy.yml` governs Philox RNG) :contentReference[oaicite:43]{index=43}
Units: dimensionless
Default_policy: abort on RNG error
Interface_consumer: `hurdle_decision` module in site‑generator
Description: Uniform(0,1) draw deciding single vs. multi‑site branch.
Anchor: “Draw $u\sim U(0,1)$; multi‑site iff $u<\pi$.” :contentReference[oaicite:44]{index=44}
Context: “… decision: draw $u\sim U(0,1)$; if $u<\pi$ merchant is multi-site, else single-site with $N=1$. Logged as above …”
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=Y
  posterior_missing=Y
  provenance_missing=N
  units_missing=N
  default_policy_missing=Y
  interface_consumer_missing=Y
  description_missing=N
Confidence=HIGH
--- END PP 1 ---

--- PP 2 ---
Name: Hurdle logistic coefficients
Symbol: $\beta_0,\beta_{\mathrm{mcc}},\beta_{\mathrm{channel}},\beta_{\mathrm{dev}}$
Scope: merchant_location
Prior_type: Loaded constant (MLE estimates)
Prior_specified: Yes
Calibration_recipe: No
Posterior_validation: Yes (stationarity test on `hurdle_coefficients.yaml`) :contentReference[oaicite:45]{index=45}
Provenance_tag: Yes (`hurdle_coefficients.yaml`, semver & sha256_digest) :contentReference[oaicite:46]{index=46}
Units: log‑odds
Default_policy: abort on missing file
Interface_consumer: `hurdle_coefficients.yaml` loader in generator
Description: Regression weights mapping merchant features to multi‑site probability π.
Anchor: “full hurdle coefficient vector $\beta=(\beta_{0},\beta_{\mathrm{mcc}},\beta_{\mathrm{channel}},\beta_{\mathrm{dev}})$ is stored wholesale inside `hurdle_coefficients.yaml`” :contentReference[oaicite:47]{index=47}
Context: “Predictors = … developmental (GDP) bucket dummies. The full hurdle coefficient vector $\beta$ …”
Gap_flags:
  prior_missing=N
  hyperparams_missing=Y
  calibration_missing=Y
  posterior_missing=N
  provenance_missing=N
  units_missing=N
  default_policy_missing=Y
  interface_consumer_missing=Y
  description_missing=N
Confidence=HIGH
--- END PP 2 ---

--- PP 3 ---
# Name: NB mean link coefficients
# NB-mean block removed – coefficients now co-located inside
# config/hurdle_coefficients.yaml (see change above).
--- END PP 3 ---

--- PP 4 ---
Name: NB dispersion link coefficients
Symbol: $\delta_0,\delta_{\mathrm{mcc}},\delta_{\mathrm{channel}},\eta$
Scope: merchant_location
Prior_type: Loaded constant (MLE estimates)
Prior_specified: Yes
Calibration_recipe: No
Posterior_validation: Yes (NB rejection‑rate corridor, p99 ≤3) :contentReference[oaicite:51]{index=51}
Provenance_tag: Yes (`nb_dispersion_coefficients.yaml`) :contentReference[oaicite:52]{index=52}
Units: log (count)
Default_policy: abort on missing file
Interface_consumer: Poisson–Gamma NB sampler
Description: Regression weights for dispersion φ in NB outlet‑count model.
Anchor: “$\log\phi=\delta_0+\delta_{\mathrm{mcc}}+\delta_{\mathrm{channel}}+\eta\log(\mathrm{GDPpc})$” :contentReference[oaicite:53]{index=53}
Context: “Dispersion log‑link (φ): … +η log GDPpc; η>0 enforced (profile likelihood).”
Gap_flags:
  prior_missing=N
  hyperparams_missing=Y
  calibration_missing=Y
  posterior_missing=N
  provenance_missing=N
  units_missing=N
  default_policy_missing=Y
  interface_consumer_missing=Y
  description_missing=N
Confidence=HIGH
--- END PP 4 ---

--- PP 5 ---
Name: Poisson–Gamma mixture Gamma shape/scale
Symbol: $G\sim\mathrm{Gamma}(r=\phi,\;\mathrm{scale}=\mu/\phi)$
Scope: merchant_location
Prior_type: Derived
Prior_specified: Yes
Calibration_recipe: No
Posterior_validation: No
Provenance_tag: Yes (NB artefact) :contentReference[oaicite:54]{index=54}
Units: count
Default_policy: abort on RNG failure
Interface_consumer: NB sampler in `multi_site_count.py`
Description: Gamma random deviate used for Poisson–Gamma NB sampling.
Anchor: “draw $G\sim\mathrm{Gamma}(r=\phi,\mathrm{scale}=\mu/\phi)$” :contentReference[oaicite:55]{index=55}
Context: “Implementation uses Poisson–Gamma mixture: draw $G\sim\Gamma(\dots)$; then $N\sim\mathrm{Poisson}(G)$.”
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=Y
  posterior_missing=Y
  provenance_missing=N
  units_missing=N
  default_policy_missing=Y
  interface_consumer_missing=Y
  description_missing=N
Confidence=HIGH
--- END PP 5 ---

--- PP 6 ---
Name: Poisson component of NB mixture
Symbol: $N\mid G\sim\mathrm{Poisson}(G)$
Scope: merchant_location
Prior_type: Derived
Prior_specified: Yes
Calibration_recipe: No
Posterior_validation: No
Provenance_tag: Yes (NB artefact) :contentReference[oaicite:56]{index=56}
Units: count
Default_policy: abort on RNG failure
Interface_consumer: NB sampler in `multi_site_count.py`
Description: Poisson deviate drawing final outlet count from Gamma mixture.
Anchor: “$N\mid G\sim\mathrm{Poisson}(G)$” :contentReference[oaicite:57]{index=57}
Context: “Sampling via Poisson–Gamma mixture …”
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=Y
  posterior_missing=Y
  provenance_missing=N
  units_missing=N
  default_policy_missing=Y
  interface_consumer_missing=Y
  description_missing=N
Confidence=HIGH
--- END PP 6 ---

--- PP 7 ---
Name: Zero‑truncated Poisson for foreign‑country count
Symbol: $K\sim\mathrm{ZTPoisson}(\lambda_{\mathrm{extra}})$
Scope: merchant_location
Prior_type: Poisson with rejection for $K\ge1$
Prior_specified: Yes
Calibration_recipe: No
Posterior_validation: Yes (mean & p99.9 rejection targets) :contentReference[oaicite:58]{index=58}
Provenance_tag: Yes (`crossborder_hyperparams.yaml`) :contentReference[oaicite:59]{index=59}
Units: count
Default_policy: abort on cap exceed
Interface_consumer: cross‑border allocation module
Description: Samples number of foreign markets per merchant, truncated at zero.
Anchor: “K ∼ ZTPoisson(λ_extra) … rejection sampling … cap=64.” :contentReference[oaicite:60]{index=60}
Context: “For merchants entering cross‑border… K ∼ ZTPoisson(λ_extra)… until K ≥1; cap 64, abort on exceed.”
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=Y
  posterior_missing=N
  provenance_missing=N
  units_missing=N
  default_policy_missing=Y
  interface_consumer_missing=Y
  description_missing=N
Confidence=HIGH
--- END PP 7 ---

--- PP 8 ---
Name: Cross‑border Poisson mean intercept & slope
Symbol: $\theta_0,\theta_1$
Scope: merchant_location
Prior_type: Linear regression (MLE)
Prior_specified: Yes
Calibration_recipe: No
Posterior_validation: Yes (Wald p‑value <1e‑5) :contentReference[oaicite:61]{index=61}
Provenance_tag: Yes (`crossborder_hyperparams.yaml`) :contentReference[oaicite:62]{index=62}
Units: dimensionless
Default_policy: abort on missing file
Interface_consumer: cross‑border λ_extra computation
Description: Intercept and log‑count slope defining λ_extra for ZTPoisson.
Anchor: “$\lambda_{\mathrm{extra}}=\theta_0+\theta_1\log N,\;\theta_1<1$” :contentReference[oaicite:63]{index=63}
Context: “… K ∼ ZTPoisson(λ_extra) with λ_extra=θ₀+θ₁ log N, θ₁<1 …”
Gap_flags:
  prior_missing=N
  hyperparams_missing=Y
  calibration_missing=Y
  posterior_missing=N
  provenance_missing=N
  units_missing=N
  default_policy_missing=Y
  interface_consumer_missing=Y
  description_missing=N
Confidence=HIGH
--- END PP 8 ---

--- PP 9 ---
Name: Intra‑currency Dirichlet smoothing constant
Symbol: $\alpha$
Scope: merchant_location
Prior_type: Fixed constant
Prior_specified: Yes
Calibration_recipe: N/A
Posterior_validation: N/A
Provenance_tag: Inline code :contentReference[oaicite:64]{index=64}
Units: dimensionless
Default_policy: use prior
Interface_consumer: currency→country expansion logic
Description: Additive smoothing to avoid zero weights when counts <30.
Anchor: “apply additive Dirichlet smoothing α=0.5” :contentReference[oaicite:65]{index=65}
Context: “… if any destination weight is sparse (count<30) additive Dirichlet smoothing (α=0.5) is applied.”
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=Y
  posterior_missing=Y
  provenance_missing=Y
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=N
  description_missing=N
Confidence=HIGH
--- END PP 9 ---

--- PP 10 ---
Name: Dirichlet concentration vector
Symbol: $\alpha_i$
Scope: merchant_location
Prior_type: Loaded constant
Prior_specified: Yes
Calibration_recipe: No
Posterior_validation: Yes (allocation error ≤1 unit) :contentReference[oaicite:66]{index=66}
Provenance_tag: Yes (`crossborder_hyperparams.yaml`) :contentReference[oaicite:67]{index=67}
Units: dimensionless
Default_policy: use prior
Interface_consumer: Dirichlet outlet allocation module
Description: Per-country concentration parameters for Gamma draws in outlet split.
Anchor: “loads the α‑vector … from `crossborder_hyperparams.yaml`” :contentReference[oaicite:68]{index=68}
Context: “code loads the α‑vector for (home_country,mcc,channel)… single Dirichlet(α) draw …”
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=Y
  posterior_missing=N
  provenance_missing=N
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=Y
  description_missing=N
Confidence=HIGH
--- END PP 10 ---

--- PP 11 ---
Name: Largest‑remainder rounding precision
Symbol: residual quantization to 8 dp
Scope: merchant_location
Prior_type: Fixed constant
Prior_specified: Yes
Calibration_recipe: N/A
Posterior_validation: Yes (rounding error metrics) :contentReference[oaicite:69]{index=69}
Provenance_tag: N/A
Units: decimal places
Default_policy: N/A
Interface_consumer: rounding module in spec
Description: Number of decimal places for residuals before sorting.
Anchor: “residuals are quantised to 8 decimal places” :contentReference[oaicite:70]{index=70}
Context: “… sorted descending with ISO secondary key … tie_break_rank …”
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=Y
  posterior_missing=N
  provenance_missing=Y
  units_missing=N
  default_policy_missing=Y
  interface_consumer_missing=Y
  description_missing=N
Confidence=MEDIUM
--- END PP 11 ---

--- PP 12 ---
Name: Site‑ID sequence width
Symbol: sequence_digits=6
Scope: merchant_location
Prior_type: Fixed constant
Prior_specified: Yes
Calibration_recipe: N/A
Posterior_validation: No
Provenance_tag: N/A
Units: digits
Default_policy: abort on overflow
Interface_consumer: site‑ID allocator
Description: Number of digits allocated per `(merchant_id, country_iso)`.
Anchor: “sequence width = 6 digits, max outlets per … = 999,999 → abort on overflow.” :contentReference[oaicite:71]{index=71}
Context: “site‑ID sequencing parameters: digits & capacity … abort on overflow.”
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=Y
  posterior_missing=Y
  provenance_missing=Y
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=Y
  description_missing=N
Confidence=MEDIUM
--- END PP 12 ---

--- PP 13 ---
Name: Site‑ID max capacity
Symbol: max_sequence=999999
Scope: merchant_location
Prior_type: Fixed constant
Prior_specified: Yes
Calibration_recipe: N/A
Posterior_validation: No
Provenance_tag: N/A
Units: count
Default_policy: abort on overflow
Interface_consumer: site‑ID allocator
Description: Maximum number of outlets per merchant‑country before abort.
Anchor: “max outlets … = 999,999 → abort on overflow.” :contentReference[oaicite:72]{index=72}
Context: “sequence width = 6 digits, max outlets … abort on overflow.”
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=Y
  posterior_missing=Y
  provenance_missing=Y
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=Y
  description_missing=N
Confidence=MEDIUM
--- END PP 13 ---

--- PP 14 ---
Name: NB rejection‑rate corridor
Symbol: overall_nb_rejection_rate ≤ 0.06
Scope: validation
Prior_type: Fixed monitoring threshold
Prior_specified: Yes
Calibration_recipe: N/A
Posterior_validation: Yes (CI monitoring) :contentReference[oaicite:73]{index=73}
Provenance_tag: N/A
Units: proportion
Default_policy: abort on breach
Interface_consumer: CI stationarity script
Description: Overall allowed NB rejection fraction.
Anchor: “monitor `nb_rejection_rate_overall` (target ≤ 0.06).” :contentReference[oaicite:74]{index=74}
Context: “… nightly CI monitors `nb_rejection_rate_overall` … abort on failure.”
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=Y
  posterior_missing=N
  provenance_missing=Y
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=Y
  description_missing=N
Confidence=MEDIUM
--- END PP 14 ---

--- PP 15 ---
Name: NB per‑merchant p99 rejection threshold
Symbol: p99 ≤ 3
Scope: validation
Prior_type: Fixed monitoring threshold
Prior_specified: Yes
Calibration_recipe: N/A
Posterior_validation: Yes
Provenance_tag: N/A
Units: count
Default_policy: abort on breach
Interface_consumer: CI stationarity script
Description: 99th‑percentile allowed NB retries per merchant.
Anchor: “p99 of rejection counts (≤3).” :contentReference[oaicite:75]{index=75}
Context: “… nightly CI monitors … 99th percentile … ≤3 …”
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=Y
  posterior_missing=N
  provenance_missing=Y
  units_missing=N
  default_policy_missing=Y
  interface_consumer_missing=Y
  description_missing=N
Confidence=MEDIUM
--- END PP 15 ---

--- PP 16 ---
Name: CUSUM control‑chart threshold
Symbol: h=5σ
Scope: validation
Prior_type: Fixed monitoring threshold
Prior_specified: Yes
Calibration_recipe: N/A
Posterior_validation: Yes
Provenance_tag: N/A
Units: standard deviations
Default_policy: abort on breach
Interface_consumer: CI stationarity script
Description: One‑sided CUSUM h‑limit for NB drift detection.
Anchor: “one‑sided CUSUM on deviation … with h=5σ abort threshold.” :contentReference[oaicite:76]{index=76}
Context: “… Control chart … h=5σ abort threshold.”
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=Y
  posterior_missing=N
  provenance_missing=Y
  units_missing=N
  default_policy_missing=Y
  interface_consumer_missing=Y
  description_missing=N
Confidence=MEDIUM
--- END PP 16 ---

--- PP 17 ---
Name: ZTP retry cap
Symbol: max_retries=64
Scope: merchant_location
Prior_type: Fixed constant
Prior_specified: Yes
Calibration_recipe: N/A
Posterior_validation: Yes (abort logic)
Provenance_tag: N/A
Units: count
Default_policy: abort on exceed
Interface_consumer: ZTP sampler
Description: Maximum Poisson rejections before aborting ZTP draw.
Anchor: “Hard cap of 64 rejections aborts the build.” :contentReference[oaicite:77]{index=77}
Context: “… until K ≥1; cap 64, abort (`ztp_retry_exhausted`).”
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=Y
  posterior_missing=N
  provenance_missing=Y
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=Y
  description_missing=N
Confidence=MEDIUM
--- END PP 17 ---

--- PP 18 ---
Name: ZTP mean‑rejection target
Symbol: mean_rej < 0.05
Scope: validation
Prior_type: Fixed monitoring threshold
Prior_specified: Yes
Calibration_recipe: N/A
Posterior_validation: Yes
Provenance_tag: N/A
Units: proportion
Default_policy: abort on breach
Interface_consumer: CI stationarity script
Description: Allowed mean rejection rate for ZTP sampling.
Anchor: “CI asserts mean rejections <0.05 … abort.” :contentReference[oaicite:78]{index=78}
Context: “… cap of 64 rejections aborts … CI asserts mean rejections < 0.05 …”
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=Y
  posterior_missing=N
  provenance_missing=Y
  units_missing=N
  default_policy_missing=Y
  interface_consumer_missing=Y
  description_missing=N
Confidence=MEDIUM
--- END PP 18 ---

--- PP 19 ---
Name: ZTP p99.9 rejection target
Symbol: p99.9 < 3
Scope: validation
Prior_type: Fixed monitoring threshold
Prior_specified: Yes
Calibration_recipe: N/A
Posterior_validation: Yes
Provenance_tag: N/A
Units: count
Default_policy: abort on breach
Interface_consumer: CI stationarity script
Description: 99.9th‑percentile allowed ZTP retries per merchant.
Anchor: “p99.9 <3; violations abort.” :contentReference[oaicite:79]{index=79}
Context: “… CI asserts … p99.9 <3; violations abort.”
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=Y
  posterior_missing=N
  provenance_missing=Y
  units_missing=N
  default_policy_missing=Y
  interface_consumer_missing=Y
  description_missing=N
Confidence=MEDIUM
--- END PP 19 ---

--- PP 20 ---
Name: θ₁ Wald p‑value cutoff
Symbol: p₍Wald₎ < 1×10⁻⁵
Scope: merchant_location
Prior_type: Fixed statistical threshold
Prior_specified: Yes
Calibration_recipe: N/A
Posterior_validation: Yes
Provenance_tag: Yes (`theta1_stats`)
Units: p‑value
Default_policy: abort on sub‑linearity fail
Interface_consumer: cross‑border regression test
Description: Significance threshold ensuring θ₁<1.
Anchor: “Wald p‑value < 1×10⁻⁵ for sub‑linearity (θ₁<1).” :contentReference[oaicite:80]{index=80}
Context: “… θ₁<1, Wald p‑value <1e-5; stored as `theta1_stats`.”
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=Y
  posterior_missing=N
  provenance_missing=N
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=Y
  description_missing=N
Confidence=HIGH
--- END PP 20 ---

--- PP 21 ---
Name: Numeric environment constraints
Symbol: IEEE‑754 binary64; disable fused‑multiply‑add
Scope: merchant_location
Prior_type: Fixed deterministic constraint
Prior_specified: Yes
Calibration_recipe: No
Posterior_validation: No
Provenance_tag: No
Units: dimensionless
Default_policy: documentation update + semver bump on any deviation
Interface_consumer: Dirichlet/Gamma sampler modules
Description: Enforces IEEE‑754 binary64 precision, serial reductions, and disables fused‑multiply‑add to guarantee bit‑identical stochastic arithmetic.
Anchor: “All stochastic arithmetic uses IEEE‑754 binary64. Residual fractions quantised to 8 decimal places pre‑sort. Serial (non‑parallel) reductions ensure consistent sum order. Fused‑multiply‑add disabled for Dirichlet and residual operations.” :contentReference[oaicite:81]{index=81}
Context: “Metrics outside corridors cause build failure (not warning). All stochastic arithmetic uses IEEE‑754 binary64. Residual fractions quantised to 8 decimal places pre‑sort.” :contentReference[oaicite:82]{index=82}
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=Y
  posterior_missing=Y
  provenance_missing=Y
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=N
  description_missing=N
Confidence=HIGH
--- END PP 21 ---

--- PP 22 ---
Name: Residual‑sort tie‑break key
Symbol: secondary tie‑break by ISO lexicographic code
Scope: merchant_location
Prior_type: Fixed deterministic rule
Prior_specified: Yes
Calibration_recipe: No
Posterior_validation: Yes (post‑write validation recomputes and verifies `tie_break_rank`) :contentReference[oaicite:83]{index=83}
Provenance_tag: No
Units: dimensionless
Default_policy: Abort on validation mismatch
Interface_consumer: Largest‑remainder rounding module
Description: Secondary sort key (ISO code ASCII) used to resolve ties when ordering residual fractions in largest‑remainder allocation.
Anchor: “Sort residuals descending; break ties by ISO code (ASCII).” :contentReference[oaicite:84]{index=84}
Context: “Residuals $r_i = w_i N - n_i^{\text{floor}}$; quantise $r_i$ to 8 dp. Sort residuals descending; break ties by ISO code (ASCII). Let $d = N - \sum n_i^{\text{floor}}$.” :contentReference[oaicite:85]{index=85}
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=Y
  posterior_missing=N
  provenance_missing=Y
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=N
  description_missing=N
Confidence=HIGH
--- END PP 22 ---

<<PP‑END>>