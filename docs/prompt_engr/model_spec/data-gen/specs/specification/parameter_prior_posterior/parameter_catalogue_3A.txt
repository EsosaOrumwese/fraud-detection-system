--- PP 1 ---
Name: Mixture threshold θ_mix  
Symbol: θ_mix  
Scope: merchant_location  
Prior_type: Fixed constant  
Prior_specified: Yes  
Calibration_recipe: No  
Posterior_validation: Yes  
Provenance_tag: Yes  
Units: dimensionless  
Default_policy: abort on drift  
Interface_consumer: `allocation/mixture.py:flag_escalation_countries`  
Description: Threshold on normalized country mass above which a country enters the zone‐mixture queue.  
Anchor: “single key `theta_mix`, whose default scalar value is **0.01**.” :contentReference[oaicite:16]{index=16}  
Context: “That file contains a single key `theta_mix`, whose default scalar value is **0.01**. During the allocation pass …”  
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=N
  posterior_missing=N
  provenance_missing=N
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=N
  description_missing=N
Confidence=HIGH
--- END PP 1 ---

--- PP 2 ---
Name: Dirichlet smoothing constant τ  
Symbol: τ  
Scope: merchant_location  
Prior_type: Fixed constant  
Prior_specified: Yes  
Calibration_recipe: No  
Posterior_validation: No  
Provenance_tag: Yes  
Units: dimensionless  
Default_policy: use prior  
Interface_consumer: `make_zone_alphas.py`  
Description: Global smoothing multiplier applied to empirical zone‐share proportions before rounding to integers.  
Anchor: “multiplies by a global smoothing constant τ (also stored in the YAML, default **200**) and rounds to the nearest integer.” :contentReference[oaicite:17]{index=17}  
Context: “computes the empirical zone share π_z … multiplies by a global smoothing constant τ …”  
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=N
  posterior_missing=Y
  provenance_missing=N
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=N
  description_missing=N
Confidence=MEDIUM
--- END PP 2 ---

--- PP 3 ---
Name: Dirichlet concentration vector α_z  
Symbol: α_z  
Scope: merchant_location  
Prior_type: Loaded constant  
Prior_specified: Yes  
Calibration_recipe: Yes  
Posterior_validation: No  
Provenance_tag: Yes  
Units: dimensionless  
Default_policy: abort on missing file  
Interface_consumer: `allocation/zone_allocator.py:compute_dirichlet_shares`  
Description: Per‐zone concentration parameters for the Dirichlet prior on zone shares.  
Anchor: “Those integers are Dirichlet concentration parameters α_z. They are derived by the script `make_zone_alphas.py`.” :contentReference[oaicite:18]{index=18}  
Context: “ingests … aggregates, computes the empirical zone share π_z … multiplies by τ …”  
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=N
  posterior_missing=Y
  provenance_missing=N
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=N
  description_missing=N
Confidence=HIGH
--- END PP 3 ---

--- PP 4 ---
Name: Gamma shape/scale for Dirichlet draw  
Symbol: g_z∼Gamma(shape=α_z, scale=1)  
Scope: merchant_location  
Prior_type: Gamma  
Prior_specified: Yes  
Calibration_recipe: No  
Posterior_validation: No  
Provenance_tag: Yes  
Units: dimensionless  
Default_policy: abort on RNG error  
Interface_consumer: `allocation/zone_allocator.py:compute_dirichlet_shares`  
Description: Gamma variates drawn independently to form the Dirichlet share vector.  
Anchor: “Draw independent Gamma variates g_z∼Gamma(α_z,1), then set s_z = g_z/∑g_k.” :contentReference[oaicite:19]{index=19}  
Context: “Let α = … Draw independent Gamma variates g_z ∼ Gamma(α_z,1); then set s_z = g_z/∑_k g_k.”  
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=N
  posterior_missing=Y
  provenance_missing=N
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=N
  description_missing=N
Confidence=HIGH
--- END PP 4 ---

--- PP 5 ---
Name: Bump‐rule threshold ε_bump  
Symbol: ε_bump = 0.8  
Scope: merchant_location  
Prior_type: Fixed constant  
Prior_specified: Yes  
Calibration_recipe: No  
Posterior_validation: Yes  
Provenance_tag: Yes  
Units: dimensionless  
Default_policy: abort on rule failure  
Interface_consumer: `allocation/zone_allocator.py:apply_bump_rule`  
Description: Fractional expectation threshold below which zones are boosted to avoid elimination.  
Anchor: “searches for any zone whose e_z > 0.8 and integer allotment is zero.” :contentReference[oaicite:20]{index=20}  
Context: “After standard rounding … searches for any zone whose e_z > 0.8 and integer allotment is zero.”  
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=N
  posterior_missing=N
  provenance_missing=N
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=N
  description_missing=N
Confidence=HIGH
--- END PP 5 ---

--- PP 6 ---
Name: Major‐zone fallback mapping  
Symbol: country_major_zone.csv  
Scope: merchant_location  
Prior_type: Fixed artefact reference  
Prior_specified: Yes  
Calibration_recipe: No  
Posterior_validation: Yes  
Provenance_tag: Yes  
Units: N/A  
Default_policy: abort on missing row  
Interface_consumer: `allocation/zone_allocator.py:select_major_zone`  
Description: Maps each country to its largest‐area TZID when no mixture is applied.  
Anchor: “fallback to single ‘major’ time‑zone … consults a CSV file called `country_major_zone.csv`.” :contentReference[oaicite:21]{index=21}  
Context: “Countries whose mass lies at or below θ bypass the Dirichlet logic. The code consults …`country_major_zone.csv`.”  
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=N
  posterior_missing=N
  provenance_missing=N
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=N
  description_missing=N
Confidence=HIGH
--- END PP 6 ---

--- PP 7 ---
Name: Zone‐floor vector φ_z  
Symbol: φ_z  
Scope: merchant_location  
Prior_type: Loaded constant  
Prior_specified: Yes  
Calibration_recipe: No  
Posterior_validation: Yes  
Provenance_tag: Yes  
Units: count  
Default_policy: abort on violation  
Interface_consumer: `allocation/zone_allocator.py:enforce_zone_floors`  
Description: Minimum integer outlet counts per TZID to protect micro‑zones.  
Anchor: “YAML `zone_floor.yml` lists floors for selected TZIDs.” :contentReference[oaicite:22]{index=22}  
Context: “To guarantee that every zone … the YAML `zone_floor.yml` lists floors … verified by `ci/test_zone_floor.py`.”  
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=N
  posterior_missing=N
  provenance_missing=N
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=N
  description_missing=N
Confidence=HIGH
--- END PP 7 ---

--- PP 8 ---
Name: Corporate‑day variance σ_γ²  
Symbol: σ_γ²  
Scope: merchant_location  
Prior_type: Loaded constant  
Prior_specified: Yes  
Calibration_recipe: No  
Posterior_validation: Yes  
Provenance_tag: Yes  
Units: dimensionless (variance)  
Default_policy: abort on missing file  
Interface_consumer: `routing/day_effect.py`  
Description: Variance parameter for the log‑normal corporate‑day multiplier.  
Anchor: “variance σ_γ² lives in `routing_day_effect.yml` under key `sigma_gamma_sq`, default **0.15**.” :contentReference[oaicite:23]{index=23}  
Context: “The variance σ_γ² lives in … under key `sigma_gamma_sq`, default **0.15**.”  
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=N
  posterior_missing=N
  provenance_missing=N
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=N
  description_missing=N
Confidence=HIGH
--- END PP 8 ---

--- PP 9 ---
Name: Corporate‑day mean μ_γ  
Symbol: μ_γ = −½ σ_γ²  
Scope: merchant_location  
Prior_type: Deterministic derived constant  
Prior_specified: Yes  
Calibration_recipe: No  
Posterior_validation: No  
Provenance_tag: Yes  
Units: dimensionless  
Default_policy: use prior  
Interface_consumer: `routing/day_effect.py`  
Description: Mean of the log‑normal draw, set to enforce E[γ_d]=1.  
Anchor: “mean log‑normal transform produces log γ_d with mean −σ_γ²/2.” :contentReference[oaicite:24]{index=24}  
Context: “inverse‑Gaussian transform produces log γ_d … with mean −σ_γ²/2.”  
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=N
  posterior_missing=N
  provenance_missing=N
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=N
  description_missing=N
Confidence=HIGH
--- END PP 9 ---

--- PP 10 ---
Name: Gamma‑day uniform deviate u_d  
Symbol: u_d ∼ U(0,1)  
Scope: merchant_location  
Prior_type: Uniform  
Prior_specified: Yes  
Calibration_recipe: No  
Posterior_validation: Yes  
Provenance_tag: Yes  
Units: dimensionless  
Default_policy: abort on RNG error  
Interface_consumer: `routing/day_effect.py`  
Description: Uniform draw driving the inverse‑Gaussian transform for γ_d.  
Anchor: “draws one 64‑bit uniform; the inverse‑Gaussian transform produces log γ_d …” :contentReference[oaicite:25]{index=25}  
Context: “At the stroke of 00:00 UTC, the merchant’s Philox sub‑stream draws one 64‑bit uniform; the inverse‑Gaussian transform produces log γ_d.”  
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=N
  posterior_missing=N
  provenance_missing=N
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=N
  description_missing=N
Confidence=HIGH
--- END PP 10 ---

--- PP 11 ---
Name: Gamma‑day RNG key derivation  
Symbol: key = SHA256(global_seed‖"gamma_day"‖merchant_id)  
Scope: merchant_location  
Prior_type: Deterministic hash policy  
Prior_specified: Yes  
Calibration_recipe: No  
Posterior_validation: Yes  
Provenance_tag: Yes  
Units: hex (256‑bit)  
Default_policy: abort on mismatch  
Interface_consumer: `routing/day_effect.py`  
Description: Philox sub‑stream key derived for reproducible γ_d draws.  
Anchor: “seed derivation is governed by `rng_policy.yml` and its SHA‑256 is stored as `gamma_day_key_digest`.” :contentReference[oaicite:26]{index=26}  
Context: “This derivation is governed by `config/routing/rng_policy.yml` and its SHA‑256 is stored as `gamma_day_key_digest`.”  
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=N
  posterior_missing=N
  provenance_missing=N
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=N
  description_missing=N
Confidence=HIGH
--- END PP 11 ---

--- PP 12 ---
Name: Universe hash h  
Symbol: h = SHA256(zone_alpha_digest‖θ_digest‖zone_floor_digest‖gamma_variance_digest‖zone_alloc_parquet_digest)  
Scope: merchant_location  
Prior_type: Deterministic function  
Prior_specified: Yes  
Calibration_recipe: No  
Posterior_validation: Yes  
Provenance_tag: No  
Units: hex (256‑bit)  
Default_policy: abort on mismatch  
Interface_consumer: `allocation/universe_hash.py`  
Description: Aggregate digest binding all cross‑zone parameters and Parquet outputs.  
Anchor: “computes h = SHA256(zone_alpha_digest‖…‖zone_alloc_parquet_digest).” :contentReference[oaicite:27]{index=27}  
Context: “When each merchant’s alias table … recomputes h … any mismatch raises `UniverseHashError`.”  
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=N
  posterior_missing=N
  provenance_missing=N
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=N
  description_missing=N
Confidence=HIGH
--- END PP 12 ---

--- PP 13 ---
Name: Zone‐alloc Parquet digest  
Symbol: zone_alloc_parquet_digest  
Scope: merchant_location  
Prior_type: Fixed artefact reference  
Prior_specified: Yes  
Calibration_recipe: No  
Posterior_validation: Yes  
Provenance_tag: Yes  
Units: hex (256‑bit)  
Default_policy: abort on drift  
Interface_consumer: router startup check  
Description: SHA‑256 of per‑merchant zone‑allocation Parquet, used for drift detection.  
Anchor: “appends `<merchant_id>,<sha256>` to `zone_alloc_index.csv`.” :contentReference[oaicite:28]{index=28}  
Context: “The allocator emits … and simultaneously appends `<merchant_id>,<sha256>` to `zone_alloc_index.csv`.”  
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=N
  posterior_missing=N
  provenance_missing=N
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=N
  description_missing=N
Confidence=HIGH
--- END PP 13 ---

--- PP 14 ---
Name: Zone‐alloc index digest  
Symbol: zone_alloc_index_digest  
Scope: merchant_location  
Prior_type: Fixed artefact reference  
Prior_specified: Yes  
Calibration_recipe: No  
Posterior_validation: Yes  
Provenance_tag: Yes  
Units: hex (256‑bit)  
Default_policy: abort on mismatch  
Interface_consumer: router startup check  
Description: Manifest key for the CSV index of Parquet digests.  
Anchor: “manifest key `zone_alloc_index_digest`.” :contentReference[oaicite:29]{index=29}  
Context: “appends `<merchant_id>,<sha256>` to `zone_alloc_index.csv` (manifest key `zone_alloc_index_digest`).”  
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=N
  posterior_missing=N
  provenance_missing=N
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=N
  description_missing=N
Confidence=HIGH
--- END PP 14 ---

--- PP 15 ---
Name: Barcode‐slope lower/upper bounds  
Symbol: slope_low = −1.0, slope_high = −0.5  
Scope: validation  
Prior_type: Loaded constants  
Prior_specified: Yes  
Calibration_recipe: No  
Posterior_validation: Yes  
Provenance_tag: Yes  
Units: offsets per hour  
Default_policy: abort on breach  
Interface_consumer: `validation/cross_zone_validation.py`  
Description: Acceptable slope range for the offset‐barcode test in CI.  
Anchor: “config sets `barcode_slope_low = -1` and `barcode_slope_high = -0.5`.” :contentReference[oaicite:30]{index=30}  
Context: “YAML `cross_zone_validation.yml` sets `barcode_slope_low = -1` and `barcode_slope_high = -0.5`.”  
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=N
  posterior_missing=N
  provenance_missing=N
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=N
  description_missing=N
Confidence=HIGH
--- END PP 15 ---

--- PP 16 ---
Name: Zone‐share convergence tolerance  
Symbol: share_tolerance = 0.02  
Scope: validation  
Prior_type: Loaded constant  
Prior_specified: Yes  
Calibration_recipe: No  
Posterior_validation: Yes  
Provenance_tag: Yes  
Units: dimensionless (proportion)  
Default_policy: abort on breach  
Interface_consumer: `validation/cross_zone_validation.py`  
Description: Maximum allowed absolute difference between empirical and target zone shares.  
Anchor: “`share_tolerance=0.02`.” :contentReference[oaicite:31]{index=31}  
Context: “`config/validation/cross_zone_validation.yml` sets `share_tolerance=0.02`.”  
Gap_flags:
  prior_missing=N
  hyperparams_missing=N
  calibration_missing=N
  posterior_missing=N
  provenance_missing=N
  units_missing=N
  default_policy_missing=N
  interface_consumer_missing=N
  description_missing=N
Confidence=HIGH
--- END PP 16 ---

<<PP‑END>>