Got it—here’s your **updated initial** with the precise touch-ups folded in (keeping our base, tightening where needed).

---

# Major/High #1 — Attempt pairing is ambiguous (time/file-order vs counter)

**Resolution (normative; update S2.3/S2.4/S2.6/S2.7/S2.9 where pairing is discussed):**

* **Single authoritative pairing rule.** For each merchant and label set `{gamma_component(context="nb"), poisson_component(context="nb")}`, attempts **MUST** be reconstructed **solely by counter intervals**—never by file/emit time or file order.

  **Procedure (binding):**

  1. Collect all `gamma_component` rows for the merchant; sort **lexicographically** by the 128-bit `rng_counter_before` (i.e., `(before_hi, before_lo)` ascending). **Ties are invalid** and MUST hard-fail validation.
  2. Collect all `poisson_component` rows for the merchant; apply the same sort & tie rule.
  3. Let the **i-th attempt** be the pair `⟨gamma[i], poisson[i]⟩` with the ordering constraint
     `u128(before)_gamma[i] < u128(after)_gamma[i] ≤ u128(before)_poisson[i] < u128(after)_poisson[i]`.
  4. Cardinalities **MUST** match (`|gamma| == |poisson|`); any violation is a validator error.

* **Disallowed guidance.** Remove/replace any mention of “interleave by **time**/**file order**” or “alternation by emit order”; time/file order is **non-contractual**.

**Acceptance checks:** Validator reconstructs attempts using **only** counter order; it fails if time/file order would change the pairing or if the ordering constraint is violated.
**Non-changes:** No schema changes; no new fields—pairing rule only.

---

# Major/High #2 — Component stream metadata under-specified (module literal & `index` semantics)

**Resolution (normative; update S2.5 “Envelope/Payload” and echo in S2.9 “Outputs”):**

* **Pin `module` registry literals (binding).** The `module` envelope field for the NB streams **MUST** be the **registry-closed literal** (no placeholders). This doc **MUST** state the exact strings for:
  • `gamma_component (context="nb")` → **<exact registry literal>**,
  • `poisson_component (context="nb")` → **<exact registry literal>**,
  • `nb_final` → **<exact registry literal>**.
  (Fill these from the registry/dictionary and ensure byte-for-byte equality.)

* **Define `index` semantics for NB Gamma (binding).** For `gamma_component (context="nb")`, the Gamma is **scalar** per attempt; therefore **`index` MUST be the fixed value `0`** and serves only as a **scalar placeholder** (not a component selector). State this **once** and reference where used.

* **Where to state.**
  • In **S2.5 (Envelope/Payload “must”)**, list the three producers with their **exact `module` literals** and specify `index=0 (scalar placeholder)` for NB Gamma.
  • In **S2.9 (Outputs)**, echo those same literals (read-only recap), ensuring consistency with the registry.

**Acceptance checks:** Examples and prose use the **exact** `module` strings from the registry (no `1A.nb_*` placeholders). All `gamma_component (context="nb")` rows carry `"index": 0`, with the scalar-placeholder meaning documented.
**Non-changes:** No label changes, no schema expansion; we’re pinning vocabulary and clarifying semantics only.
