{
  "policy_id": "alias_layout_policy_v1",
  "version_tag": "1.0.2",
  "policy_version": "1.0.2",
  "weight_source": {
    "id": "profile_mixture_v2",
    "mode": "profile_mixture_v2"
  },
  "profile_mixture_v2": {
    "merchant_size_buckets": {
      "small": {
        "min_sites": 1,
        "max_sites": 3
      },
      "mid": {
        "min_sites": 4,
        "max_sites": 8
      },
      "large": {
        "min_sites": 9
      }
    },
    "mixture_weights": {
      "small": {
        "hub_spoke": 0.58,
        "heavy_tail": 0.27,
        "near_uniform": 0.15
      },
      "mid": {
        "hub_spoke": 0.42,
        "heavy_tail": 0.38,
        "near_uniform": 0.2
      },
      "large": {
        "hub_spoke": 0.3,
        "heavy_tail": 0.45,
        "near_uniform": 0.25
      }
    },
    "concentration_alpha_by_bucket": {
      "small": {
        "hub_spoke": 2.2,
        "heavy_tail": 1.45,
        "near_uniform": 0.28
      },
      "mid": {
        "hub_spoke": 1.85,
        "heavy_tail": 1.25,
        "near_uniform": 0.22
      },
      "large": {
        "hub_spoke": 1.55,
        "heavy_tail": 1.05,
        "near_uniform": 0.16
      }
    },
    "top1_soft_cap_by_bucket": {
      "small": 0.8,
      "mid": 0.7,
      "large": 0.6
    },
    "min_secondary_mass": {
      "small": 0.06,
      "mid": 0.04,
      "large": 0.025
    },
    "deterministic_seed_scope": "merchant_id"
  },
  "floor_spec": {
    "mode": "absolute",
    "value": 0.0,
    "fallback": "uniform"
  },
  "cap_spec": {
    "mode": "none"
  },
  "fallback": {
    "mode": "uniform"
  },
  "required_s1_provenance": {
    "weight_source": true,
    "quantised_bits": true,
    "floor_applied": true
  },
  "normalisation_epsilon": 1e-12,
  "quantised_bits": 24,
  "quantisation_epsilon": 1.2e-07,
  "tiny_negative_epsilon": 1e-15,
  "layout_version": "2B.alias.blob.v1",
  "endianness": "little",
  "alignment_bytes": 8,
  "padding_rule": {
    "pad_byte_hex": "00",
    "pad_included_in_slice_length": false
  },
  "encode_spec": {
    "mass_rounding": "round_to_nearest_ties_to_even",
    "delta_adjust": "residual_ranked_plus_minus_one",
    "worklist_order": "ascending_index",
    "treat_within_epsilon_of_one_as_one": true
  },
  "record_layout": {
    "slice_header": "u32_n_sites,u32_prob_qbits,u32_reserved0,u32_reserved1",
    "prob_qbits": 32,
    "prob_q_encoding": "Q0.32_floor_clamp_1_to_2^32-1",
    "alias_index_type": "u32"
  },
  "checksum": {
    "algorithm": "sha256",
    "scope": "slice_payload_bytes",
    "encoding": "hex64_lower"
  },
  "blob_digest": {
    "algorithm": "sha256",
    "scope": "raw_blob_bytes",
    "encoding": "hex64_lower"
  },
  "required_index_fields": {
    "header": [
      "blob_sha256",
      "blob_size_bytes",
      "layout_version",
      "endianness",
      "alignment_bytes",
      "quantised_bits",
      "created_utc",
      "policy_id",
      "policy_digest",
      "merchants_count",
      "merchants"
    ],
    "merchant_row": [
      "merchant_id",
      "offset",
      "length",
      "sites",
      "quantised_bits",
      "checksum"
    ]
  },
  "decode_law": "walker_vose_q0_32",
  "notes": "Deterministic profile mixture weights with merchant-scoped component selection and soft-cap controls."
}
